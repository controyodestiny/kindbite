/*! For license information please see main.0a31954e.js.LICENSE.txt */
(()=>{"use strict";var e={43:(e,t,n)=>{e.exports=n(202)},153:(e,t,n)=>{var r=n(43),a=Symbol.for("react.element"),s=Symbol.for("react.fragment"),i=Object.prototype.hasOwnProperty,l=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,o={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,d=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(d=t.ref),t)i.call(t,r)&&!o.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:a,type:e,key:c,ref:d,props:s,_owner:l.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},202:(e,t)=>{var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),o=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),d=Symbol.for("react.suspense"),u=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},h=Object.assign,g={};function x(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}function y(){}function v(e,t,n){this.props=e,this.context=t,this.refs=g,this.updater=n||p}x.prototype.isReactComponent={},x.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},x.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},y.prototype=x.prototype;var b=v.prototype=new y;b.constructor=v,h(b,x.prototype),b.isPureReactComponent=!0;var w=Array.isArray,j=Object.prototype.hasOwnProperty,N={current:null},k={key:!0,ref:!0,__self:!0,__source:!0};function _(e,t,r){var a,s={},i=null,l=null;if(null!=t)for(a in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(i=""+t.key),t)j.call(t,a)&&!k.hasOwnProperty(a)&&(s[a]=t[a]);var o=arguments.length-2;if(1===o)s.children=r;else if(1<o){for(var c=Array(o),d=0;d<o;d++)c[d]=arguments[d+2];s.children=c}if(e&&e.defaultProps)for(a in o=e.defaultProps)void 0===s[a]&&(s[a]=o[a]);return{$$typeof:n,type:e,key:i,ref:l,props:s,_owner:N.current}}function S(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var E=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function P(e,t,a,s,i){var l=typeof e;"undefined"!==l&&"boolean"!==l||(e=null);var o=!1;if(null===e)o=!0;else switch(l){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case n:case r:o=!0}}if(o)return i=i(o=e),e=""===s?"."+C(o,0):s,w(i)?(a="",null!=e&&(a=e.replace(E,"$&/")+"/"),P(i,t,a,"",function(e){return e})):null!=i&&(S(i)&&(i=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(i,a+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(E,"$&/")+"/")+e)),t.push(i)),1;if(o=0,s=""===s?".":s+":",w(e))for(var c=0;c<e.length;c++){var d=s+C(l=e[c],c);o+=P(l,t,a,d,i)}else if(d=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof d)for(e=d.call(e),c=0;!(l=e.next()).done;)o+=P(l=l.value,t,a,d=s+C(l,c++),i);else if("object"===l)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function A(e,t,n){if(null==e)return e;var r=[],a=0;return P(e,r,"","",function(e){return t.call(n,e,a++)}),r}function T(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var L={current:null},F={transition:null},R={ReactCurrentDispatcher:L,ReactCurrentBatchConfig:F,ReactCurrentOwner:N};t.Children={map:A,forEach:function(e,t,n){A(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return A(e,function(){t++}),t},toArray:function(e){return A(e,function(e){return e})||[]},only:function(e){if(!S(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=x,t.Fragment=a,t.Profiler=i,t.PureComponent=v,t.StrictMode=s,t.Suspense=d,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var a=h({},e.props),s=e.key,i=e.ref,l=e._owner;if(null!=t){if(void 0!==t.ref&&(i=t.ref,l=N.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var o=e.type.defaultProps;for(c in t)j.call(t,c)&&!k.hasOwnProperty(c)&&(a[c]=void 0===t[c]&&void 0!==o?o[c]:t[c])}var c=arguments.length-2;if(1===c)a.children=r;else if(1<c){o=Array(c);for(var d=0;d<c;d++)o[d]=arguments[d+2];a.children=o}return{$$typeof:n,type:e.type,key:s,ref:i,props:a,_owner:l}},t.createContext=function(e){return(e={$$typeof:o,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:l,_context:e},e.Consumer=e},t.createElement=_,t.createFactory=function(e){var t=_.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=S,t.lazy=function(e){return{$$typeof:m,_payload:{_status:-1,_result:e},_init:T}},t.memo=function(e,t){return{$$typeof:u,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=F.transition;F.transition={};try{e()}finally{F.transition=t}},t.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")},t.useCallback=function(e,t){return L.current.useCallback(e,t)},t.useContext=function(e){return L.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return L.current.useDeferredValue(e)},t.useEffect=function(e,t){return L.current.useEffect(e,t)},t.useId=function(){return L.current.useId()},t.useImperativeHandle=function(e,t,n){return L.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return L.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return L.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return L.current.useMemo(e,t)},t.useReducer=function(e,t,n){return L.current.useReducer(e,t,n)},t.useRef=function(e){return L.current.useRef(e)},t.useState=function(e){return L.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return L.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return L.current.useTransition()},t.version="18.1.0"},234:(e,t)=>{function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,a=e[r];if(!(0<s(a,t)))break e;e[r]=t,e[n]=a,n=r}}function r(e){return 0===e.length?null:e[0]}function a(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,a=e.length,i=a>>>1;r<i;){var l=2*(r+1)-1,o=e[l],c=l+1,d=e[c];if(0>s(o,n))c<a&&0>s(d,o)?(e[r]=d,e[c]=n,r=c):(e[r]=o,e[l]=n,r=l);else{if(!(c<a&&0>s(d,n)))break e;e[r]=d,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var i=performance;t.unstable_now=function(){return i.now()}}else{var l=Date,o=l.now();t.unstable_now=function(){return l.now()-o}}var c=[],d=[],u=1,m=null,f=3,p=!1,h=!1,g=!1,x="function"===typeof setTimeout?setTimeout:null,y="function"===typeof clearTimeout?clearTimeout:null,v="undefined"!==typeof setImmediate?setImmediate:null;function b(e){for(var t=r(d);null!==t;){if(null===t.callback)a(d);else{if(!(t.startTime<=e))break;a(d),t.sortIndex=t.expirationTime,n(c,t)}t=r(d)}}function w(e){if(g=!1,b(e),!h)if(null!==r(c))h=!0,F(j);else{var t=r(d);null!==t&&R(w,t.startTime-e)}}function j(e,n){h=!1,g&&(g=!1,y(S),S=-1),p=!0;var s=f;try{for(b(n),m=r(c);null!==m&&(!(m.expirationTime>n)||e&&!P());){var i=m.callback;if("function"===typeof i){m.callback=null,f=m.priorityLevel;var l=i(m.expirationTime<=n);n=t.unstable_now(),"function"===typeof l?m.callback=l:m===r(c)&&a(c),b(n)}else a(c);m=r(c)}if(null!==m)var o=!0;else{var u=r(d);null!==u&&R(w,u.startTime-n),o=!1}return o}finally{m=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var N,k=!1,_=null,S=-1,E=5,C=-1;function P(){return!(t.unstable_now()-C<E)}function A(){if(null!==_){var e=t.unstable_now();C=e;var n=!0;try{n=_(!0,e)}finally{n?N():(k=!1,_=null)}}else k=!1}if("function"===typeof v)N=function(){v(A)};else if("undefined"!==typeof MessageChannel){var T=new MessageChannel,L=T.port2;T.port1.onmessage=A,N=function(){L.postMessage(null)}}else N=function(){x(A,0)};function F(e){_=e,k||(k=!0,N())}function R(e,n){S=x(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){h||p||(h=!0,F(j))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):E=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,a,s){var i=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?i+s:i:s=i,e){case 1:var l=-1;break;case 2:l=250;break;case 5:l=1073741823;break;case 4:l=1e4;break;default:l=5e3}return e={id:u++,callback:a,priorityLevel:e,startTime:s,expirationTime:l=s+l,sortIndex:-1},s>i?(e.sortIndex=s,n(d,e),null===r(c)&&e===r(d)&&(g?(y(S),S=-1):g=!0,R(w,s-i))):(e.sortIndex=l,n(c,e),h||p||(h=!0,F(j))),e},t.unstable_shouldYield=P,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},391:(e,t,n)=>{var r=n(950);t.H=r.createRoot,r.hydrateRoot},579:(e,t,n)=>{e.exports=n(153)},730:(e,t,n)=>{var r=n(43),a=n(853);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i=new Set,l={};function o(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(l[e]=t,e=0;e<t.length;e++)i.add(t[e])}var d=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),u=Object.prototype.hasOwnProperty,m=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function h(e,t,n,r,a,s,i){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=i}var g={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){g[e]=new h(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];g[t]=new h(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){g[e]=new h(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){g[e]=new h(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){g[e]=new h(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){g[e]=new h(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){g[e]=new h(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){g[e]=new h(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){g[e]=new h(e,5,!1,e.toLowerCase(),null,!1,!1)});var x=/[\-:]([a-z])/g;function y(e){return e[1].toUpperCase()}function v(e,t,n,r){var a=g.hasOwnProperty(t)?g[t]:null;(null!==a?0!==a.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,a,r)&&(n=null),r||null===a?function(e){return!!u.call(p,e)||!u.call(f,e)&&(m.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=null===n?3!==a.type&&"":n:(t=a.attributeName,r=a.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(a=a.type)||4===a&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new h(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(x,y);g[t]=new h(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(x,y);g[t]=new h(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!1,!1)}),g.xlinkHref=new h("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){g[e]=new h(e,1,!1,e.toLowerCase(),null,!0,!0)});var b=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,w=Symbol.for("react.element"),j=Symbol.for("react.portal"),N=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),_=Symbol.for("react.profiler"),S=Symbol.for("react.provider"),E=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),P=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),T=Symbol.for("react.memo"),L=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var F=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function I(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,M=Object.assign;function z(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var D=!1;function q(e,t){if(!e||D)return"";D=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var a=c.stack.split("\n"),s=r.stack.split("\n"),i=a.length-1,l=s.length-1;1<=i&&0<=l&&a[i]!==s[l];)l--;for(;1<=i&&0<=l;i--,l--)if(a[i]!==s[l]){if(1!==i||1!==l)do{if(i--,0>--l||a[i]!==s[l]){var o="\n"+a[i].replace(" at new "," at ");return e.displayName&&o.includes("<anonymous>")&&(o=o.replace("<anonymous>",e.displayName)),o}}while(1<=i&&0<=l);break}}}finally{D=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?z(e):""}function U(e){switch(e.tag){case 5:return z(e.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return e=q(e.type,!1);case 11:return e=q(e.type.render,!1);case 1:return e=q(e.type,!0);default:return""}}function H(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case N:return"Fragment";case j:return"Portal";case _:return"Profiler";case k:return"StrictMode";case P:return"Suspense";case A:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case E:return(e.displayName||"Context")+".Consumer";case S:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case T:return null!==(t=e.displayName||null)?t:H(e.type)||"Memo";case L:t=e._payload,e=e._init;try{return H(e(t))}catch(n){}}return null}function V(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(t);case 8:return t===k?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function K(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function B(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function W(e){e._valueTracker||(e._valueTracker=function(e){var t=B(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var a=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=B(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function $(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Q(e,t){var n=t.checked;return M({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Y(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=K(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function X(e,t){null!=(t=t.checked)&&v(e,"checked",t,!1)}function J(e,t){X(e,t);var n=K(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,K(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function Z(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&$(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&r&&(e[n].defaultSelected=!0)}else{for(n=""+K(n),t=null,a=0;a<e.length;a++){if(e[a].value===n)return e[a].selected=!0,void(r&&(e[a].defaultSelected=!0));null!==t||e[a].disabled||(t=e[a])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return M({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ae(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:K(n)}}function se(e,t){var n=K(t.value),r=K(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ie(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function le(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function oe(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?le(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,de,ue=(de=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return de(e,t)})}:de);function me(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function he(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function ge(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),a=he(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,a):e[n]=a}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var xe=M({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ye(e,t){if(t){if(xe[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function ve(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var be=null;function we(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var je=null,Ne=null,ke=null;function _e(e){if(e=va(e)){if("function"!==typeof je)throw Error(s(280));var t=e.stateNode;t&&(t=wa(t),je(e.stateNode,e.type,t))}}function Se(e){Ne?ke?ke.push(e):ke=[e]:Ne=e}function Ee(){if(Ne){var e=Ne,t=ke;if(ke=Ne=null,_e(e),t)for(e=0;e<t.length;e++)_e(t[e])}}function Ce(e,t){return e(t)}function Pe(){}var Ae=!1;function Te(e,t,n){if(Ae)return e(t,n);Ae=!0;try{return Ce(e,t,n)}finally{Ae=!1,(null!==Ne||null!==ke)&&(Pe(),Ee())}}function Le(e,t){var n=e.stateNode;if(null===n)return null;var r=wa(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Fe=!1;if(d)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Fe=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(de){Fe=!1}function Ie(e,t,n,r,a,s,i,l,o){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(d){this.onError(d)}}var Oe=!1,Me=null,ze=!1,De=null,qe={onError:function(e){Oe=!0,Me=e}};function Ue(e,t,n,r,a,s,i,l,o){Oe=!1,Me=null,Ie.apply(qe,arguments)}function He(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function Ve(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function Ke(e){if(He(e)!==e)throw Error(s(188))}function Be(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=He(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var a=n.return;if(null===a)break;var i=a.alternate;if(null===i){if(null!==(r=a.return)){n=r;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return Ke(a),e;if(i===r)return Ke(a),t;i=i.sibling}throw Error(s(188))}if(n.return!==r.return)n=a,r=i;else{for(var l=!1,o=a.child;o;){if(o===n){l=!0,n=a,r=i;break}if(o===r){l=!0,r=a,n=i;break}o=o.sibling}if(!l){for(o=i.child;o;){if(o===n){l=!0,n=i,r=a;break}if(o===r){l=!0,r=i,n=a;break}o=o.sibling}if(!l)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?We(e):null}function We(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=We(e);if(null!==t)return t;e=e.sibling}return null}var Ge=a.unstable_scheduleCallback,$e=a.unstable_cancelCallback,Qe=a.unstable_shouldYield,Ye=a.unstable_requestPaint,Xe=a.unstable_now,Je=a.unstable_getCurrentPriorityLevel,Ze=a.unstable_ImmediatePriority,et=a.unstable_UserBlockingPriority,tt=a.unstable_NormalPriority,nt=a.unstable_LowPriority,rt=a.unstable_IdlePriority,at=null,st=null;var it=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(lt(e)/ot|0)|0},lt=Math.log,ot=Math.LN2;var ct=64,dt=4194304;function ut(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function mt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,a=e.suspendedLanes,s=e.pingedLanes,i=268435455&n;if(0!==i){var l=i&~a;0!==l?r=ut(l):0!==(s&=i)&&(r=ut(s))}else 0!==(i=n&~a)?r=ut(i):0!==s&&(r=ut(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&a)&&((a=r&-r)>=(s=t&-t)||16===a&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)a=1<<(n=31-it(t)),r|=e[n],t&=~a;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function ht(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function gt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function xt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-it(t)]=n}function yt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-it(n),a=1<<r;a&t|e[r]&t&&(e[r]|=t),n&=~a}}var vt=0;function bt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var wt,jt,Nt,kt,_t,St=!1,Et=[],Ct=null,Pt=null,At=null,Tt=new Map,Lt=new Map,Ft=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function It(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Pt=null;break;case"mouseover":case"mouseout":At=null;break;case"pointerover":case"pointerout":Tt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Lt.delete(t.pointerId)}}function Ot(e,t,n,r,a,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[a]},null!==t&&(null!==(t=va(t))&&jt(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==a&&-1===t.indexOf(a)&&t.push(a),e)}function Mt(e){var t=ya(e.target);if(null!==t){var n=He(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=Ve(n)))return e.blockedOn=t,void _t(e.priority,function(){Nt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function zt(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Qt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=va(n))&&jt(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);be=r,n.target.dispatchEvent(r),be=null,t.shift()}return!0}function Dt(e,t,n){zt(e)&&n.delete(t)}function qt(){St=!1,null!==Ct&&zt(Ct)&&(Ct=null),null!==Pt&&zt(Pt)&&(Pt=null),null!==At&&zt(At)&&(At=null),Tt.forEach(Dt),Lt.forEach(Dt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,St||(St=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,qt)))}function Ht(e){function t(t){return Ut(t,e)}if(0<Et.length){Ut(Et[0],e);for(var n=1;n<Et.length;n++){var r=Et[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==Pt&&Ut(Pt,e),null!==At&&Ut(At,e),Tt.forEach(t),Lt.forEach(t),n=0;n<Ft.length;n++)(r=Ft[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Ft.length&&null===(n=Ft[0]).blockedOn;)Mt(n),null===n.blockedOn&&Ft.shift()}var Vt=b.ReactCurrentBatchConfig,Kt=!0;function Bt(e,t,n,r){var a=vt,s=Vt.transition;Vt.transition=null;try{vt=1,Gt(e,t,n,r)}finally{vt=a,Vt.transition=s}}function Wt(e,t,n,r){var a=vt,s=Vt.transition;Vt.transition=null;try{vt=4,Gt(e,t,n,r)}finally{vt=a,Vt.transition=s}}function Gt(e,t,n,r){if(Kt){var a=Qt(e,t,n,r);if(null===a)Kr(e,t,r,$t,n),It(e,r);else if(function(e,t,n,r,a){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,r,a),!0;case"dragenter":return Pt=Ot(Pt,e,t,n,r,a),!0;case"mouseover":return At=Ot(At,e,t,n,r,a),!0;case"pointerover":var s=a.pointerId;return Tt.set(s,Ot(Tt.get(s)||null,e,t,n,r,a)),!0;case"gotpointercapture":return s=a.pointerId,Lt.set(s,Ot(Lt.get(s)||null,e,t,n,r,a)),!0}return!1}(a,e,t,n,r))r.stopPropagation();else if(It(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==a;){var s=va(a);if(null!==s&&wt(s),null===(s=Qt(e,t,n,r))&&Kr(e,t,r,$t,n),s===a)break;a=s}null!==a&&r.stopPropagation()}else Kr(e,t,r,null,n)}}var $t=null;function Qt(e,t,n,r){if($t=null,null!==(e=ya(e=we(r))))if(null===(t=He(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=Ve(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return $t=e,null}function Yt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Ze:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var Xt=null,Jt=null,Zt=null;function en(){if(Zt)return Zt;var e,t,n=Jt,r=n.length,a="value"in Xt?Xt.value:Xt.textContent,s=a.length;for(e=0;e<r&&n[e]===a[e];e++);var i=r-e;for(t=1;t<=i&&n[r-t]===a[s-t];t++);return Zt=a.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function an(e){function t(t,n,r,a,s){for(var i in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(i)&&(t=e[i],this[i]=t?t(a):a[i]);return this.isDefaultPrevented=(null!=a.defaultPrevented?a.defaultPrevented:!1===a.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return M(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var sn,ln,on,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dn=an(cn),un=M({},cn,{view:0,detail:0}),mn=an(un),fn=M({},un,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_n,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==on&&(on&&"mousemove"===e.type?(sn=e.screenX-on.screenX,ln=e.screenY-on.screenY):ln=sn=0,on=e),sn)},movementY:function(e){return"movementY"in e?e.movementY:ln}}),pn=an(fn),hn=an(M({},fn,{dataTransfer:0})),gn=an(M({},un,{relatedTarget:0})),xn=an(M({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),yn=M({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),vn=an(yn),bn=an(M({},cn,{data:0})),wn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},jn={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Nn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function kn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=Nn[e])&&!!t[e]}function _n(){return kn}var Sn=M({},un,{key:function(e){if(e.key){var t=wn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?jn[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_n,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),En=an(Sn),Cn=an(M({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),Pn=an(M({},un,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_n})),An=an(M({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Tn=M({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Ln=an(Tn),Fn=[9,13,27,32],Rn=d&&"CompositionEvent"in window,In=null;d&&"documentMode"in document&&(In=document.documentMode);var On=d&&"TextEvent"in window&&!In,Mn=d&&(!Rn||In&&8<In&&11>=In),zn=String.fromCharCode(32),Dn=!1;function qn(e,t){switch(e){case"keyup":return-1!==Fn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Hn=!1;var Vn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Kn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Vn[e.type]:"textarea"===t}function Bn(e,t,n,r){Se(r),0<(t=Wr(t,"onChange")).length&&(n=new dn("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Wn=null,Gn=null;function $n(e){zr(e,0)}function Qn(e){if(G(ba(e)))return e}function Yn(e,t){if("change"===e)return t}var Xn=!1;if(d){var Jn;if(d){var Zn="oninput"in document;if(!Zn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Zn="function"===typeof er.oninput}Jn=Zn}else Jn=!1;Xn=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Wn&&(Wn.detachEvent("onpropertychange",nr),Gn=Wn=null)}function nr(e){if("value"===e.propertyName&&Qn(Gn)){var t=[];Bn(t,Gn,e,we(e)),Te($n,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Wn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ar(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Qn(Gn)}function sr(e,t){if("click"===e)return Qn(t)}function ir(e,t){if("input"===e||"change"===e)return Qn(t)}var lr="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function or(e,t){if(lr(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var a=n[r];if(!u.call(t,a)||!lr(e[a],t[a]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function dr(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function ur(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?ur(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function mr(){for(var e=window,t=$();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=$((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=mr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&ur(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var a=n.textContent.length,s=Math.min(r.start,a);r=void 0===r.end?s:Math.min(r.end,a),!e.extend&&s>r&&(a=r,r=s,s=a),a=dr(n,s);var i=dr(n,r);a&&i&&(1!==e.rangeCount||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==i.node||e.focusOffset!==i.offset)&&((t=t.createRange()).setStart(a.node,a.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(i.node,i.offset)):(t.setEnd(i.node,i.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var hr=d&&"documentMode"in document&&11>=document.documentMode,gr=null,xr=null,yr=null,vr=!1;function br(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;vr||null==gr||gr!==$(r)||("selectionStart"in(r=gr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},yr&&or(yr,r)||(yr=r,0<(r=Wr(xr,"onSelect")).length&&(t=new dn("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=gr)))}function wr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var jr={animationend:wr("Animation","AnimationEnd"),animationiteration:wr("Animation","AnimationIteration"),animationstart:wr("Animation","AnimationStart"),transitionend:wr("Transition","TransitionEnd")},Nr={},kr={};function _r(e){if(Nr[e])return Nr[e];if(!jr[e])return e;var t,n=jr[e];for(t in n)if(n.hasOwnProperty(t)&&t in kr)return Nr[e]=n[t];return e}d&&(kr=document.createElement("div").style,"AnimationEvent"in window||(delete jr.animationend.animation,delete jr.animationiteration.animation,delete jr.animationstart.animation),"TransitionEvent"in window||delete jr.transitionend.transition);var Sr=_r("animationend"),Er=_r("animationiteration"),Cr=_r("animationstart"),Pr=_r("transitionend"),Ar=new Map,Tr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(e,t){Ar.set(e,t),o(t,[e])}for(var Fr=0;Fr<Tr.length;Fr++){var Rr=Tr[Fr];Lr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Lr(Sr,"onAnimationEnd"),Lr(Er,"onAnimationIteration"),Lr(Cr,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Pr,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),o("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),o("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),o("onBeforeInput",["compositionend","keypress","textInput","paste"]),o("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),o("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ir="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ir));function Mr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,a,i,l,o,c){if(Ue.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var d=Me;Oe=!1,Me=null,ze||(ze=!0,De=d)}}(r,t,void 0,e),e.currentTarget=null}function zr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],a=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var i=r.length-1;0<=i;i--){var l=r[i],o=l.instance,c=l.currentTarget;if(l=l.listener,o!==s&&a.isPropagationStopped())break e;Mr(a,l,c),s=o}else for(i=0;i<r.length;i++){if(o=(l=r[i]).instance,c=l.currentTarget,l=l.listener,o!==s&&a.isPropagationStopped())break e;Mr(a,l,c),s=o}}}if(ze)throw e=De,ze=!1,De=null,e}function Dr(e,t){var n=t[ha];void 0===n&&(n=t[ha]=new Set);var r=e+"__bubble";n.has(r)||(Vr(t,e,2,!1),n.add(r))}function qr(e,t,n){var r=0;t&&(r|=4),Vr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Hr(e){if(!e[Ur]){e[Ur]=!0,i.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||qr(t,!1,e),qr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,qr("selectionchange",!1,t))}}function Vr(e,t,n,r){switch(Yt(t)){case 1:var a=Bt;break;case 4:a=Wt;break;default:a=Gt}n=a.bind(null,t,n,e),a=void 0,!Fe||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(a=!0),r?void 0!==a?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):void 0!==a?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Kr(e,t,n,r,a){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var i=r.tag;if(3===i||4===i){var l=r.stateNode.containerInfo;if(l===a||8===l.nodeType&&l.parentNode===a)break;if(4===i)for(i=r.return;null!==i;){var o=i.tag;if((3===o||4===o)&&((o=i.stateNode.containerInfo)===a||8===o.nodeType&&o.parentNode===a))return;i=i.return}for(;null!==l;){if(null===(i=ya(l)))return;if(5===(o=i.tag)||6===o){r=s=i;continue e}l=l.parentNode}}r=r.return}Te(function(){var r=s,a=we(n),i=[];e:{var l=Ar.get(e);if(void 0!==l){var o=dn,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":o=En;break;case"focusin":c="focus",o=gn;break;case"focusout":c="blur",o=gn;break;case"beforeblur":case"afterblur":o=gn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":o=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":o=hn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":o=Pn;break;case Sr:case Er:case Cr:o=xn;break;case Pr:o=An;break;case"scroll":o=mn;break;case"wheel":o=Ln;break;case"copy":case"cut":case"paste":o=vn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":o=Cn}var d=0!==(4&t),u=!d&&"scroll"===e,m=d?null!==l?l+"Capture":null:l;d=[];for(var f,p=r;null!==p;){var h=(f=p).stateNode;if(5===f.tag&&null!==h&&(f=h,null!==m&&(null!=(h=Le(p,m))&&d.push(Br(p,h,f)))),u)break;p=p.return}0<d.length&&(l=new o(l,c,null,n,a),i.push({event:l,listeners:d}))}}if(0===(7&t)){if(o="mouseout"===e||"pointerout"===e,(!(l="mouseover"===e||"pointerover"===e)||n===be||!(c=n.relatedTarget||n.fromElement)||!ya(c)&&!c[pa])&&(o||l)&&(l=a.window===a?a:(l=a.ownerDocument)?l.defaultView||l.parentWindow:window,o?(o=r,null!==(c=(c=n.relatedTarget||n.toElement)?ya(c):null)&&(c!==(u=He(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(o=null,c=r),o!==c)){if(d=pn,h="onMouseLeave",m="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(d=Cn,h="onPointerLeave",m="onPointerEnter",p="pointer"),u=null==o?l:ba(o),f=null==c?l:ba(c),(l=new d(h,p+"leave",o,n,a)).target=u,l.relatedTarget=f,h=null,ya(a)===r&&((d=new d(m,p+"enter",c,n,a)).target=f,d.relatedTarget=u,h=d),u=h,o&&c)e:{for(m=c,p=0,f=d=o;f;f=Gr(f))p++;for(f=0,h=m;h;h=Gr(h))f++;for(;0<p-f;)d=Gr(d),p--;for(;0<f-p;)m=Gr(m),f--;for(;p--;){if(d===m||null!==m&&d===m.alternate)break e;d=Gr(d),m=Gr(m)}d=null}else d=null;null!==o&&$r(i,l,o,d,!1),null!==c&&null!==u&&$r(i,u,c,d,!0)}if("select"===(o=(l=r?ba(r):window).nodeName&&l.nodeName.toLowerCase())||"input"===o&&"file"===l.type)var g=Yn;else if(Kn(l))if(Xn)g=ir;else{g=ar;var x=rr}else(o=l.nodeName)&&"input"===o.toLowerCase()&&("checkbox"===l.type||"radio"===l.type)&&(g=sr);switch(g&&(g=g(e,r))?Bn(i,g,n,a):(x&&x(e,l,r),"focusout"===e&&(x=l._wrapperState)&&x.controlled&&"number"===l.type&&ee(l,"number",l.value)),x=r?ba(r):window,e){case"focusin":(Kn(x)||"true"===x.contentEditable)&&(gr=x,xr=r,yr=null);break;case"focusout":yr=xr=gr=null;break;case"mousedown":vr=!0;break;case"contextmenu":case"mouseup":case"dragend":vr=!1,br(i,n,a);break;case"selectionchange":if(hr)break;case"keydown":case"keyup":br(i,n,a)}var y;if(Rn)e:{switch(e){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else Hn?qn(e,n)&&(v="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(v="onCompositionStart");v&&(Mn&&"ko"!==n.locale&&(Hn||"onCompositionStart"!==v?"onCompositionEnd"===v&&Hn&&(y=en()):(Jt="value"in(Xt=a)?Xt.value:Xt.textContent,Hn=!0)),0<(x=Wr(r,v)).length&&(v=new bn(v,e,null,n,a),i.push({event:v,listeners:x}),y?v.data=y:null!==(y=Un(n))&&(v.data=y))),(y=On?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Dn=!0,zn);case"textInput":return(e=t.data)===zn&&Dn?null:e;default:return null}}(e,n):function(e,t){if(Hn)return"compositionend"===e||!Rn&&qn(e,t)?(e=en(),Zt=Jt=Xt=null,Hn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Mn&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Wr(r,"onBeforeInput")).length&&(a=new bn("onBeforeInput","beforeinput",null,n,a),i.push({event:a,listeners:r}),a.data=y))}zr(i,t)})}function Br(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Wr(e,t){for(var n=t+"Capture",r=[];null!==e;){var a=e,s=a.stateNode;5===a.tag&&null!==s&&(a=s,null!=(s=Le(e,n))&&r.unshift(Br(e,s,a)),null!=(s=Le(e,t))&&r.push(Br(e,s,a))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function $r(e,t,n,r,a){for(var s=t._reactName,i=[];null!==n&&n!==r;){var l=n,o=l.alternate,c=l.stateNode;if(null!==o&&o===r)break;5===l.tag&&null!==c&&(l=c,a?null!=(o=Le(n,s))&&i.unshift(Br(n,o,l)):a||null!=(o=Le(n,s))&&i.push(Br(n,o,l))),n=n.return}0!==i.length&&e.push({event:t,listeners:i})}var Qr=/\r\n?/g,Yr=/\u0000|\uFFFD/g;function Xr(e){return("string"===typeof e?e:""+e).replace(Qr,"\n").replace(Yr,"")}function Jr(e,t,n){if(t=Xr(t),Xr(e)!==t&&n)throw Error(s(425))}function Zr(){}var ea=null,ta=null;function na(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ra="function"===typeof setTimeout?setTimeout:void 0,aa="function"===typeof clearTimeout?clearTimeout:void 0,sa="function"===typeof Promise?Promise:void 0,ia="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof sa?function(e){return sa.resolve(null).then(e).catch(la)}:ra;function la(e){setTimeout(function(){throw e})}function oa(e,t){var n=t,r=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&8===a.nodeType)if("/$"===(n=a.data)){if(0===r)return e.removeChild(a),void Ht(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=a}while(n);Ht(t)}function ca(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function da(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var ua=Math.random().toString(36).slice(2),ma="__reactFiber$"+ua,fa="__reactProps$"+ua,pa="__reactContainer$"+ua,ha="__reactEvents$"+ua,ga="__reactListeners$"+ua,xa="__reactHandles$"+ua;function ya(e){var t=e[ma];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pa]||n[ma]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=da(e);null!==e;){if(n=e[ma])return n;e=da(e)}return t}n=(e=n).parentNode}return null}function va(e){return!(e=e[ma]||e[pa])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function ba(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function wa(e){return e[fa]||null}var ja=[],Na=-1;function ka(e){return{current:e}}function _a(e){0>Na||(e.current=ja[Na],ja[Na]=null,Na--)}function Sa(e,t){Na++,ja[Na]=e.current,e.current=t}var Ea={},Ca=ka(Ea),Pa=ka(!1),Aa=Ea;function Ta(e,t){var n=e.type.contextTypes;if(!n)return Ea;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var a,s={};for(a in n)s[a]=t[a];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function La(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Fa(){_a(Pa),_a(Ca)}function Ra(e,t,n){if(Ca.current!==Ea)throw Error(s(168));Sa(Ca,t),Sa(Pa,n)}function Ia(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var a in r=r.getChildContext())if(!(a in t))throw Error(s(108,V(e)||"Unknown",a));return M({},n,r)}function Oa(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ea,Aa=Ca.current,Sa(Ca,e),Sa(Pa,Pa.current),!0}function Ma(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=Ia(e,t,Aa),r.__reactInternalMemoizedMergedChildContext=e,_a(Pa),_a(Ca),Sa(Ca,e)):_a(Pa),Sa(Pa,n)}var za=null,Da=!1,qa=!1;function Ua(e){null===za?za=[e]:za.push(e)}function Ha(){if(!qa&&null!==za){qa=!0;var e=0,t=vt;try{var n=za;for(vt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}za=null,Da=!1}catch(a){throw null!==za&&(za=za.slice(e+1)),Ge(Ze,Ha),a}finally{vt=t,qa=!1}}return null}var Va=b.ReactCurrentBatchConfig;function Ka(e,t){if(e&&e.defaultProps){for(var n in t=M({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}var Ba=ka(null),Wa=null,Ga=null,$a=null;function Qa(){$a=Ga=Wa=null}function Ya(e){var t=Ba.current;_a(Ba),e._currentValue=t}function Xa(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Ja(e,t){Wa=e,$a=Ga=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(wl=!0),e.firstContext=null)}function Za(e){var t=e._currentValue;if($a!==e)if(e={context:e,memoizedValue:t,next:null},null===Ga){if(null===Wa)throw Error(s(308));Ga=e,Wa.dependencies={lanes:0,firstContext:e}}else Ga=Ga.next=e;return t}var es=null,ts=!1;function ns(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rs(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function as(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function ss(e,t){var n=e.updateQueue;null!==n&&(n=n.shared,nc(e)?(null===(e=n.interleaved)?(t.next=t,null===es?es=[n]:es.push(n)):(t.next=e.next,e.next=t),n.interleaved=t):(null===(e=n.pending)?t.next=t:(t.next=e.next,e.next=t),n.pending=t))}function is(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}function ls(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var a=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var i={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?a=s=i:s=s.next=i,n=n.next}while(null!==n);null===s?a=s=t:s=s.next=t}else a=s=t;return n={baseState:r.baseState,firstBaseUpdate:a,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function os(e,t,n,r){var a=e.updateQueue;ts=!1;var s=a.firstBaseUpdate,i=a.lastBaseUpdate,l=a.shared.pending;if(null!==l){a.shared.pending=null;var o=l,c=o.next;o.next=null,null===i?s=c:i.next=c,i=o;var d=e.alternate;null!==d&&((l=(d=d.updateQueue).lastBaseUpdate)!==i&&(null===l?d.firstBaseUpdate=c:l.next=c,d.lastBaseUpdate=o))}if(null!==s){var u=a.baseState;for(i=0,d=c=o=null,l=s;;){var m=l.lane,f=l.eventTime;if((r&m)===m){null!==d&&(d=d.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=e,h=l;switch(m=t,f=n,h.tag){case 1:if("function"===typeof(p=h.payload)){u=p.call(f,u,m);break e}u=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(m="function"===typeof(p=h.payload)?p.call(f,u,m):p)||void 0===m)break e;u=M({},u,m);break e;case 2:ts=!0}}null!==l.callback&&0!==l.lane&&(e.flags|=64,null===(m=a.effects)?a.effects=[l]:m.push(l))}else f={eventTime:f,lane:m,tag:l.tag,payload:l.payload,callback:l.callback,next:null},null===d?(c=d=f,o=u):d=d.next=f,i|=m;if(null===(l=l.next)){if(null===(l=a.shared.pending))break;l=(m=l).next,m.next=null,a.lastBaseUpdate=m,a.shared.pending=null}}if(null===d&&(o=u),a.baseState=o,a.firstBaseUpdate=c,a.lastBaseUpdate=d,null!==(t=a.shared.interleaved)){a=t;do{i|=a.lane,a=a.next}while(a!==t)}else null===s&&(a.shared.lanes=0);Ro|=i,e.lanes=i,e.memoizedState=u}}function cs(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],a=r.callback;if(null!==a){if(r.callback=null,r=n,"function"!==typeof a)throw Error(s(191,a));a.call(r)}}}var ds=(new r.Component).refs;function us(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:M({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ms={isMounted:function(e){return!!(e=e._reactInternals)&&He(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=Jo(),a=Zo(e),s=as(r,a);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),ss(e,s),null!==(t=ec(e,a,r))&&is(t,e,a)},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=Jo(),a=Zo(e),s=as(r,a);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),ss(e,s),null!==(t=ec(e,a,r))&&is(t,e,a)},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=Jo(),r=Zo(e),a=as(n,r);a.tag=2,void 0!==t&&null!==t&&(a.callback=t),ss(e,a),null!==(t=ec(e,r,n))&&is(t,e,r)}};function fs(e,t,n,r,a,s,i){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,i):!t.prototype||!t.prototype.isPureReactComponent||(!or(n,r)||!or(a,s))}function ps(e,t,n){var r=!1,a=Ea,s=t.contextType;return"object"===typeof s&&null!==s?s=Za(s):(a=La(t)?Aa:Ca.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Ta(e,a):Ea),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ms,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=s),t}function hs(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ms.enqueueReplaceState(t,t.state,null)}function gs(e,t,n,r){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs=ds,ns(e);var s=t.contextType;"object"===typeof s&&null!==s?a.context=Za(s):(s=La(t)?Aa:Ca.current,a.context=Ta(e,s)),a.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(us(e,t,s,n),a.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof a.getSnapshotBeforeUpdate||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||(t=a.state,"function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount(),t!==a.state&&ms.enqueueReplaceState(a,a.state,null),os(e,n,a,r),a.state=e.memoizedState),"function"===typeof a.componentDidMount&&(e.flags|=4194308)}var xs=[],ys=0,vs=null,bs=0,ws=[],js=0,Ns=null,ks=1,_s="";function Ss(e,t){xs[ys++]=bs,xs[ys++]=vs,vs=e,bs=t}function Es(e,t,n){ws[js++]=ks,ws[js++]=_s,ws[js++]=Ns,Ns=e;var r=ks;e=_s;var a=32-it(r)-1;r&=~(1<<a),n+=1;var s=32-it(t)+a;if(30<s){var i=a-a%5;s=(r&(1<<i)-1).toString(32),r>>=i,a-=i,ks=1<<32-it(t)+a|n<<a|r,_s=s+e}else ks=1<<s|n<<a|r,_s=e}function Cs(e){null!==e.return&&(Ss(e,1),Es(e,1,0))}function Ps(e){for(;e===vs;)vs=xs[--ys],xs[ys]=null,bs=xs[--ys],xs[ys]=null;for(;e===Ns;)Ns=ws[--js],ws[js]=null,_s=ws[--js],ws[js]=null,ks=ws[--js],ws[js]=null}var As=null,Ts=null,Ls=!1,Fs=null;function Rs(e,t){var n=Tc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function Is(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,As=e,Ts=ca(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,As=e,Ts=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Ns?{id:ks,overflow:_s}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Tc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,As=e,Ts=null,!0);default:return!1}}function Os(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function Ms(e){if(Ls){var t=Ts;if(t){var n=t;if(!Is(e,t)){if(Os(e))throw Error(s(418));t=ca(n.nextSibling);var r=As;t&&Is(e,t)?Rs(r,n):(e.flags=-4097&e.flags|2,Ls=!1,As=e)}}else{if(Os(e))throw Error(s(418));e.flags=-4097&e.flags|2,Ls=!1,As=e}}}function zs(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;As=e}function Ds(e){if(e!==As)return!1;if(!Ls)return zs(e),Ls=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!na(e.type,e.memoizedProps)),t&&(t=Ts)){if(Os(e)){for(e=Ts;e;)e=ca(e.nextSibling);throw Error(s(418))}for(;t;)Rs(e,t),t=ca(t.nextSibling)}if(zs(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){Ts=ca(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}Ts=null}}else Ts=As?ca(e.stateNode.nextSibling):null;return!0}function qs(){Ts=As=null,Ls=!1}function Us(e){null===Fs?Fs=[e]:Fs.push(e)}function Hs(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var a=r,i=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===i?t.ref:(t=function(e){var t=a.refs;t===ds&&(t=a.refs={}),null===e?delete t[i]:t[i]=e},t._stringRef=i,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function Vs(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Ks(e){return(0,e._init)(e._payload)}function Bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function a(e,t){return(e=Fc(e,t)).index=0,e.sibling=null,e}function i(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function l(t){return e&&null===t.alternate&&(t.flags|=2),t}function o(e,t,n,r){return null===t||6!==t.tag?((t=Mc(n,e.mode,r)).return=e,t):((t=a(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===N?u(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===L&&Ks(s)===t.type)?((r=a(t,n.props)).ref=Hs(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=Hs(e,t,n),r.return=e,r)}function d(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=zc(n,e.mode,r)).return=e,t):((t=a(t,n.children||[])).return=e,t)}function u(e,t,n,r,s){return null===t||7!==t.tag?((t=Ic(n,e.mode,r,s)).return=e,t):((t=a(t,n)).return=e,t)}function m(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Mc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case w:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=Hs(e,null,t),n.return=e,n;case j:return(t=zc(t,e.mode,n)).return=e,t;case L:return m(e,(0,t._init)(t._payload),n)}if(te(t)||I(t))return(t=Ic(t,e.mode,n,null)).return=e,t;Vs(e,t)}return null}function f(e,t,n,r){var a=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==a?null:o(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case w:return n.key===a?c(e,t,n,r):null;case j:return n.key===a?d(e,t,n,r):null;case L:return f(e,t,(a=n._init)(n._payload),r)}if(te(n)||I(n))return null!==a?null:u(e,t,n,r,null);Vs(e,n)}return null}function p(e,t,n,r,a){if("string"===typeof r&&""!==r||"number"===typeof r)return o(t,e=e.get(n)||null,""+r,a);if("object"===typeof r&&null!==r){switch(r.$$typeof){case w:return c(t,e=e.get(null===r.key?n:r.key)||null,r,a);case j:return d(t,e=e.get(null===r.key?n:r.key)||null,r,a);case L:return p(e,t,n,(0,r._init)(r._payload),a)}if(te(r)||I(r))return u(t,e=e.get(n)||null,r,a,null);Vs(t,r)}return null}function h(a,s,l,o){for(var c=null,d=null,u=s,h=s=0,g=null;null!==u&&h<l.length;h++){u.index>h?(g=u,u=null):g=u.sibling;var x=f(a,u,l[h],o);if(null===x){null===u&&(u=g);break}e&&u&&null===x.alternate&&t(a,u),s=i(x,s,h),null===d?c=x:d.sibling=x,d=x,u=g}if(h===l.length)return n(a,u),Ls&&Ss(a,h),c;if(null===u){for(;h<l.length;h++)null!==(u=m(a,l[h],o))&&(s=i(u,s,h),null===d?c=u:d.sibling=u,d=u);return Ls&&Ss(a,h),c}for(u=r(a,u);h<l.length;h++)null!==(g=p(u,a,h,l[h],o))&&(e&&null!==g.alternate&&u.delete(null===g.key?h:g.key),s=i(g,s,h),null===d?c=g:d.sibling=g,d=g);return e&&u.forEach(function(e){return t(a,e)}),Ls&&Ss(a,h),c}function g(a,l,o,c){var d=I(o);if("function"!==typeof d)throw Error(s(150));if(null==(o=d.call(o)))throw Error(s(151));for(var u=d=null,h=l,g=l=0,x=null,y=o.next();null!==h&&!y.done;g++,y=o.next()){h.index>g?(x=h,h=null):x=h.sibling;var v=f(a,h,y.value,c);if(null===v){null===h&&(h=x);break}e&&h&&null===v.alternate&&t(a,h),l=i(v,l,g),null===u?d=v:u.sibling=v,u=v,h=x}if(y.done)return n(a,h),Ls&&Ss(a,g),d;if(null===h){for(;!y.done;g++,y=o.next())null!==(y=m(a,y.value,c))&&(l=i(y,l,g),null===u?d=y:u.sibling=y,u=y);return Ls&&Ss(a,g),d}for(h=r(a,h);!y.done;g++,y=o.next())null!==(y=p(h,a,g,y.value,c))&&(e&&null!==y.alternate&&h.delete(null===y.key?g:y.key),l=i(y,l,g),null===u?d=y:u.sibling=y,u=y);return e&&h.forEach(function(e){return t(a,e)}),Ls&&Ss(a,g),d}return function e(r,s,i,o){if("object"===typeof i&&null!==i&&i.type===N&&null===i.key&&(i=i.props.children),"object"===typeof i&&null!==i){switch(i.$$typeof){case w:e:{for(var c=i.key,d=s;null!==d;){if(d.key===c){if((c=i.type)===N){if(7===d.tag){n(r,d.sibling),(s=a(d,i.props.children)).return=r,r=s;break e}}else if(d.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===L&&Ks(c)===d.type){n(r,d.sibling),(s=a(d,i.props)).ref=Hs(r,d,i),s.return=r,r=s;break e}n(r,d);break}t(r,d),d=d.sibling}i.type===N?((s=Ic(i.props.children,r.mode,o,i.key)).return=r,r=s):((o=Rc(i.type,i.key,i.props,null,r.mode,o)).ref=Hs(r,s,i),o.return=r,r=o)}return l(r);case j:e:{for(d=i.key;null!==s;){if(s.key===d){if(4===s.tag&&s.stateNode.containerInfo===i.containerInfo&&s.stateNode.implementation===i.implementation){n(r,s.sibling),(s=a(s,i.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=zc(i,r.mode,o)).return=r,r=s}return l(r);case L:return e(r,s,(d=i._init)(i._payload),o)}if(te(i))return h(r,s,i,o);if(I(i))return g(r,s,i,o);Vs(r,i)}return"string"===typeof i&&""!==i||"number"===typeof i?(i=""+i,null!==s&&6===s.tag?(n(r,s.sibling),(s=a(s,i)).return=r,r=s):(n(r,s),(s=Mc(i,r.mode,o)).return=r,r=s),l(r)):n(r,s)}}var Ws=Bs(!0),Gs=Bs(!1),$s={},Qs=ka($s),Ys=ka($s),Xs=ka($s);function Js(e){if(e===$s)throw Error(s(174));return e}function Zs(e,t){switch(Sa(Xs,t),Sa(Ys,e),Sa(Qs,$s),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:oe(null,"");break;default:t=oe(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}_a(Qs),Sa(Qs,t)}function ei(){_a(Qs),_a(Ys),_a(Xs)}function ti(e){Js(Xs.current);var t=Js(Qs.current),n=oe(t,e.type);t!==n&&(Sa(Ys,e),Sa(Qs,n))}function ni(e){Ys.current===e&&(_a(Qs),_a(Ys))}var ri=ka(0);function ai(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var si=[];function ii(){for(var e=0;e<si.length;e++)si[e]._workInProgressVersionPrimary=null;si.length=0}var li=b.ReactCurrentDispatcher,oi=b.ReactCurrentBatchConfig,ci=0,di=null,ui=null,mi=null,fi=!1,pi=!1,hi=0,gi=0;function xi(){throw Error(s(321))}function yi(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!lr(e[n],t[n]))return!1;return!0}function vi(e,t,n,r,a,i){if(ci=i,di=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,li.current=null===e||null===e.memoizedState?nl:rl,e=n(r,a),pi){i=0;do{if(pi=!1,hi=0,25<=i)throw Error(s(301));i+=1,mi=ui=null,t.updateQueue=null,li.current=al,e=n(r,a)}while(pi)}if(li.current=tl,t=null!==ui&&null!==ui.next,ci=0,mi=ui=di=null,fi=!1,t)throw Error(s(300));return e}function bi(){var e=0!==hi;return hi=0,e}function wi(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===mi?di.memoizedState=mi=e:mi=mi.next=e,mi}function ji(){if(null===ui){var e=di.alternate;e=null!==e?e.memoizedState:null}else e=ui.next;var t=null===mi?di.memoizedState:mi.next;if(null!==t)mi=t,ui=e;else{if(null===e)throw Error(s(310));e={memoizedState:(ui=e).memoizedState,baseState:ui.baseState,baseQueue:ui.baseQueue,queue:ui.queue,next:null},null===mi?di.memoizedState=mi=e:mi=mi.next=e}return mi}function Ni(e,t){return"function"===typeof t?t(e):t}function ki(e){var t=ji(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=ui,a=r.baseQueue,i=n.pending;if(null!==i){if(null!==a){var l=a.next;a.next=i.next,i.next=l}r.baseQueue=a=i,n.pending=null}if(null!==a){i=a.next,r=r.baseState;var o=l=null,c=null,d=i;do{var u=d.lane;if((ci&u)===u)null!==c&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),r=d.hasEagerState?d.eagerState:e(r,d.action);else{var m={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};null===c?(o=c=m,l=r):c=c.next=m,di.lanes|=u,Ro|=u}d=d.next}while(null!==d&&d!==i);null===c?l=r:c.next=o,lr(r,t.memoizedState)||(wl=!0),t.memoizedState=r,t.baseState=l,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){a=e;do{i=a.lane,di.lanes|=i,Ro|=i,a=a.next}while(a!==e)}else null===a&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function _i(e){var t=ji(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,a=n.pending,i=t.memoizedState;if(null!==a){n.pending=null;var l=a=a.next;do{i=e(i,l.action),l=l.next}while(l!==a);lr(i,t.memoizedState)||(wl=!0),t.memoizedState=i,null===t.baseQueue&&(t.baseState=i),n.lastRenderedState=i}return[i,r]}function Si(){}function Ei(e,t){var n=di,r=ji(),a=t(),i=!lr(r.memoizedState,a);if(i&&(r.memoizedState=a,wl=!0),r=r.queue,zi(Ai.bind(null,n,r,e),[e]),r.getSnapshot!==t||i||null!==mi&&1&mi.memoizedState.tag){if(n.flags|=2048,Fi(9,Pi.bind(null,n,r,a,t),void 0,null),null===Eo)throw Error(s(349));0!==(30&ci)||Ci(n,t,a)}return a}function Ci(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=di.updateQueue)?(t={lastEffect:null,stores:null},di.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Pi(e,t,n,r){t.value=n,t.getSnapshot=r,Ti(t)&&ec(e,1,-1)}function Ai(e,t,n){return n(function(){Ti(t)&&ec(e,1,-1)})}function Ti(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!lr(e,n)}catch(r){return!0}}function Li(e){var t=wi();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ni,lastRenderedState:e},t.queue=e,e=e.dispatch=Yi.bind(null,di,e),[t.memoizedState,e]}function Fi(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=di.updateQueue)?(t={lastEffect:null,stores:null},di.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Ri(){return ji().memoizedState}function Ii(e,t,n,r){var a=wi();di.flags|=e,a.memoizedState=Fi(1|t,n,void 0,void 0===r?null:r)}function Oi(e,t,n,r){var a=ji();r=void 0===r?null:r;var s=void 0;if(null!==ui){var i=ui.memoizedState;if(s=i.destroy,null!==r&&yi(r,i.deps))return void(a.memoizedState=Fi(t,n,s,r))}di.flags|=e,a.memoizedState=Fi(1|t,n,s,r)}function Mi(e,t){return Ii(8390656,8,e,t)}function zi(e,t){return Oi(2048,8,e,t)}function Di(e,t){return Oi(4,2,e,t)}function qi(e,t){return Oi(4,4,e,t)}function Ui(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Hi(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Oi(4,4,Ui.bind(null,t,e),n)}function Vi(){}function Ki(e,t){var n=ji();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yi(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Bi(e,t){var n=ji();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&yi(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wi(e,t,n){return 0===(21&ci)?(e.baseState&&(e.baseState=!1,wl=!0),e.memoizedState=n):(lr(n,t)||(n=ht(),di.lanes|=n,Ro|=n,e.baseState=!0),t)}function Gi(e,t){var n=vt;vt=0!==n&&4>n?n:4,e(!0);var r=oi.transition;oi.transition={};try{e(!1),t()}finally{vt=n,oi.transition=r}}function $i(){return ji().memoizedState}function Qi(e,t,n){var r=Zo(e);n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Xi(e)?Ji(t,n):(Zi(e,t,n),null!==(e=ec(e,r,n=Jo()))&&el(e,t,r))}function Yi(e,t,n){var r=Zo(e),a={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Xi(e))Ji(t,a);else{Zi(e,t,a);var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var i=t.lastRenderedState,l=s(i,n);if(a.hasEagerState=!0,a.eagerState=l,lr(l,i))return}catch(o){}null!==(e=ec(e,r,n=Jo()))&&el(e,t,r)}}function Xi(e){var t=e.alternate;return e===di||null!==t&&t===di}function Ji(e,t){pi=fi=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Zi(e,t,n){nc(e)?(null===(e=t.interleaved)?(n.next=n,null===es?es=[t]:es.push(t)):(n.next=e.next,e.next=n),t.interleaved=n):(null===(e=t.pending)?n.next=n:(n.next=e.next,e.next=n),t.pending=n)}function el(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,yt(e,n)}}var tl={readContext:Za,useCallback:xi,useContext:xi,useEffect:xi,useImperativeHandle:xi,useInsertionEffect:xi,useLayoutEffect:xi,useMemo:xi,useReducer:xi,useRef:xi,useState:xi,useDebugValue:xi,useDeferredValue:xi,useTransition:xi,useMutableSource:xi,useSyncExternalStore:xi,useId:xi,unstable_isNewReconciler:!1},nl={readContext:Za,useCallback:function(e,t){return wi().memoizedState=[e,void 0===t?null:t],e},useContext:Za,useEffect:Mi,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ii(4194308,4,Ui.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Ii(4194308,4,e,t)},useInsertionEffect:function(e,t){return Ii(4,2,e,t)},useMemo:function(e,t){var n=wi();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=wi();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Qi.bind(null,di,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},wi().memoizedState=e},useState:Li,useDebugValue:Vi,useDeferredValue:function(e){return wi().memoizedState=e},useTransition:function(){var e=Li(!1),t=e[0];return e=Gi.bind(null,e[1]),wi().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=di,a=wi();if(Ls){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Eo)throw Error(s(349));0!==(30&ci)||Ci(r,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Mi(Ai.bind(null,r,i,e),[e]),r.flags|=2048,Fi(9,Pi.bind(null,r,i,n,t),void 0,null),n},useId:function(){var e=wi(),t=Eo.identifierPrefix;if(Ls){var n=_s;t=":"+t+"R"+(n=(ks&~(1<<32-it(ks)-1)).toString(32)+n),0<(n=hi++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=gi++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rl={readContext:Za,useCallback:Ki,useContext:Za,useEffect:zi,useImperativeHandle:Hi,useInsertionEffect:Di,useLayoutEffect:qi,useMemo:Bi,useReducer:ki,useRef:Ri,useState:function(){return ki(Ni)},useDebugValue:Vi,useDeferredValue:function(e){return Wi(ji(),ui.memoizedState,e)},useTransition:function(){return[ki(Ni)[0],ji().memoizedState]},useMutableSource:Si,useSyncExternalStore:Ei,useId:$i,unstable_isNewReconciler:!1},al={readContext:Za,useCallback:Ki,useContext:Za,useEffect:zi,useImperativeHandle:Hi,useInsertionEffect:Di,useLayoutEffect:qi,useMemo:Bi,useReducer:_i,useRef:Ri,useState:function(){return _i(Ni)},useDebugValue:Vi,useDeferredValue:function(e){var t=ji();return null===ui?t.memoizedState=e:Wi(t,ui.memoizedState,e)},useTransition:function(){return[_i(Ni)[0],ji().memoizedState]},useMutableSource:Si,useSyncExternalStore:Ei,useId:$i,unstable_isNewReconciler:!1};function sl(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var a=n}catch(s){a="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:a}}function il(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ll,ol,cl,dl,ul="function"===typeof WeakMap?WeakMap:Map;function ml(e,t,n){(n=as(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){Ho||(Ho=!0,Vo=r),il(0,t)},n}function fl(e,t,n){(n=as(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var a=t.value;n.payload=function(){return r(a)},n.callback=function(){il(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){il(0,t),"function"!==typeof r&&(null===Ko?Ko=new Set([this]):Ko.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function pl(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ul;var a=new Set;r.set(t,a)}else void 0===(a=r.get(t))&&(a=new Set,r.set(t,a));a.has(n)||(a.add(n),e=_c.bind(null,e,t,n),t.then(e,e))}function hl(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function gl(e,t,n,r,a){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=as(-1,1)).tag=2,ss(n,t))),n.lanes|=1),e):(e.flags|=65536,e.lanes=a,e)}function xl(e,t){if(!Ls)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yl(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=14680064&a.subtreeFlags,r|=14680064&a.flags,a.return=e,a=a.sibling;else for(a=e.child;null!==a;)n|=a.lanes|a.childLanes,r|=a.subtreeFlags,r|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function vl(e,t,n){var r=t.pendingProps;switch(Ps(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yl(t),null;case 1:case 17:return La(t.type)&&Fa(),yl(t),null;case 3:return r=t.stateNode,ei(),_a(Pa),_a(Ca),ii(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(Ds(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==Fs&&(ic(Fs),Fs=null))),ol(e,t),yl(t),null;case 5:ni(t);var a=Js(Xs.current);if(n=t.type,null!==e&&null!=t.stateNode)cl(e,t,n,r,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return yl(t),null}if(e=Js(Qs.current),Ds(t)){r=t.stateNode,n=t.type;var i=t.memoizedProps;switch(r[ma]=t,r[fa]=i,e=0!==(1&t.mode),n){case"dialog":Dr("cancel",r),Dr("close",r);break;case"iframe":case"object":case"embed":Dr("load",r);break;case"video":case"audio":for(a=0;a<Ir.length;a++)Dr(Ir[a],r);break;case"source":Dr("error",r);break;case"img":case"image":case"link":Dr("error",r),Dr("load",r);break;case"details":Dr("toggle",r);break;case"input":Y(r,i),Dr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!i.multiple},Dr("invalid",r);break;case"textarea":ae(r,i),Dr("invalid",r)}for(var o in ye(n,i),a=null,i)if(i.hasOwnProperty(o)){var c=i[o];"children"===o?"string"===typeof c?r.textContent!==c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==i.suppressHydrationWarning&&Jr(r.textContent,c,e),a=["children",""+c]):l.hasOwnProperty(o)&&null!=c&&"onScroll"===o&&Dr("scroll",r)}switch(n){case"input":W(r),Z(r,i,!0);break;case"textarea":W(r),ie(r);break;case"select":case"option":break;default:"function"===typeof i.onClick&&(r.onclick=Zr)}r=a,t.updateQueue=r,null!==r&&(t.flags|=4)}else{o=9===a.nodeType?a:a.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=le(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=o.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=o.createElement(n,{is:r.is}):(e=o.createElement(n),"select"===n&&(o=e,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):e=o.createElementNS(e,n),e[ma]=t,e[fa]=r,ll(e,t,!1,!1),t.stateNode=e;e:{switch(o=ve(n,r),n){case"dialog":Dr("cancel",e),Dr("close",e),a=r;break;case"iframe":case"object":case"embed":Dr("load",e),a=r;break;case"video":case"audio":for(a=0;a<Ir.length;a++)Dr(Ir[a],e);a=r;break;case"source":Dr("error",e),a=r;break;case"img":case"image":case"link":Dr("error",e),Dr("load",e),a=r;break;case"details":Dr("toggle",e),a=r;break;case"input":Y(e,r),a=Q(e,r),Dr("invalid",e);break;case"option":default:a=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},a=M({},r,{value:void 0}),Dr("invalid",e);break;case"textarea":ae(e,r),a=re(e,r),Dr("invalid",e)}for(i in ye(n,a),c=a)if(c.hasOwnProperty(i)){var d=c[i];"style"===i?ge(e,d):"dangerouslySetInnerHTML"===i?null!=(d=d?d.__html:void 0)&&ue(e,d):"children"===i?"string"===typeof d?("textarea"!==n||""!==d)&&me(e,d):"number"===typeof d&&me(e,""+d):"suppressContentEditableWarning"!==i&&"suppressHydrationWarning"!==i&&"autoFocus"!==i&&(l.hasOwnProperty(i)?null!=d&&"onScroll"===i&&Dr("scroll",e):null!=d&&v(e,i,d,o))}switch(n){case"input":W(e),Z(e,r,!1);break;case"textarea":W(e),ie(e);break;case"option":null!=r.value&&e.setAttribute("value",""+K(r.value));break;case"select":e.multiple=!!r.multiple,null!=(i=r.value)?ne(e,!!r.multiple,i,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof a.onClick&&(e.onclick=Zr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return yl(t),null;case 6:if(e&&null!=t.stateNode)dl(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Js(Xs.current),Js(Qs.current),Ds(t)){if(r=t.stateNode,n=t.memoizedProps,r[ma]=t,(i=r.nodeValue!==n)&&null!==(e=As))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}i&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[ma]=t,t.stateNode=r}return yl(t),null;case 13:if(_a(ri),r=t.memoizedState,Ls&&null!==Ts&&0!==(1&t.mode)&&0===(128&t.flags)){for(r=Ts;r;)r=ca(r.nextSibling);return qs(),t.flags|=98560,t}if(null!==r&&null!==r.dehydrated){if(r=Ds(t),null===e){if(!r)throw Error(s(318));if(!(r=null!==(r=t.memoizedState)?r.dehydrated:null))throw Error(s(317));r[ma]=t}else qs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;return yl(t),null}return null!==Fs&&(ic(Fs),Fs=null),0!==(128&t.flags)?(t.lanes=n,t):(r=null!==r,n=!1,null===e?Ds(t):n=null!==e.memoizedState,r!==n&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&ri.current)?0===Lo&&(Lo=3):hc())),null!==t.updateQueue&&(t.flags|=4),yl(t),null);case 4:return ei(),ol(e,t),null===e&&Hr(t.stateNode.containerInfo),yl(t),null;case 10:return Ya(t.type._context),yl(t),null;case 19:if(_a(ri),null===(i=t.memoizedState))return yl(t),null;if(r=0!==(128&t.flags),null===(o=i.rendering))if(r)xl(i,!1);else{if(0!==Lo||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(o=ai(e))){for(t.flags|=128,xl(i,!1),null!==(r=o.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(i=n).flags&=14680066,null===(o=i.alternate)?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Sa(ri,1&ri.current|2),t.child}e=e.sibling}null!==i.tail&&Xe()>qo&&(t.flags|=128,r=!0,xl(i,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ai(o))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),xl(i,!0),null===i.tail&&"hidden"===i.tailMode&&!o.alternate&&!Ls)return yl(t),null}else 2*Xe()-i.renderingStartTime>qo&&1073741824!==n&&(t.flags|=128,r=!0,xl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(null!==(n=i.last)?n.sibling=o:t.child=o,i.last=o)}return null!==i.tail?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=Xe(),t.sibling=null,n=ri.current,Sa(ri,r?1&n|2:1&n),t):(yl(t),null);case 22:case 23:return uc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Ao)&&(yl(t),6&t.subtreeFlags&&(t.flags|=8192)):yl(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}ll=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},ol=function(){},cl=function(e,t,n,r){var a=e.memoizedProps;if(a!==r){e=t.stateNode,Js(Qs.current);var s,i=null;switch(n){case"input":a=Q(e,a),r=Q(e,r),i=[];break;case"select":a=M({},a,{value:void 0}),r=M({},r,{value:void 0}),i=[];break;case"textarea":a=re(e,a),r=re(e,r),i=[];break;default:"function"!==typeof a.onClick&&"function"===typeof r.onClick&&(e.onclick=Zr)}for(d in ye(n,r),n=null,a)if(!r.hasOwnProperty(d)&&a.hasOwnProperty(d)&&null!=a[d])if("style"===d){var o=a[d];for(s in o)o.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==d&&"children"!==d&&"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&"autoFocus"!==d&&(l.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in r){var c=r[d];if(o=null!=a?a[d]:void 0,r.hasOwnProperty(d)&&c!==o&&(null!=c||null!=o))if("style"===d)if(o){for(s in o)!o.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&o[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else"dangerouslySetInnerHTML"===d?(c=c?c.__html:void 0,o=o?o.__html:void 0,null!=c&&o!==c&&(i=i||[]).push(d,c)):"children"===d?"string"!==typeof c&&"number"!==typeof c||(i=i||[]).push(d,""+c):"suppressContentEditableWarning"!==d&&"suppressHydrationWarning"!==d&&(l.hasOwnProperty(d)?(null!=c&&"onScroll"===d&&Dr("scroll",e),i||o===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}},dl=function(e,t,n,r){n!==r&&(t.flags|=4)};var bl=b.ReactCurrentOwner,wl=!1;function jl(e,t,n,r){t.child=null===e?Gs(t,null,n,r):Ws(t,e.child,n,r)}function Nl(e,t,n,r,a){n=n.render;var s=t.ref;return Ja(t,a),r=vi(e,t,n,r,s,a),n=bi(),null===e||wl?(Ls&&n&&Cs(t),t.flags|=1,jl(e,t,r,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Kl(e,t,a))}function kl(e,t,n,r,a){if(null===e){var s=n.type;return"function"!==typeof s||Lc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,a)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,_l(e,t,s,r,a))}if(s=e.child,0===(e.lanes&a)){var i=s.memoizedProps;if((n=null!==(n=n.compare)?n:or)(i,r)&&e.ref===t.ref)return Kl(e,t,a)}return t.flags|=1,(e=Fc(s,r)).ref=t.ref,e.return=t,t.child=e}function _l(e,t,n,r,a){if(null!==e){var s=e.memoizedProps;if(or(s,r)&&e.ref===t.ref){if(wl=!1,t.pendingProps=r=s,0===(e.lanes&a))return t.lanes=e.lanes,Kl(e,t,a);0!==(131072&e.flags)&&(wl=!0)}}return Cl(e,t,n,r,a)}function Sl(e,t,n){var r=t.pendingProps,a=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sa(To,Ao),Ao|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Sa(To,Ao),Ao|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Sa(To,Ao),Ao|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Sa(To,Ao),Ao|=r;return jl(e,t,a,n),t.child}function El(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Cl(e,t,n,r,a){var s=La(n)?Aa:Ca.current;return s=Ta(t,s),Ja(t,a),n=vi(e,t,n,r,s,a),r=bi(),null===e||wl?(Ls&&r&&Cs(t),t.flags|=1,jl(e,t,n,a),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,Kl(e,t,a))}function Pl(e,t,n,r,a){if(La(n)){var s=!0;Oa(t)}else s=!1;if(Ja(t,a),null===t.stateNode)null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),ps(t,n,r),gs(t,n,r,a),r=!0;else if(null===e){var i=t.stateNode,l=t.memoizedProps;i.props=l;var o=i.context,c=n.contextType;"object"===typeof c&&null!==c?c=Za(c):c=Ta(t,c=La(n)?Aa:Ca.current);var d=n.getDerivedStateFromProps,u="function"===typeof d||"function"===typeof i.getSnapshotBeforeUpdate;u||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==r||o!==c)&&hs(t,i,r,c),ts=!1;var m=t.memoizedState;i.state=m,os(t,r,i,a),o=t.memoizedState,l!==r||m!==o||Pa.current||ts?("function"===typeof d&&(us(t,n,d,r),o=t.memoizedState),(l=ts||fs(t,n,l,r,m,o,c))?(u||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||("function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount()),"function"===typeof i.componentDidMount&&(t.flags|=4194308)):("function"===typeof i.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=o),i.props=r,i.state=o,i.context=c,r=l):("function"===typeof i.componentDidMount&&(t.flags|=4194308),r=!1)}else{i=t.stateNode,rs(e,t),l=t.memoizedProps,c=t.type===t.elementType?l:Ka(t.type,l),i.props=c,u=t.pendingProps,m=i.context,"object"===typeof(o=n.contextType)&&null!==o?o=Za(o):o=Ta(t,o=La(n)?Aa:Ca.current);var f=n.getDerivedStateFromProps;(d="function"===typeof f||"function"===typeof i.getSnapshotBeforeUpdate)||"function"!==typeof i.UNSAFE_componentWillReceiveProps&&"function"!==typeof i.componentWillReceiveProps||(l!==u||m!==o)&&hs(t,i,r,o),ts=!1,m=t.memoizedState,i.state=m,os(t,r,i,a);var p=t.memoizedState;l!==u||m!==p||Pa.current||ts?("function"===typeof f&&(us(t,n,f,r),p=t.memoizedState),(c=ts||fs(t,n,c,r,m,p,o)||!1)?(d||"function"!==typeof i.UNSAFE_componentWillUpdate&&"function"!==typeof i.componentWillUpdate||("function"===typeof i.componentWillUpdate&&i.componentWillUpdate(r,p,o),"function"===typeof i.UNSAFE_componentWillUpdate&&i.UNSAFE_componentWillUpdate(r,p,o)),"function"===typeof i.componentDidUpdate&&(t.flags|=4),"function"===typeof i.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),i.props=r,i.state=p,i.context=o,r=c):("function"!==typeof i.componentDidUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=4),"function"!==typeof i.getSnapshotBeforeUpdate||l===e.memoizedProps&&m===e.memoizedState||(t.flags|=1024),r=!1)}return Al(e,t,n,r,s,a)}function Al(e,t,n,r,a,s){El(e,t);var i=0!==(128&t.flags);if(!r&&!i)return a&&Ma(t,n,!1),Kl(e,t,s);r=t.stateNode,bl.current=t;var l=i&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&i?(t.child=Ws(t,e.child,null,s),t.child=Ws(t,null,l,s)):jl(e,t,l,s),t.memoizedState=r.state,a&&Ma(t,n,!0),t.child}function Tl(e){var t=e.stateNode;t.pendingContext?Ra(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ra(0,t.context,!1),Zs(e,t.containerInfo)}function Ll(e,t,n,r,a){return qs(),Us(a),t.flags|=256,jl(e,t,n,r),t.child}var Fl={dehydrated:null,treeContext:null,retryLane:0};function Rl(e){return{baseLanes:e,cachePool:null,transitions:null}}function Il(e,t){return{baseLanes:e.baseLanes|t,cachePool:null,transitions:e.transitions}}function Ol(e,t,n){var r,a=t.pendingProps,i=ri.current,l=!1,o=0!==(128&t.flags);if((r=o)||(r=(null===e||null!==e.memoizedState)&&0!==(2&i)),r?(l=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(i|=1),Sa(ri,1&i),null===e)return Ms(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(i=a.children,e=a.fallback,l?(a=t.mode,l=t.child,i={mode:"hidden",children:i},0===(1&a)&&null!==l?(l.childLanes=0,l.pendingProps=i):l=Oc(i,a,0,null),e=Ic(e,a,n,null),l.return=t,e.return=t,l.sibling=e,t.child=l,t.child.memoizedState=Rl(n),t.memoizedState=Fl,e):Ml(t,i));if(null!==(i=e.memoizedState)){if(null!==(r=i.dehydrated)){if(o)return 256&t.flags?(t.flags&=-257,ql(e,t,n,Error(s(422)))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(l=a.fallback,i=t.mode,a=Oc({mode:"visible",children:a.children},i,0,null),(l=Ic(l,i,n,null)).flags|=2,a.return=t,l.return=t,a.sibling=l,t.child=a,0!==(1&t.mode)&&Ws(t,e.child,null,n),t.child.memoizedState=Rl(n),t.memoizedState=Fl,l);if(0===(1&t.mode))t=ql(e,t,n,null);else if("$!"===r.data)t=ql(e,t,n,Error(s(419)));else if(a=0!==(n&e.childLanes),wl||a){if(null!==(a=Eo)){switch(n&-n){case 4:l=2;break;case 16:l=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:l=32;break;case 536870912:l=268435456;break;default:l=0}0!==(a=0!==(l&(a.suspendedLanes|n))?0:l)&&a!==i.retryLane&&(i.retryLane=a,ec(e,a,-1))}hc(),t=ql(e,t,n,Error(s(421)))}else"$?"===r.data?(t.flags|=128,t.child=e.child,t=Ec.bind(null,e),r._reactRetry=t,t=null):(n=i.treeContext,Ts=ca(r.nextSibling),As=t,Ls=!0,Fs=null,null!==n&&(ws[js++]=ks,ws[js++]=_s,ws[js++]=Ns,ks=n.id,_s=n.overflow,Ns=t),(t=Ml(t,t.pendingProps.children)).flags|=4096);return t}return l?(a=Dl(e,t,a.children,a.fallback,n),l=t.child,i=e.child.memoizedState,l.memoizedState=null===i?Rl(n):Il(i,n),l.childLanes=e.childLanes&~n,t.memoizedState=Fl,a):(n=zl(e,t,a.children,n),t.memoizedState=null,n)}return l?(a=Dl(e,t,a.children,a.fallback,n),l=t.child,i=e.child.memoizedState,l.memoizedState=null===i?Rl(n):Il(i,n),l.childLanes=e.childLanes&~n,t.memoizedState=Fl,a):(n=zl(e,t,a.children,n),t.memoizedState=null,n)}function Ml(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function zl(e,t,n,r){var a=e.child;return e=a.sibling,n=Fc(a,{mode:"visible",children:n}),0===(1&t.mode)&&(n.lanes=r),n.return=t,n.sibling=null,null!==e&&(null===(r=t.deletions)?(t.deletions=[e],t.flags|=16):r.push(e)),t.child=n}function Dl(e,t,n,r,a){var s=t.mode,i=(e=e.child).sibling,l={mode:"hidden",children:n};return 0===(1&s)&&t.child!==e?((n=t.child).childLanes=0,n.pendingProps=l,t.deletions=null):(n=Fc(e,l)).subtreeFlags=14680064&e.subtreeFlags,null!==i?r=Fc(i,r):(r=Ic(r,s,a,null)).flags|=2,r.return=t,n.return=t,n.sibling=r,t.child=n,r}function ql(e,t,n,r){return null!==r&&Us(r),Ws(t,e.child,null,n),(e=Ml(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function Ul(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Xa(e.return,t,n)}function Hl(e,t,n,r,a){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:a}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=a)}function Vl(e,t,n){var r=t.pendingProps,a=r.revealOrder,s=r.tail;if(jl(e,t,r.children,n),0!==(2&(r=ri.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&Ul(e,n,t);else if(19===e.tag)Ul(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Sa(ri,r),0===(1&t.mode))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;null!==n;)null!==(e=n.alternate)&&null===ai(e)&&(a=n),n=n.sibling;null===(n=a)?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),Hl(t,!1,a,n,s);break;case"backwards":for(n=null,a=t.child,t.child=null;null!==a;){if(null!==(e=a.alternate)&&null===ai(e)){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}Hl(t,!0,n,null,s);break;case"together":Hl(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Kl(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ro|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Fc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Fc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Bl(e,t){switch(Ps(t),t.tag){case 1:return La(t.type)&&Fa(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return ei(),_a(Pa),_a(Ca),ii(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return ni(t),null;case 13:if(_a(ri),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));qs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return _a(ri),null;case 4:return ei(),null;case 10:return Ya(t.type._context),null;case 22:case 23:return uc(),null;default:return null}}var Wl=!1,Gl=!1,$l="function"===typeof WeakSet?WeakSet:Set,Ql=null;function Yl(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){kc(e,t,r)}else n.current=null}function Xl(e,t,n){try{n()}catch(r){kc(e,t,r)}}var Jl=!1;function Zl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var a=r=r.next;do{if((a.tag&e)===e){var s=a.destroy;a.destroy=void 0,void 0!==s&&Xl(t,n,s)}a=a.next}while(a!==r)}}function eo(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function to(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function no(e){var t=e.alternate;null!==t&&(e.alternate=null,no(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[ma],delete t[fa],delete t[ha],delete t[ga],delete t[xa])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function ro(e){return 5===e.tag||3===e.tag||4===e.tag}function ao(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||ro(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function so(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Zr));else if(4!==r&&null!==(e=e.child))for(so(e,t,n),e=e.sibling;null!==e;)so(e,t,n),e=e.sibling}function io(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(io(e,t,n),e=e.sibling;null!==e;)io(e,t,n),e=e.sibling}var lo=null,oo=!1;function co(e,t,n){for(n=n.child;null!==n;)uo(e,t,n),n=n.sibling}function uo(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(at,n)}catch(l){}switch(n.tag){case 5:Gl||Yl(n,t);case 6:var r=lo,a=oo;lo=null,co(e,t,n),oo=a,null!==(lo=r)&&(oo?(e=lo,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):lo.removeChild(n.stateNode));break;case 18:null!==lo&&(oo?(e=lo,n=n.stateNode,8===e.nodeType?oa(e.parentNode,n):1===e.nodeType&&oa(e,n),Ht(e)):oa(lo,n.stateNode));break;case 4:r=lo,a=oo,lo=n.stateNode.containerInfo,oo=!0,co(e,t,n),lo=r,oo=a;break;case 0:case 11:case 14:case 15:if(!Gl&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){a=r=r.next;do{var s=a,i=s.destroy;s=s.tag,void 0!==i&&(0!==(2&s)||0!==(4&s))&&Xl(n,t,i),a=a.next}while(a!==r)}co(e,t,n);break;case 1:if(!Gl&&(Yl(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){kc(n,t,l)}co(e,t,n);break;case 21:co(e,t,n);break;case 22:1&n.mode?(Gl=(r=Gl)||null!==n.memoizedState,co(e,t,n),Gl=r):co(e,t,n);break;default:co(e,t,n)}}function mo(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $l),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function fo(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var a=n[r];try{var i=e,l=t,o=l;e:for(;null!==o;){switch(o.tag){case 5:lo=o.stateNode,oo=!1;break e;case 3:case 4:lo=o.stateNode.containerInfo,oo=!0;break e}o=o.return}if(null===lo)throw Error(s(160));uo(i,l,a),lo=null,oo=!1;var c=a.alternate;null!==c&&(c.return=null),a.return=null}catch(d){kc(a,t,d)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)po(t,e),t=t.sibling}function po(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(fo(t,e),ho(e),4&r){try{Zl(3,e,e.return),eo(3,e)}catch(h){kc(e,e.return,h)}try{Zl(5,e,e.return)}catch(h){kc(e,e.return,h)}}break;case 1:fo(t,e),ho(e),512&r&&null!==n&&Yl(n,n.return);break;case 5:if(fo(t,e),ho(e),512&r&&null!==n&&Yl(n,n.return),32&e.flags){var a=e.stateNode;try{me(a,"")}catch(h){kc(e,e.return,h)}}if(4&r&&null!=(a=e.stateNode)){var i=e.memoizedProps,l=null!==n?n.memoizedProps:i,o=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===o&&"radio"===i.type&&null!=i.name&&X(a,i),ve(o,l);var d=ve(o,i);for(l=0;l<c.length;l+=2){var u=c[l],m=c[l+1];"style"===u?ge(a,m):"dangerouslySetInnerHTML"===u?ue(a,m):"children"===u?me(a,m):v(a,u,m,d)}switch(o){case"input":J(a,i);break;case"textarea":se(a,i);break;case"select":var f=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var p=i.value;null!=p?ne(a,!!i.multiple,p,!1):f!==!!i.multiple&&(null!=i.defaultValue?ne(a,!!i.multiple,i.defaultValue,!0):ne(a,!!i.multiple,i.multiple?[]:"",!1))}a[fa]=i}catch(h){kc(e,e.return,h)}}break;case 6:if(fo(t,e),ho(e),4&r){if(null===e.stateNode)throw Error(s(162));d=e.stateNode,u=e.memoizedProps;try{d.nodeValue=u}catch(h){kc(e,e.return,h)}}break;case 3:if(fo(t,e),ho(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Ht(t.containerInfo)}catch(h){kc(e,e.return,h)}break;case 4:default:fo(t,e),ho(e);break;case 13:fo(t,e),ho(e),8192&(d=e.child).flags&&null!==d.memoizedState&&(null===d.alternate||null===d.alternate.memoizedState)&&(Do=Xe()),4&r&&mo(e);break;case 22:if(d=null!==n&&null!==n.memoizedState,1&e.mode?(Gl=(u=Gl)||d,fo(t,e),Gl=u):fo(t,e),ho(e),8192&r){u=null!==e.memoizedState;e:for(m=null,f=e;;){if(5===f.tag){if(null===m){m=f;try{a=f.stateNode,u?"function"===typeof(i=a.style).setProperty?i.setProperty("display","none","important"):i.display="none":(o=f.stateNode,l=void 0!==(c=f.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,o.style.display=he("display",l))}catch(h){kc(e,e.return,h)}}}else if(6===f.tag){if(null===m)try{f.stateNode.nodeValue=u?"":f.memoizedProps}catch(h){kc(e,e.return,h)}}else if((22!==f.tag&&23!==f.tag||null===f.memoizedState||f===e)&&null!==f.child){f.child.return=f,f=f.child;continue}if(f===e)break e;for(;null===f.sibling;){if(null===f.return||f.return===e)break e;m===f&&(m=null),f=f.return}m===f&&(m=null),f.sibling.return=f.return,f=f.sibling}if(u&&!d&&0!==(1&e.mode))for(Ql=e,e=e.child;null!==e;){for(d=Ql=e;null!==Ql;){switch(m=(u=Ql).child,u.tag){case 0:case 11:case 14:case 15:Zl(4,u,u.return);break;case 1:if(Yl(u,u.return),"function"===typeof(i=u.stateNode).componentWillUnmount){f=u,p=u.return;try{a=f,i.props=a.memoizedProps,i.state=a.memoizedState,i.componentWillUnmount()}catch(h){kc(f,p,h)}}break;case 5:Yl(u,u.return);break;case 22:if(null!==u.memoizedState){vo(d);continue}}null!==m?(m.return=u,Ql=m):vo(d)}e=e.sibling}}break;case 19:fo(t,e),ho(e),4&r&&mo(e);case 21:}}function ho(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(ro(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var a=r.stateNode;32&r.flags&&(me(a,""),r.flags&=-33),io(e,ao(e),a);break;case 3:case 4:var i=r.stateNode.containerInfo;so(e,ao(e),i);break;default:throw Error(s(161))}}catch(l){kc(e,e.return,l)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function go(e,t,n){Ql=e,xo(e,t,n)}function xo(e,t,n){for(var r=0!==(1&e.mode);null!==Ql;){var a=Ql,s=a.child;if(22===a.tag&&r){var i=null!==a.memoizedState||Wl;if(!i){var l=a.alternate,o=null!==l&&null!==l.memoizedState||Gl;l=Wl;var c=Gl;if(Wl=i,(Gl=o)&&!c)for(Ql=a;null!==Ql;)o=(i=Ql).child,22===i.tag&&null!==i.memoizedState?bo(a):null!==o?(o.return=i,Ql=o):bo(a);for(;null!==s;)Ql=s,xo(s,t,n),s=s.sibling;Ql=a,Wl=l,Gl=c}yo(e)}else 0!==(8772&a.subtreeFlags)&&null!==s?(s.return=a,Ql=s):yo(e)}}function yo(e){for(;null!==Ql;){var t=Ql;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Gl||eo(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Gl)if(null===n)r.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:Ka(t.type,n.memoizedProps);r.componentDidUpdate(a,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;null!==i&&cs(t,i,r);break;case 3:var l=t.updateQueue;if(null!==l){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}cs(t,l,n)}break;case 5:var o=t.stateNode;if(null===n&&4&t.flags){n=o;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:break;case 13:if(null===t.memoizedState){var d=t.alternate;if(null!==d){var u=d.memoizedState;if(null!==u){var m=u.dehydrated;null!==m&&Ht(m)}}}break;default:throw Error(s(163))}Gl||512&t.flags&&to(t)}catch(f){kc(t,t.return,f)}}if(t===e){Ql=null;break}if(null!==(n=t.sibling)){n.return=t.return,Ql=n;break}Ql=t.return}}function vo(e){for(;null!==Ql;){var t=Ql;if(t===e){Ql=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Ql=n;break}Ql=t.return}}function bo(e){for(;null!==Ql;){var t=Ql;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{eo(4,t)}catch(o){kc(t,n,o)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var a=t.return;try{r.componentDidMount()}catch(o){kc(t,a,o)}}var s=t.return;try{to(t)}catch(o){kc(t,s,o)}break;case 5:var i=t.return;try{to(t)}catch(o){kc(t,i,o)}}}catch(o){kc(t,t.return,o)}if(t===e){Ql=null;break}var l=t.sibling;if(null!==l){l.return=t.return,Ql=l;break}Ql=t.return}}var wo,jo=Math.ceil,No=b.ReactCurrentDispatcher,ko=b.ReactCurrentOwner,_o=b.ReactCurrentBatchConfig,So=0,Eo=null,Co=null,Po=0,Ao=0,To=ka(0),Lo=0,Fo=null,Ro=0,Io=0,Oo=0,Mo=null,zo=null,Do=0,qo=1/0,Uo=null,Ho=!1,Vo=null,Ko=null,Bo=!1,Wo=null,Go=0,$o=0,Qo=null,Yo=-1,Xo=0;function Jo(){return 0!==(6&So)?Xe():-1!==Yo?Yo:Yo=Xe()}function Zo(e){return 0===(1&e.mode)?1:0!==(2&So)&&0!==Po?Po&-Po:null!==Va.transition?(0===Xo&&(Xo=ht()),Xo):0!==(e=vt)?e:e=void 0===(e=window.event)?16:Yt(e.type)}function ec(e,t,n){if(50<$o)throw $o=0,Qo=null,Error(s(185));var r=tc(e,t);return null===r?null:(xt(r,t,n),0!==(2&So)&&r===Eo||(r===Eo&&(0===(2&So)&&(Io|=t),4===Lo&&lc(r,Po)),rc(r,n),1===t&&0===So&&0===(1&e.mode)&&(qo=Xe()+500,Da&&Ha())),r)}function tc(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}function nc(e){return(null!==Eo||null!==es)&&0!==(1&e.mode)&&0===(2&So)}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,a=e.expirationTimes,s=e.pendingLanes;0<s;){var i=31-it(s),l=1<<i,o=a[i];-1===o?0!==(l&n)&&0===(l&r)||(a[i]=ft(l,t)):o<=t&&(e.expiredLanes|=l),s&=~l}}(e,t);var r=mt(e,e===Eo?Po:0);if(0===r)null!==n&&$e(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&$e(n),1===t)0===e.tag?function(e){Da=!0,Ua(e)}(oc.bind(null,e)):Ua(oc.bind(null,e)),ia(function(){0===So&&Ha()}),n=null;else{switch(bt(r)){case 1:n=Ze;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Pc(n,ac.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ac(e,t){if(Yo=-1,Xo=0,0!==(6&So))throw Error(s(327));var n=e.callbackNode;if(jc()&&e.callbackNode!==n)return null;var r=mt(e,e===Eo?Po:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=gc(e,r);else{t=r;var a=So;So|=2;var i=pc();for(Eo===e&&Po===t||(Uo=null,qo=Xe()+500,mc(e,t));;)try{yc();break}catch(o){fc(e,o)}Qa(),No.current=i,So=a,null!==Co?t=0:(Eo=null,Po=0,t=Lo)}if(0!==t){if(2===t&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t)throw n=Fo,mc(e,0),lc(e,r),rc(e,Xe()),n;if(6===t)lc(e,r);else{if(a=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var a=n[r],s=a.getSnapshot;a=a.value;try{if(!lr(s(),a))return!1}catch(l){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(a)&&(2===(t=gc(e,r))&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t))throw n=Fo,mc(e,0),lc(e,r),rc(e,Xe()),n;switch(e.finishedWork=a,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:wc(e,zo,Uo);break;case 3:if(lc(e,r),(130023424&r)===r&&10<(t=Do+500-Xe())){if(0!==mt(e,0))break;if(((a=e.suspendedLanes)&r)!==r){Jo(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=ra(wc.bind(null,e,zo,Uo),t);break}wc(e,zo,Uo);break;case 4:if(lc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,a=-1;0<r;){var l=31-it(r);i=1<<l,(l=t[l])>a&&(a=l),r&=~i}if(r=a,10<(r=(120>(r=Xe()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*jo(r/1960))-r)){e.timeoutHandle=ra(wc.bind(null,e,zo,Uo),r);break}wc(e,zo,Uo);break;default:throw Error(s(329))}}}return rc(e,Xe()),e.callbackNode===n?ac.bind(null,e):null}function sc(e,t){var n=Mo;return e.current.memoizedState.isDehydrated&&(mc(e,t).flags|=256),2!==(e=gc(e,t))&&(t=zo,zo=n,null!==t&&ic(t)),e}function ic(e){null===zo?zo=e:zo.push.apply(zo,e)}function lc(e,t){for(t&=~Oo,t&=~Io,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-it(t),r=1<<n;e[n]=-1,t&=~r}}function oc(e){if(0!==(6&So))throw Error(s(327));jc();var t=mt(e,0);if(0===(1&t))return rc(e,Xe()),null;var n=gc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=Fo,mc(e,0),lc(e,t),rc(e,Xe()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wc(e,zo,Uo),rc(e,Xe()),null}function cc(e,t){var n=So;So|=1;try{return e(t)}finally{0===(So=n)&&(qo=Xe()+500,Da&&Ha())}}function dc(e){null!==Wo&&0===Wo.tag&&0===(6&So)&&jc();var t=So;So|=1;var n=_o.transition,r=vt;try{if(_o.transition=null,vt=1,e)return e()}finally{vt=r,_o.transition=n,0===(6&(So=t))&&Ha()}}function uc(){Ao=To.current,_a(To)}function mc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,aa(n)),null!==Co)for(n=Co.return;null!==n;){var r=n;switch(Ps(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Fa();break;case 3:ei(),_a(Pa),_a(Ca),ii();break;case 5:ni(r);break;case 4:ei();break;case 13:case 19:_a(ri);break;case 10:Ya(r.type._context);break;case 22:case 23:uc()}n=n.return}if(Eo=e,Co=e=Fc(e.current,null),Po=Ao=t,Lo=0,Fo=null,Oo=Io=Ro=0,zo=Mo=null,null!==es){for(t=0;t<es.length;t++)if(null!==(r=(n=es[t]).interleaved)){n.interleaved=null;var a=r.next,s=n.pending;if(null!==s){var i=s.next;s.next=a,r.next=i}n.pending=r}es=null}return e}function fc(e,t){for(;;){var n=Co;try{if(Qa(),li.current=tl,fi){for(var r=di.memoizedState;null!==r;){var a=r.queue;null!==a&&(a.pending=null),r=r.next}fi=!1}if(ci=0,mi=ui=di=null,pi=!1,hi=0,ko.current=null,null===n||null===n.return){Lo=1,Fo=t,Co=null;break}e:{var i=e,l=n.return,o=n,c=t;if(t=Po,o.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var d=c,u=o,m=u.tag;if(0===(1&u.mode)&&(0===m||11===m||15===m)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=hl(l);if(null!==p){p.flags&=-257,gl(p,l,o,0,t),1&p.mode&&pl(i,d,t),c=d;var h=(t=p).updateQueue;if(null===h){var g=new Set;g.add(c),t.updateQueue=g}else h.add(c);break e}if(0===(1&t)){pl(i,d,t),hc();break e}c=Error(s(426))}else if(Ls&&1&o.mode){var x=hl(l);if(null!==x){0===(65536&x.flags)&&(x.flags|=256),gl(x,l,o,0,t),Us(c);break e}}i=c,4!==Lo&&(Lo=2),null===Mo?Mo=[i]:Mo.push(i),c=sl(c,o),o=l;do{switch(o.tag){case 3:o.flags|=65536,t&=-t,o.lanes|=t,ls(o,ml(0,c,t));break e;case 1:i=c;var y=o.type,v=o.stateNode;if(0===(128&o.flags)&&("function"===typeof y.getDerivedStateFromError||null!==v&&"function"===typeof v.componentDidCatch&&(null===Ko||!Ko.has(v)))){o.flags|=65536,t&=-t,o.lanes|=t,ls(o,fl(o,i,t));break e}}o=o.return}while(null!==o)}bc(n)}catch(b){t=b,Co===n&&null!==n&&(Co=n=n.return);continue}break}}function pc(){var e=No.current;return No.current=tl,null===e?tl:e}function hc(){0!==Lo&&3!==Lo&&2!==Lo||(Lo=4),null===Eo||0===(268435455&Ro)&&0===(268435455&Io)||lc(Eo,Po)}function gc(e,t){var n=So;So|=2;var r=pc();for(Eo===e&&Po===t||(Uo=null,mc(e,t));;)try{xc();break}catch(a){fc(e,a)}if(Qa(),So=n,No.current=r,null!==Co)throw Error(s(261));return Eo=null,Po=0,Lo}function xc(){for(;null!==Co;)vc(Co)}function yc(){for(;null!==Co&&!Qe();)vc(Co)}function vc(e){var t=wo(e.alternate,e,Ao);e.memoizedProps=e.pendingProps,null===t?bc(e):Co=t,ko.current=null}function bc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=vl(n,t,Ao)))return void(Co=n)}else{if(null!==(n=Bl(n,t)))return n.flags&=32767,void(Co=n);if(null===e)return Lo=6,void(Co=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Co=t);Co=t=e}while(null!==t);0===Lo&&(Lo=5)}function wc(e,t,n){var r=vt,a=_o.transition;try{_o.transition=null,vt=1,function(e,t,n,r){do{jc()}while(null!==Wo);if(0!==(6&So))throw Error(s(327));n=e.finishedWork;var a=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-it(n),s=1<<a;t[a]=0,r[a]=-1,e[a]=-1,n&=~s}}(e,i),e===Eo&&(Co=Eo=null,Po=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Bo||(Bo=!0,Pc(tt,function(){return jc(),null})),i=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||i){i=_o.transition,_o.transition=null;var l=vt;vt=1;var o=So;So|=4,ko.current=null,function(e,t){if(ea=Kt,fr(e=mr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var a=r.anchorOffset,i=r.focusNode;r=r.focusOffset;try{n.nodeType,i.nodeType}catch(j){n=null;break e}var l=0,o=-1,c=-1,d=0,u=0,m=e,f=null;t:for(;;){for(var p;m!==n||0!==a&&3!==m.nodeType||(o=l+a),m!==i||0!==r&&3!==m.nodeType||(c=l+r),3===m.nodeType&&(l+=m.nodeValue.length),null!==(p=m.firstChild);)f=m,m=p;for(;;){if(m===e)break t;if(f===n&&++d===a&&(o=l),f===i&&++u===r&&(c=l),null!==(p=m.nextSibling))break;f=(m=f).parentNode}m=p}n=-1===o||-1===c?null:{start:o,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ta={focusedElem:e,selectionRange:n},Kt=!1,Ql=t;null!==Ql;)if(e=(t=Ql).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Ql=e;else for(;null!==Ql;){t=Ql;try{var h=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==h){var g=h.memoizedProps,x=h.memoizedState,y=t.stateNode,v=y.getSnapshotBeforeUpdate(t.elementType===t.type?g:Ka(t.type,g),x);y.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=t.stateNode.containerInfo;if(1===b.nodeType)b.textContent="";else if(9===b.nodeType){var w=b.body;null!=w&&(w.textContent="")}break;default:throw Error(s(163))}}catch(j){kc(t,t.return,j)}if(null!==(e=t.sibling)){e.return=t.return,Ql=e;break}Ql=t.return}h=Jl,Jl=!1}(e,n),po(n,e),pr(ta),Kt=!!ea,ta=ea=null,e.current=n,go(n,e,a),Ye(),So=o,vt=l,_o.transition=i}else e.current=n;if(Bo&&(Bo=!1,Wo=e,Go=a),i=e.pendingLanes,0===i&&(Ko=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(at,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,Xe()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)r(t[n]);if(Ho)throw Ho=!1,e=Vo,Vo=null,e;0!==(1&Go)&&0!==e.tag&&jc(),i=e.pendingLanes,0!==(1&i)?e===Qo?$o++:($o=0,Qo=e):$o=0,Ha()}(e,t,n,r)}finally{_o.transition=a,vt=r}return null}function jc(){if(null!==Wo){var e=bt(Go),t=_o.transition,n=vt;try{if(_o.transition=null,vt=16>e?16:e,null===Wo)var r=!1;else{if(e=Wo,Wo=null,Go=0,0!==(6&So))throw Error(s(331));var a=So;for(So|=4,Ql=e.current;null!==Ql;){var i=Ql,l=i.child;if(0!==(16&Ql.flags)){var o=i.deletions;if(null!==o){for(var c=0;c<o.length;c++){var d=o[c];for(Ql=d;null!==Ql;){var u=Ql;switch(u.tag){case 0:case 11:case 15:Zl(8,u,i)}var m=u.child;if(null!==m)m.return=u,Ql=m;else for(;null!==Ql;){var f=(u=Ql).sibling,p=u.return;if(no(u),u===d){Ql=null;break}if(null!==f){f.return=p,Ql=f;break}Ql=p}}}var h=i.alternate;if(null!==h){var g=h.child;if(null!==g){h.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(null!==g)}}Ql=i}}if(0!==(2064&i.subtreeFlags)&&null!==l)l.return=i,Ql=l;else e:for(;null!==Ql;){if(0!==(2048&(i=Ql).flags))switch(i.tag){case 0:case 11:case 15:Zl(9,i,i.return)}var y=i.sibling;if(null!==y){y.return=i.return,Ql=y;break e}Ql=i.return}}var v=e.current;for(Ql=v;null!==Ql;){var b=(l=Ql).child;if(0!==(2064&l.subtreeFlags)&&null!==b)b.return=l,Ql=b;else e:for(l=v;null!==Ql;){if(0!==(2048&(o=Ql).flags))try{switch(o.tag){case 0:case 11:case 15:eo(9,o)}}catch(j){kc(o,o.return,j)}if(o===l){Ql=null;break e}var w=o.sibling;if(null!==w){w.return=o.return,Ql=w;break e}Ql=o.return}}if(So=a,Ha(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(at,e)}catch(j){}r=!0}return r}finally{vt=n,_o.transition=t}}return!1}function Nc(e,t,n){ss(e,t=ml(0,t=sl(n,t),1)),t=Jo(),null!==(e=tc(e,1))&&(xt(e,1,t),rc(e,t))}function kc(e,t,n){if(3===e.tag)Nc(e,e,n);else for(;null!==t;){if(3===t.tag){Nc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Ko||!Ko.has(r))){ss(t,e=fl(t,e=sl(n,e),1)),e=Jo(),null!==(t=tc(t,1))&&(xt(t,1,e),rc(t,e));break}}t=t.return}}function _c(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=Jo(),e.pingedLanes|=e.suspendedLanes&n,Eo===e&&(Po&n)===n&&(4===Lo||3===Lo&&(130023424&Po)===Po&&500>Xe()-Do?mc(e,0):Oo|=n),rc(e,t)}function Sc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=dt,0===(130023424&(dt<<=1))&&(dt=4194304)));var n=Jo();null!==(e=tc(e,t))&&(xt(e,t,n),rc(e,n))}function Ec(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Sc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,a=e.memoizedState;null!==a&&(n=a.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Sc(e,n)}function Pc(e,t){return Ge(e,t)}function Ac(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Tc(e,t,n,r){return new Ac(e,t,n,r)}function Lc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Fc(e,t){var n=e.alternate;return null===n?((n=Tc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,a,i){var l=2;if(r=e,"function"===typeof e)Lc(e)&&(l=1);else if("string"===typeof e)l=5;else e:switch(e){case N:return Ic(n.children,a,i,t);case k:l=8,a|=8;break;case _:return(e=Tc(12,n,t,2|a)).elementType=_,e.lanes=i,e;case P:return(e=Tc(13,n,t,a)).elementType=P,e.lanes=i,e;case A:return(e=Tc(19,n,t,a)).elementType=A,e.lanes=i,e;case F:return Oc(n,a,i,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case S:l=10;break e;case E:l=9;break e;case C:l=11;break e;case T:l=14;break e;case L:l=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Tc(l,n,t,a)).elementType=e,t.type=r,t.lanes=i,t}function Ic(e,t,n,r){return(e=Tc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Tc(22,e,r,t)).elementType=F,e.lanes=n,e.stateNode={},e}function Mc(e,t,n){return(e=Tc(6,e,null,t)).lanes=n,e}function zc(e,t,n){return(t=Tc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Dc(e,t,n,r,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=gt(0),this.expirationTimes=gt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=gt(0),this.identifierPrefix=r,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function qc(e,t,n,r,a,s,i,l,o){return e=new Dc(e,t,n,l,o),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Tc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},ns(s),e}function Uc(e){if(!e)return Ea;e:{if(He(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(La(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(La(n))return Ia(e,n,t)}return t}function Hc(e,t,n,r,a,s,i,l,o){return(e=qc(n,r,!0,e,0,s,0,l,o)).context=Uc(null),n=e.current,(s=as(r=Jo(),a=Zo(n))).callback=void 0!==t&&null!==t?t:null,ss(n,s),e.current.lanes=a,xt(e,a,r),rc(e,r),e}function Vc(e,t,n,r){var a=t.current,s=Jo(),i=Zo(a);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=as(s,i)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),ss(a,t),null!==(e=ec(a,i,s))&&is(e,a,i),i}function Kc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Bc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Wc(e,t){Bc(e,t),(e=e.alternate)&&Bc(e,t)}wo=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Pa.current)wl=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return wl=!1,function(e,t,n){switch(t.tag){case 3:Tl(t),qs();break;case 5:ti(t);break;case 1:La(t.type)&&Oa(t);break;case 4:Zs(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,a=t.memoizedProps.value;Sa(Ba,r._currentValue),r._currentValue=a;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Sa(ri,1&ri.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Ol(e,t,n):(Sa(ri,1&ri.current),null!==(e=Kl(e,t,n))?e.sibling:null);Sa(ri,1&ri.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Vl(e,t,n);t.flags|=128}if(null!==(a=t.memoizedState)&&(a.rendering=null,a.tail=null,a.lastEffect=null),Sa(ri,ri.current),r)break;return null;case 22:case 23:return t.lanes=0,Sl(e,t,n)}return Kl(e,t,n)}(e,t,n);wl=0!==(131072&e.flags)}else wl=!1,Ls&&0!==(1048576&t.flags)&&Es(t,bs,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps;var a=Ta(t,Ca.current);Ja(t,n),a=vi(null,t,r,e,a,n);var i=bi();return t.flags|=1,"object"===typeof a&&null!==a&&"function"===typeof a.render&&void 0===a.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,La(r)?(i=!0,Oa(t)):i=!1,t.memoizedState=null!==a.state&&void 0!==a.state?a.state:null,ns(t),a.updater=ms,t.stateNode=a,a._reactInternals=t,gs(t,r,e,n),t=Al(null,t,r,!0,i,n)):(t.tag=0,Ls&&i&&Cs(t),jl(null,t,a,n),t=t.child),t;case 16:r=t.elementType;e:{switch(null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),e=t.pendingProps,r=(a=r._init)(r._payload),t.type=r,a=t.tag=function(e){if("function"===typeof e)return Lc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===T)return 14}return 2}(r),e=Ka(r,e),a){case 0:t=Cl(null,t,r,e,n);break e;case 1:t=Pl(null,t,r,e,n);break e;case 11:t=Nl(null,t,r,e,n);break e;case 14:t=kl(null,t,r,Ka(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,a=t.pendingProps,Cl(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 1:return r=t.type,a=t.pendingProps,Pl(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 3:e:{if(Tl(t),null===e)throw Error(s(387));r=t.pendingProps,a=(i=t.memoizedState).element,rs(e,t),os(t,r,null,n);var l=t.memoizedState;if(r=l.element,i.isDehydrated){if(i={element:r,isDehydrated:!1,cache:l.cache,pendingSuspenseBoundaries:l.pendingSuspenseBoundaries,transitions:l.transitions},t.updateQueue.baseState=i,t.memoizedState=i,256&t.flags){t=Ll(e,t,r,n,a=Error(s(423)));break e}if(r!==a){t=Ll(e,t,r,n,a=Error(s(424)));break e}for(Ts=ca(t.stateNode.containerInfo.firstChild),As=t,Ls=!0,Fs=null,n=Gs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(qs(),r===a){t=Kl(e,t,n);break e}jl(e,t,r,n)}t=t.child}return t;case 5:return ti(t),null===e&&Ms(t),r=t.type,a=t.pendingProps,i=null!==e?e.memoizedProps:null,l=a.children,na(r,a)?l=null:null!==i&&na(r,i)&&(t.flags|=32),El(e,t),jl(e,t,l,n),t.child;case 6:return null===e&&Ms(t),null;case 13:return Ol(e,t,n);case 4:return Zs(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=Ws(t,null,r,n):jl(e,t,r,n),t.child;case 11:return r=t.type,a=t.pendingProps,Nl(e,t,r,a=t.elementType===r?a:Ka(r,a),n);case 7:return jl(e,t,t.pendingProps,n),t.child;case 8:case 12:return jl(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,a=t.pendingProps,i=t.memoizedProps,l=a.value,Sa(Ba,r._currentValue),r._currentValue=l,null!==i)if(lr(i.value,l)){if(i.children===a.children&&!Pa.current){t=Kl(e,t,n);break e}}else for(null!==(i=t.child)&&(i.return=t);null!==i;){var o=i.dependencies;if(null!==o){l=i.child;for(var c=o.firstContext;null!==c;){if(c.context===r){if(1===i.tag){(c=as(-1,n&-n)).tag=2;var d=i.updateQueue;if(null!==d){var u=(d=d.shared).pending;null===u?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=n,null!==(c=i.alternate)&&(c.lanes|=n),Xa(i.return,n,t),o.lanes|=n;break}c=c.next}}else if(10===i.tag)l=i.type===t.type?null:i.child;else if(18===i.tag){if(null===(l=i.return))throw Error(s(341));l.lanes|=n,null!==(o=l.alternate)&&(o.lanes|=n),Xa(l,n,t),l=i.sibling}else l=i.child;if(null!==l)l.return=i;else for(l=i;null!==l;){if(l===t){l=null;break}if(null!==(i=l.sibling)){i.return=l.return,l=i;break}l=l.return}i=l}jl(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,r=t.pendingProps.children,Ja(t,n),r=r(a=Za(a)),t.flags|=1,jl(e,t,r,n),t.child;case 14:return a=Ka(r=t.type,t.pendingProps),kl(e,t,r,a=Ka(r.type,a),n);case 15:return _l(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,a=t.pendingProps,a=t.elementType===r?a:Ka(r,a),null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2),t.tag=1,La(r)?(e=!0,Oa(t)):e=!1,Ja(t,n),ps(t,r,a),gs(t,r,a,n),Al(null,t,r,!0,e,n);case 19:return Vl(e,t,n);case 22:return Sl(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function $c(e){this._internalRoot=e}function Qc(e){this._internalRoot=e}function Yc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function Xc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Zc(e,t,n,r,a){var s=n._reactRootContainer;if(s){var i=s;if("function"===typeof a){var l=a;a=function(){var e=Kc(i);l.call(e)}}Vc(t,i,e,a)}else i=function(e,t,n,r,a){if(a){if("function"===typeof r){var s=r;r=function(){var e=Kc(i);s.call(e)}}var i=Hc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=i,e[pa]=i.current,Hr(8===e.nodeType?e.parentNode:e),dc(),i}for(;a=e.lastChild;)e.removeChild(a);if("function"===typeof r){var l=r;r=function(){var e=Kc(o);l.call(e)}}var o=qc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=o,e[pa]=o.current,Hr(8===e.nodeType?e.parentNode:e),dc(function(){Vc(t,o,n,r)}),o}(n,t,e,a,r);return Kc(i)}Qc.prototype.render=$c.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Vc(e,t,null,null)},Qc.prototype.unmount=$c.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;dc(function(){Vc(null,e,null,null)}),t[pa]=null}},Qc.prototype.unstable_scheduleHydration=function(e){if(e){var t=kt();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Ft.length&&0!==t&&t<Ft[n].priority;n++);Ft.splice(n,0,e),0===n&&Mt(e)}},wt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ut(t.pendingLanes);0!==n&&(yt(t,1|n),rc(t,Xe()),0===(6&So)&&(qo=Xe()+500,Ha()))}break;case 13:var r=Jo();dc(function(){return ec(e,1,r)}),Wc(e,1)}},jt=function(e){13===e.tag&&(ec(e,134217728,Jo()),Wc(e,134217728))},Nt=function(e){if(13===e.tag){var t=Jo(),n=Zo(e);ec(e,n,t),Wc(e,n)}},kt=function(){return vt},_t=function(e,t){var n=vt;try{return vt=e,t()}finally{vt=n}},je=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var a=wa(r);if(!a)throw Error(s(90));G(r),J(r,a)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Pe=dc;var ed={usingClientEntryPoint:!1,Events:[va,ba,wa,Se,Ee,cc]},td={findFiberByHostInstance:ya,bundleType:0,version:"18.1.0",rendererPackageName:"react-dom"},nd={bundleType:td.bundleType,version:td.version,rendererPackageName:td.rendererPackageName,rendererConfig:td.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:b.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=Be(e))?null:e.stateNode},findFiberByHostInstance:td.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0-next-22edb9f77-20220426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var rd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!rd.isDisabled&&rd.supportsFiber)try{at=rd.inject(nd),st=rd}catch(de){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ed,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Yc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:j,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Yc(e))throw Error(s(299));var n=!1,r="",a=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(a=t.onRecoverableError)),t=qc(e,1,!1,null,0,n,0,r,a),e[pa]=t.current,Hr(8===e.nodeType?e.parentNode:e),new $c(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=Be(t))?null:e.stateNode},t.flushSync=function(e){return dc(e)},t.hydrate=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Yc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,a=!1,i="",l=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(a=!0),void 0!==n.identifierPrefix&&(i=n.identifierPrefix),void 0!==n.onRecoverableError&&(l=n.onRecoverableError)),t=Hc(t,null,e,1,null!=n?n:null,a,0,i,l),e[pa]=t.current,Hr(e),r)for(e=0;e<r.length;e++)a=(a=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Qc(t)},t.render=function(e,t,n){if(!Xc(t))throw Error(s(200));return Zc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!Xc(e))throw Error(s(40));return!!e._reactRootContainer&&(dc(function(){Zc(null,null,e,!1,function(){e._reactRootContainer=null,e[pa]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!Xc(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Zc(e,t,n,!1,r)},t.version="18.1.0-next-22edb9f77-20220426"},853:(e,t,n)=>{e.exports=n(234)},950:(e,t,n)=>{!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(730)}},t={};function n(r){var a=t[r];if(void 0!==a)return a.exports;var s=t[r]={exports:{}};return e[r](s,s.exports,n),s.exports}var r=n(43),a=n(391);function s(e){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},s(e)}function i(e){var t=function(e,t){if("object"!=s(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=s(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==s(t)?t:t+""}function l(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach(function(t){l(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}const d={BASE_URL:{NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_TIMEOUT:"10000",REACT_APP_API__URL:"https://kindbite.pythonanywhere.com/api/v1",REACT_APP_DEBUG:"true",REACT_APP_ENV:"development",REACT_APP_TOKEN_STORAGE_KEY:"kindbite_tokens",REACT_APP_USER_STORAGE_KEY:"kindbite_user"}.REACT_APP_API_URL||"http://127.0.0.1:8000/api",TIMEOUT:1e4,HEADERS:{"Content-Type":"application/json",Accept:"application/json"}},u={ACCESS_TOKEN:"kindbite_access_token",REFRESH_TOKEN:"kindbite_refresh_token",USER:"kindbite_user"},m={LOGIN:"/auth/login/",REGISTER:"/auth/register/",REFRESH:"/auth/token/refresh/",LOGOUT:"/auth/logout/",STATUS:"/auth/status/",ME:"/auth/me/",CHANGE_PASSWORD:"/auth/change-password/"},f={LIST:"/users/list/",DETAIL:e=>"/users/".concat(e,"/"),UPDATE_ME:"/users/profile/update/",PROVIDERS:"/users/list/",MY_PROFILE:"/users/profile/",UPDATE_MY_PROFILE:"/users/profile/update/"},p={LISTINGS:"/foods/listings/",LISTING_DETAIL:e=>"/foods/listings/".concat(e,"/"),CREATE_LISTING:"/foods/listings/",UPDATE_LISTING:e=>"/foods/listings/".concat(e,"/"),DELETE_LISTING:e=>"/foods/listings/".concat(e,"/"),SEARCH:"/foods/listings/available/",NEARBY:"/foods/listings/available/",AVAILABLE:"/foods/listings/available/",RESERVATIONS:"/foods/reservations/",RESERVATION_CREATE:"/foods/reservations/",MY_RESERVATIONS:"/foods/reservations/my/",UPDATE_RESERVATION_STATUS:e=>"/foods/reservations/".concat(e,"/status/"),STATS:"/foods/stats/",UPLOAD_IMAGE:e=>"/foods/images/".concat(e,"/upload/"),DELETE_IMAGE:e=>"/foods/images/".concat(e,"/delete/")},h={SESSIONS:"/ai-chat/sessions/",NEW_SESSION:"/ai-chat/sessions/new/",SESSION_DETAIL:e=>"/ai-chat/sessions/".concat(e,"/"),SEND_MESSAGE:"/ai-chat/send/",MESSAGE_FEEDBACK:e=>"/ai-chat/messages/".concat(e,"/feedback/"),STATS:"/ai-chat/stats/"},g={LIST:"/notifications/list/",DETAIL:e=>"/notifications/list/".concat(e,"/"),MARK_READ:e=>"/notifications/list/".concat(e,"/mark_as_read/"),MARK_ALL_READ:"/notifications/list/mark_all_as_read/",UNREAD:"/notifications/list/unread/",STATS:"/notifications/list/stats/",PREFERENCES:"/notifications/preferences/",UPDATE_PREFERENCES:"/notifications/preferences/update/",SEND:"/notifications/send/",TEMPLATES:"/notifications/templates/"},x={METHODS:"/payments/methods/",METHOD_DETAIL:e=>"/payments/methods/".concat(e,"/"),SET_DEFAULT:e=>"/payments/methods/".concat(e,"/set_default/"),DEACTIVATE:e=>"/payments/methods/".concat(e,"/deactivate/"),INTENTS:"/payments/intents/",INTENT_DETAIL:e=>"/payments/intents/".concat(e,"/"),CONFIRM:e=>"/payments/intents/".concat(e,"/confirm/"),CREATE_INTENT:"/payments/create-intent/",PROCESS:"/payments/process/",TRANSACTIONS:"/payments/transactions/",TRANSACTION_DETAIL:e=>"/payments/transactions/".concat(e,"/"),REFUNDS:"/payments/refunds/",REFUND_DETAIL:e=>"/payments/refunds/".concat(e,"/"),CREATE_REFUND:"/payments/create-refund/",STATS:"/payments/stats/",KINDCOINS:"/payments/kindcoins/",KINDCOINS_TRANSACTIONS:"/payments/kindcoins/transactions/",PESAPAL:{INITIATE:"/payments/pesapal/initiate/",IPN:"/payments/pesapal/ipn/",STATUS:e=>"/payments/pesapal/status/".concat(e,"/")}};function y(e){const t=e&&"string"===typeof e&&e.startsWith&&e.startsWith("/")?e.slice(1):e;return"".concat(d.BASE_URL,"/").concat(t)}function v(){const e=localStorage.getItem(u.ACCESS_TOKEN);console.log("getAuthHeaders - Token:",e?"Present":"Missing"),console.log("getAuthHeaders - Token value:",e),console.log("getAuthHeaders - Storage key:",u.ACCESS_TOKEN),console.log("getAuthHeaders - All localStorage keys:",Object.keys(localStorage));const t={"Content-Type":"application/json",Accept:"application/json"};return e&&(t.Authorization="Bearer ".concat(e)),console.log("getAuthHeaders - Final headers:",t),console.log("getAuthHeaders - Authorization header:",t.Authorization),t}const b=new class{constructor(){this.baseURL=d.BASE_URL}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=y(e);let r;r=t.requiresAuth?v():c({},d.HEADERS),t.headers&&(r=c(c({},r),t.headers));const a=c({method:t.method||"GET",headers:r},t);delete a.headers,a.headers=r,console.log("API Request:",{url:n,method:a.method,requiresAuth:t.requiresAuth,hasAuthHeader:!!a.headers.Authorization,authHeaderValue:a.headers.Authorization?"Present":"Missing",endpoint:e,headers:a.headers});try{const e=await fetch(n,a);if(401===e.status&&t.requiresAuth){console.log("Received 401, attempting token refresh...");if(await this.refreshToken()){console.log("Token refreshed successfully, retrying request...");const e=v(),t=c(c({},a),{},{headers:e});console.log("Retry request with new headers:",e);const r=await fetch(n,t);return this.handleResponse(r)}throw console.log("Token refresh failed, logging out user"),this.logout(),new Error("Session expired. Please login again.")}return this.handleResponse(e)}catch(s){if("AbortError"===s.name)throw new Error("Request timeout");throw s}}async handleResponse(e){const t=e.headers.get("content-type"),n=t&&t.includes("application/json")?await e.json():await e.text();if(!e.ok){const t=new Error(n.message||n.detail||"HTTP ".concat(e.status));throw t.status=e.status,t.data=n,t}return n}async refreshToken(){try{const e=localStorage.getItem(u.REFRESH_TOKEN);if(!e)return console.log("No refresh token available"),!1;console.log("Attempting token refresh...");const t=await fetch(y(m.REFRESH),{method:"POST",headers:d.HEADERS,body:JSON.stringify({refresh:e})});if(t.ok){const e=await t.json();console.log("Token refresh successful, new token:",e.access?"Present":"Missing"),localStorage.setItem(u.ACCESS_TOKEN,e.access);const n=await fetch(y(m.ME),{method:"GET",headers:c(c({},d.HEADERS),{},{Authorization:"Bearer ".concat(e.access)})});return n.ok?(console.log("New token verified successfully"),!0):(console.log("New token verification failed:",n.status),!1)}return console.log("Token refresh failed:",t.status,t.statusText),!1}catch(e){return console.error("Token refresh failed:",e),!1}}logout(){localStorage.removeItem(u.ACCESS_TOKEN),localStorage.removeItem(u.REFRESH_TOKEN),localStorage.removeItem(u.USER),window.location.href="/"}async logoutBackend(){try{const e=localStorage.getItem(u.REFRESH_TOKEN);if(!e)return;await fetch(y(m.LOGOUT),{method:"POST",headers:d.HEADERS,body:JSON.stringify({refresh_token:e})})}catch(e){console.warn("Backend logout failed:",e)}}async login(e){return this.request(m.LOGIN,{method:"POST",body:JSON.stringify(e),requiresAuth:!1})}async register(e){return this.request(m.REGISTER,{method:"POST",body:JSON.stringify(e),requiresAuth:!1})}async getAuthStatus(){return this.request(m.STATUS)}async getCurrentUser(){try{const e=localStorage.getItem(u.ACCESS_TOKEN);return console.log("Current token:",e?"Present":"Missing"),this.request(m.ME,{requiresAuth:!0})}catch(e){throw console.error("getCurrentUser error:",e),e}}async changePassword(e){return this.request(m.CHANGE_PASSWORD,{method:"POST",body:JSON.stringify(e),requiresAuth:!0})}async updateProfile(e){console.log("updateProfile called with:",e);const t=localStorage.getItem(u.ACCESS_TOKEN);return console.log("updateProfile token:",t?"Present":"Missing"),this.request(f.UPDATE_MY_PROFILE,{method:"PATCH",body:JSON.stringify(e),requiresAuth:!0})}async getUsers(){return this.request(f.LIST,{requiresAuth:!0})}async getUser(e){return this.request(f.DETAIL(e),{requiresAuth:!0})}async updateCurrentUser(e){return this.request(f.UPDATE_ME,{method:"PATCH",body:JSON.stringify(e),requiresAuth:!0})}async getProviders(){const e=new URLSearchParams(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).toString(),t=e?"".concat(f.PROVIDERS,"?").concat(e):f.PROVIDERS;return this.request(t,{requiresAuth:!0})}async getUserProfile(){return this.request(f.MY_PROFILE,{requiresAuth:!0})}async updateUserProfile(e){return this.request(f.UPDATE_MY_PROFILE,{method:"PATCH",body:JSON.stringify(e),requiresAuth:!0})}async aiGetSessions(){return this.request(h.SESSIONS,{requiresAuth:!0})}async aiCreateSession(){return this.request(h.NEW_SESSION,{method:"POST",requiresAuth:!0})}async aiGetSessionDetail(e){return this.request(h.SESSION_DETAIL(e),{requiresAuth:!0})}async aiSendMessage(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return this.request(h.SEND_MESSAGE,{method:"POST",body:JSON.stringify({message:e,session_id:t}),requiresAuth:!0})}async aiMessageFeedback(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return this.request(h.MESSAGE_FEEDBACK(e),{method:"POST",body:JSON.stringify({rating:t,comment:n}),requiresAuth:!0})}async aiStats(){return this.request(h.STATS,{requiresAuth:!0})}};function w(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}const j=e=>{const t=(e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(e,t,n)=>n?n.toUpperCase():t.toLowerCase()))(e);return t.charAt(0).toUpperCase()+t.slice(1)},N=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.filter((e,t,n)=>Boolean(e)&&""!==e.trim()&&n.indexOf(e)===t).join(" ").trim()};var k={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const _=["color","size","strokeWidth","absoluteStrokeWidth","className","children","iconNode"],S=(0,r.forwardRef)((e,t)=>{let{color:n="currentColor",size:a=24,strokeWidth:s=2,absoluteStrokeWidth:i,className:l="",children:o,iconNode:d}=e,u=w(e,_);return(0,r.createElement)("svg",c(c(c({ref:t},k),{},{width:a,height:a,stroke:n,strokeWidth:i?24*Number(s)/Number(a):s,className:N("lucide",l)},!o&&!(e=>{for(const t in e)if(t.startsWith("aria-")||"role"===t||"title"===t)return!0})(u)&&{"aria-hidden":"true"}),u),[...d.map(e=>{let[t,n]=e;return(0,r.createElement)(t,n)}),...Array.isArray(o)?o:[o]])}),E=["className"],C=(e,t)=>{const n=(0,r.forwardRef)((n,a)=>{let{className:s}=n,i=w(n,E);return(0,r.createElement)(S,c({ref:a,iconNode:t,className:N("lucide-".concat((l=j(e),l.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase())),"lucide-".concat(e),s)},i));var l});return n.displayName=j(e),n},P=C("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]),A=C("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),T=C("circle-alert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),L=C("info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),F=C("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);var R=n(579);const I=e=>{let{message:t,type:n="info",duration:a=5e3,onClose:s,position:i="top-right"}=e;const[l,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{setTimeout(()=>d(!0),10);const e=setTimeout(()=>{u()},a);return()=>clearTimeout(e)},[a]);const u=()=>{d(!1),setTimeout(()=>{o(!1),s&&s()},300)};if(!l)return null;return(0,R.jsxs)("div",{className:(()=>{const e={"top-right":"fixed top-4 right-4 z-50 ".concat(c?"translate-x-0 opacity-100":"translate-x-full opacity-0"),"top-left":"fixed top-4 left-4 z-50 ".concat(c?"translate-x-0 opacity-100":"-translate-x-full opacity-0"),"bottom-right":"fixed bottom-4 right-4 z-50 ".concat(c?"translate-x-0 opacity-100":"translate-x-full opacity-0"),"bottom-left":"fixed bottom-4 left-4 z-50 ".concat(c?"translate-x-0 opacity-100":"-translate-x-full opacity-0"),"top-center":"fixed top-4 left-1/2 transform -translate-x-1/2 z-50 ".concat(c?"translate-y-0 opacity-100":"-translate-y-full opacity-0"),"bottom-center":"fixed bottom-4 left-1/2 transform -translate-x-1/2 z-50 ".concat(c?"translate-y-0 opacity-100":"translate-y-full opacity-0")};return"".concat("flex items-start space-x-3 p-4 rounded-lg shadow-lg border max-w-sm w-full transition-all duration-300 ease-in-out"," ").concat({success:"bg-green-50 border-green-200 text-green-800",error:"bg-red-50 border-red-200 text-red-800",warning:"bg-yellow-50 border-yellow-200 text-yellow-800",info:"bg-blue-50 border-blue-200 text-blue-800"}[n]," ").concat(e[i])})(),children:[(()=>{switch(n){case"success":return(0,R.jsx)(P,{className:"w-5 h-5 text-green-500"});case"error":return(0,R.jsx)(A,{className:"w-5 h-5 text-red-500"});case"warning":return(0,R.jsx)(T,{className:"w-5 h-5 text-yellow-500"});default:return(0,R.jsx)(L,{className:"w-5 h-5 text-blue-500"})}})(),(0,R.jsx)("div",{className:"flex-1",children:(0,R.jsx)("p",{className:"text-sm font-medium",children:t})}),(0,R.jsx)("button",{onClick:u,className:"flex-shrink-0 ml-2 text-gray-400 hover:text-gray-600 transition-colors",children:(0,R.jsx)(F,{className:"w-4 h-4"})})]})},O=(0,r.createContext)(),M=()=>{const e=(0,r.useContext)(O);if(!e)throw new Error("useToast must be used within a ToastProvider");return e},z=e=>{let{children:t}=e;const[n,a]=(0,r.useState)([]),s=(0,r.useCallback)(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"info",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5e3;const r=Date.now()+Math.random(),s={id:r,message:e,type:t,duration:n};return a(e=>[...e,s]),r},[]),i=(0,r.useCallback)(e=>{a(t=>t.filter(t=>t.id!==e))},[]),l=(0,r.useCallback)(function(e){return s(e,"success",arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3)},[s]),o=(0,r.useCallback)(function(e){return s(e,"error",arguments.length>1&&void 0!==arguments[1]?arguments[1]:7e3)},[s]),c=(0,r.useCallback)(function(e){return s(e,"warning",arguments.length>1&&void 0!==arguments[1]?arguments[1]:6e3)},[s]),d=(0,r.useCallback)(function(e){return s(e,"info",arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3)},[s]),u=(0,r.useCallback)(()=>{a([])},[]),m={toasts:n,addToast:s,removeToast:i,success:l,error:o,warning:c,info:d,clear:u};return(0,R.jsxs)(O.Provider,{value:m,children:[t,(0,R.jsx)("div",{className:"fixed inset-0 pointer-events-none z-50",children:n.map((e,t)=>(0,R.jsx)("div",{className:"pointer-events-auto",style:{position:"fixed",top:"".concat(20+80*t,"px"),right:"20px",zIndex:50+t},children:(0,R.jsx)(I,{message:e.message,type:e.type,duration:e.duration,onClose:()=>i(e.id),position:"custom"})},e.id))})]})},D=(0,r.createContext)(),q=()=>{const e=(0,r.useContext)(D);if(!e)throw new Error("useAuth must be used within an AuthProvider");return e},U=e=>{let{children:t}=e;const[n,a]=(0,r.useState)(null),[s,i]=(0,r.useState)(!1),[l,o]=(0,r.useState)(!0);let d;try{d=M()}catch(h){console.warn("Toast context not available:",h.message),d={success:()=>{},error:()=>{},info:()=>{}}}(0,r.useEffect)(()=>{(async()=>{try{const n=localStorage.getItem(u.USER),r=localStorage.getItem(u.ACCESS_TOKEN),s=localStorage.getItem(u.REFRESH_TOKEN);if(console.log("Auth check - savedUser:",!!n),console.log("Auth check - accessToken:",!!r),console.log("Auth check - refreshToken:",!!s),n&&r){if(s)try{console.log("Attempting token refresh during auth check...");if(await b.refreshToken()){console.log("Token refreshed successfully during auth check");try{const e=await b.getCurrentUser();return console.log("Got current user after refresh:",e),a(e),i(!0),void m()}catch(e){console.error("Failed to get current user after refresh:",e)}}}catch(t){console.error("Token refresh failed during auth check:",t)}try{console.log("Trying to get current user with existing token...");const e=await b.getCurrentUser();return console.log("Got current user with existing token:",e),a(e),i(!0),void m()}catch(h){console.error("Failed to get current user with existing token:",h),console.error("Token validation failed:",h),f()}}else console.log("No saved user or access token found"),a(null),i(!1)}catch(h){console.error("Error checking auth status:",h)}finally{o(!1)}})()},[]);const m=()=>{const e=setInterval(async()=>{try{await b.refreshToken()||(f(),clearInterval(e))}catch(h){console.error("Automatic token refresh failed:",h),f(),clearInterval(e)}},3e6);window.tokenRefreshInterval=e},f=()=>{a(null),i(!1),localStorage.removeItem(u.USER),localStorage.removeItem(u.ACCESS_TOKEN),localStorage.removeItem(u.REFRESH_TOKEN),window.tokenRefreshInterval&&(clearInterval(window.tokenRefreshInterval),window.tokenRefreshInterval=null)},p={user:n,isAuthenticated:s,isLoading:l,login:async e=>{try{console.log("AuthContext login called with:",e);const t=await b.login(e);return console.log("AuthContext login response:",t),t.access&&(console.log("Storing access token:",t.access),localStorage.setItem(u.ACCESS_TOKEN,t.access)),t.refresh&&(console.log("Storing refresh token:",t.refresh),localStorage.setItem(u.REFRESH_TOKEN,t.refresh)),t.user&&(console.log("Storing user data:",t.user),localStorage.setItem(u.USER,JSON.stringify(t.user)),a(t.user)),i(!0),console.log("Login successful, user authenticated"),m(),d.success("Welcome back, ".concat(t.user.first_name,"!")),{success:!0,user:t.user}}catch(h){throw console.error("Login error:",h),d.error(h.message||"Login failed. Please try again."),new Error(h.message||"Login failed. Please try again.")}},register:async e=>{try{const t=await b.register(e);return t.tokens&&(localStorage.setItem(u.ACCESS_TOKEN,t.tokens.access),localStorage.setItem(u.REFRESH_TOKEN,t.tokens.refresh)),t.user&&(localStorage.setItem(u.USER,JSON.stringify(t.user)),a(t.user)),i(!0),m(),d.success("Welcome to KindBite, ".concat(t.user.first_name,"! Your account has been created successfully.")),{success:!0,user:t.user}}catch(h){throw console.error("Registration error:",h),d.error(h.message||"Registration failed. Please try again."),new Error(h.message||"Registration failed. Please try again.")}},logout:()=>{b.logoutBackend().finally(()=>{f(),d.info("You have been logged out successfully."),b.logout()})},updateUser:e=>{const t=c(c({},n),e);return a(t),localStorage.setItem(u.USER,JSON.stringify(t)),t},updateKindCoins:e=>{if(n){const t=c(c({},n),{},{kind_coins:(n.kind_coins||0)+e});a(t),localStorage.setItem(u.USER,JSON.stringify(t))}}};return(0,R.jsx)(D.Provider,{value:p,children:t})},H=C("menu",[["path",{d:"M4 12h16",key:"1lakjw"}],["path",{d:"M4 18h16",key:"19g7jn"}],["path",{d:"M4 6h16",key:"1o0s65"}]]),V=C("bot",[["path",{d:"M12 8V4H8",key:"hb8ula"}],["rect",{width:"16",height:"12",x:"4",y:"8",rx:"2",key:"enze0r"}],["path",{d:"M2 14h2",key:"vft8re"}],["path",{d:"M20 14h2",key:"4cs60a"}],["path",{d:"M15 13v2",key:"1xurst"}],["path",{d:"M9 13v2",key:"rq6x2g"}]]),K=C("user",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),B=C("settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),W=C("log-out",[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]]),G=C("bell",[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]]);const $=new class{constructor(){this.baseURL=d.BASE_URL}async request(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=y(e),r=c({timeout:d.TIMEOUT,headers:t.requiresAuth?v():d.HEADERS},t);try{const e=await fetch(n,r);if(!e.ok){const t=await e.json().catch(()=>({}));throw new Error(t.message||t.detail||"HTTP ".concat(e.status))}return await e.json()}catch(a){throw console.error("Notification service request failed:",a),a}}async getNotifications(){try{return await this.request(g.LIST,{requiresAuth:!0})}catch(e){return console.error("Error fetching notifications:",e),[]}}async getUnreadNotifications(){try{return await this.request(g.UNREAD,{requiresAuth:!0})}catch(e){return console.error("Error fetching unread notifications:",e),[]}}async markAsRead(e){try{return await this.request(g.MARK_READ(e),{method:"POST",requiresAuth:!0})}catch(t){throw console.error("Error marking notification as read:",t),t}}async markAllAsRead(){try{return await this.request(g.MARK_ALL_READ,{method:"POST",requiresAuth:!0})}catch(e){throw console.error("Error marking all notifications as read:",e),e}}async deleteNotification(e){try{return await this.request(g.DETAIL(e),{method:"DELETE",requiresAuth:!0})}catch(t){throw console.error("Error deleting notification:",t),t}}async getNotificationPreferences(){try{return await this.request(g.PREFERENCES,{requiresAuth:!0})}catch(e){return console.error("Error fetching notification preferences:",e),{email:!0,push:!0,reservation_updates:!0,new_food_listings:!0,promotional:!1,system_updates:!0}}}async updateNotificationPreferences(e){try{return await this.request(g.UPDATE_PREFERENCES,{method:"PUT",body:JSON.stringify(e),requiresAuth:!0})}catch(t){throw console.error("Error updating notification preferences:",t),t}}async sendNotification(e){try{return await this.request(g.SEND,{method:"POST",body:JSON.stringify(e),requiresAuth:!0})}catch(t){throw console.error("Error sending notification:",t),t}}async getNotificationStats(){try{return await this.request(g.STATS,{requiresAuth:!0})}catch(e){return console.error("Error fetching notification stats:",e),{total_notifications:0,unread_notifications:0,notifications_by_type:{},notifications_by_priority:{},recent_notifications:[]}}}},Q=(0,r.createContext)(),Y=e=>{let{children:t}=e;const[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(0),[l,o]=(0,r.useState)(!1),[d,u]=(0,r.useState)({email:!0,push:!0,reservation_updates:!0,new_food_listings:!0,promotional:!1,system_updates:!0}),{isAuthenticated:m}=q();(0,r.useEffect)(()=>{m?(f(),p()):(a([]),i(0))},[m]),(0,r.useEffect)(()=>{if(!m)return;const e=setInterval(()=>{f()},3e4);return()=>clearInterval(e)},[m]);const f=async()=>{try{o(!0);const e=await $.getNotifications();a(e||[]),i((null===e||void 0===e?void 0:e.filter(e=>!e.is_read).length)||0)}catch(e){console.error("Error loading notifications:",e)}finally{o(!1)}},p=async()=>{try{const e=await $.getNotificationPreferences();u(e||d)}catch(e){console.error("Error loading notification preferences:",e)}},h={notifications:n,unreadCount:s,isLoading:l,preferences:d,loadNotifications:f,markAsRead:async e=>{try{await $.markAsRead(e),a(t=>t.map(t=>t.id===e?c(c({},t),{},{is_read:!0}):t)),i(e=>Math.max(0,e-1))}catch(t){console.error("Error marking notification as read:",t)}},markAllAsRead:async()=>{try{await $.markAllAsRead(),a(e=>e.map(e=>c(c({},e),{},{is_read:!0}))),i(0)}catch(e){console.error("Error marking all notifications as read:",e)}},deleteNotification:async e=>{try{await $.deleteNotification(e),a(t=>t.filter(t=>t.id!==e)),i(t=>{const r=n.find(t=>t.id===e);return r&&!r.is_read?Math.max(0,t-1):t})}catch(t){console.error("Error deleting notification:",t)}},updatePreferences:async e=>{try{await $.updateNotificationPreferences(e),u(e)}catch(t){console.error("Error updating notification preferences:",t)}},addNotification:e=>{a(t=>[e,...t]),e.is_read||i(e=>e+1)},clearAllNotifications:()=>{a([]),i(0)}};return(0,R.jsx)(Q.Provider,{value:h,children:t})},X=e=>{var t,n;let{onMenuToggle:a,onAIChatToggle:s,onNotificationsToggle:i,onHomeClick:l,isLargeScreen:o=!0,userRole:c="end-user",isAuthenticated:d=!1,user:u=null,onLoginClick:m,onSignupClick:f,onProfileClick:p,onLogout:h,profileImage:g=null}=e;const[x,y]=(0,r.useState)(!1),v=(0,r.useRef)(null),{unreadCount:b}=(()=>{const e=(0,r.useContext)(Q);if(!e)throw new Error("useNotifications must be used within a NotificationProvider");return e})();return(0,r.useEffect)(()=>{const e=e=>{v.current&&!v.current.contains(e.target)&&y(!1)};return document.addEventListener("mousedown",e),()=>{document.removeEventListener("mousedown",e)}},[]),(0,R.jsx)("div",{className:"bg-white border-b border-gray-200 fixed top-0 left-0 right-0 z-40",children:(0,R.jsxs)("div",{className:"flex items-center justify-between px-4 py-3",children:[d&&!o&&(0,R.jsx)("button",{onClick:a,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200",children:(0,R.jsx)(H,{size:24,className:"text-gray-600"})}),(0,R.jsx)("h1",{className:"text-xl font-bold text-gray-800 ".concat(d&&!o?"":"ml-0"),children:"KindBite"}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)("button",{onClick:s,className:"p-2 rounded-lg bg-green-500 text-white hover:bg-green-600 transition-colors duration-200",children:(0,R.jsx)(V,{size:20})}),d&&(0,R.jsx)("button",{onClick:l,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200",title:"Go to Home",children:(0,R.jsx)("span",{className:"text-lg",children:"\ud83c\udfe0"})}),d?(0,R.jsx)("div",{className:"flex items-center space-x-2",children:(0,R.jsxs)("div",{className:"relative",ref:v,children:[(0,R.jsx)("button",{onClick:()=>y(!x),className:"w-8 h-8 rounded-full overflow-hidden hover:scale-105 transition-transform duration-200 cursor-pointer",children:g?(0,R.jsx)("img",{src:g,alt:"Profile",className:"w-full h-full object-cover"}):(0,R.jsx)("div",{className:"w-full h-full bg-gradient-to-br from-green-400 to-blue-500 flex items-center justify-center text-white text-sm font-semibold",children:(null===u||void 0===u||null===(t=u.first_name)||void 0===t?void 0:t.charAt(0).toUpperCase())||(null===u||void 0===u||null===(n=u.email)||void 0===n?void 0:n.charAt(0).toUpperCase())||"U"})}),x&&(0,R.jsxs)("div",{className:"absolute right-0 mt-2 w-48 bg-white rounded-lg shadow-lg border border-gray-200 py-1 z-50",children:[(0,R.jsxs)("div",{className:"px-4 py-2 border-b border-gray-100",children:[(0,R.jsxs)("p",{className:"text-sm font-medium text-gray-900",children:[null===u||void 0===u?void 0:u.first_name," ",null===u||void 0===u?void 0:u.last_name]}),(0,R.jsx)("p",{className:"text-xs text-gray-500",children:null===u||void 0===u?void 0:u.email})]}),(0,R.jsxs)("button",{onClick:()=>{p(),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,R.jsx)(K,{size:16}),(0,R.jsx)("span",{children:"Profile"})]}),(0,R.jsxs)("button",{onClick:()=>{y(!1)},className:"w-full px-4 py-2 text-left text-sm text-gray-700 hover:bg-gray-100 flex items-center space-x-2",children:[(0,R.jsx)(B,{size:16}),(0,R.jsx)("span",{children:"Settings"})]}),(0,R.jsx)("div",{className:"border-t border-gray-100 my-1"}),(0,R.jsxs)("button",{onClick:()=>{h(),y(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 flex items-center space-x-2",children:[(0,R.jsx)(W,{size:16}),(0,R.jsx)("span",{children:"Logout"})]})]})]})}):(0,R.jsxs)("div",{className:"flex space-x-2",children:[(0,R.jsx)("button",{onClick:m,className:"bg-green-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-600 transition-colors duration-200",children:"Login"}),(0,R.jsx)("button",{onClick:f,className:"bg-blue-500 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-600 transition-colors duration-200",children:"Sign Up"})]}),d&&(0,R.jsxs)("button",{onClick:i,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors duration-200 relative",children:[(0,R.jsx)(G,{size:20,className:"text-gray-600"}),b>0&&(0,R.jsx)("span",{className:"absolute -top-1 -right-1 w-5 h-5 bg-red-500 text-white text-xs rounded-full flex items-center justify-center",children:b>99?"99+":b})]})]})]})})},J=C("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]),Z=C("search",[["path",{d:"m21 21-4.34-4.34",key:"14j7rj"}],["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}]]),ee=C("users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["path",{d:"M16 3.128a4 4 0 0 1 0 7.744",key:"16gr8j"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),te=C("award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]),ne=C("message-circle",[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]]),re=e=>{let{currentView:t,onViewChange:n,isOpen:r,onClose:a}=e;const s=[{id:"home",icon:J,label:"Home"},{id:"search",icon:Z,label:"Search"},{id:"community",icon:ee,label:"Community"},{id:"points",icon:te,label:"Points"},{id:"profile",icon:K,label:"Profile"},{id:"messages",icon:ne,label:"Messages"}];return(0,R.jsx)("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40",children:(0,R.jsx)("div",{className:"flex justify-around",children:s.map(e=>{const r=e.icon,a=t===e.id;return(0,R.jsxs)("button",{onClick:()=>n(e.id),className:"flex flex-col items-center justify-center w-16 h-16 transition-colors duration-200 ".concat(a?"text-green-600 bg-green-50":"text-gray-600 hover:text-green-600 hover:bg-gray-50"),children:[(0,R.jsx)(r,{size:20}),(0,R.jsx)("span",{className:"text-xs mt-1",children:e.label})]},e.id)})})})},ae=C("chef-hat",[["path",{d:"M17 21a1 1 0 0 0 1-1v-5.35c0-.457.316-.844.727-1.041a4 4 0 0 0-2.134-7.589 5 5 0 0 0-9.186 0 4 4 0 0 0-2.134 7.588c.411.198.727.585.727 1.041V20a1 1 0 0 0 1 1Z",key:"1qvrer"}],["path",{d:"M6 17h12",key:"1jwigz"}]]),se=C("shopping-bag",[["path",{d:"M16 10a4 4 0 0 1-8 0",key:"1ltviw"}],["path",{d:"M3.103 6.034h17.794",key:"awc11p"}],["path",{d:"M3.4 5.467a2 2 0 0 0-.4 1.2V20a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V6.667a2 2 0 0 0-.4-1.2l-2-2.667A2 2 0 0 0 17 2H7a2 2 0 0 0-1.6.8z",key:"o988cm"}]]),ie=C("building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]),le=C("stethoscope",[["path",{d:"M11 2v2",key:"1539x4"}],["path",{d:"M5 2v2",key:"1yf1q8"}],["path",{d:"M5 3H4a2 2 0 0 0-2 2v4a6 6 0 0 0 12 0V5a2 2 0 0 0-2-2h-1",key:"rb5t3r"}],["path",{d:"M8 15a6 6 0 0 0 12 0v-3",key:"x18d4x"}],["circle",{cx:"20",cy:"10",r:"2",key:"ts1r5v"}]]),oe=C("user-check",[["path",{d:"m16 11 2 2 4-4",key:"9rsbq5"}],["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}]]),ce=C("coins",[["circle",{cx:"8",cy:"8",r:"6",key:"3yglwk"}],["path",{d:"M18.09 10.37A6 6 0 1 1 10.34 18",key:"t5s6rm"}],["path",{d:"M7 6h1v4",key:"1obek4"}],["path",{d:"m16.71 13.88.7.71-2.82 2.82",key:"1rbuyh"}]]),de=C("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),ue=e=>{let{isOpen:t,onClose:n,currentView:r,onViewChange:a,onAdminPanelOpen:s,userRole:i,onRoleChange:l,onLogout:o,isLargeScreen:c=!1}=e;const d={cafe:{icon:ae,title:"Cafe",color:"bg-green-500"},restaurant:{icon:ae,title:"Restaurant",color:"bg-green-500"},retail:{icon:se,title:"Retail Shop",color:"bg-green-500"},bakery:{icon:ae,title:"Bakery",color:"bg-green-500"},grocery:{icon:se,title:"Grocery Store",color:"bg-green-500"},hotel:{icon:ie,title:"Hotel",color:"bg-green-500"},home:{icon:J,title:"Home Kitchen",color:"bg-green-500"},factory:{icon:ie,title:"Food Factory",color:"bg-green-500"},supermarket:{icon:se,title:"Supermarket",color:"bg-green-500"},verifier:{icon:le,title:"Food Verifier",color:"bg-green-500"},ambassador:{icon:oe,title:"Food Ambassador",color:"bg-green-500"},donor:{icon:ce,title:"Donor/Buyer",color:"bg-green-500"},"end-user":{icon:K,title:"Food Seeker",color:"bg-green-500"}},u=d[i]||d.cafe,m=(e=>{const t={cafe:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:ae},{id:"food-management",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"points",label:"Analytics",icon:ce},{id:"profile",label:"Profile",icon:K}],restaurant:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:ae},{id:"food-management",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"points",label:"Analytics",icon:ce},{id:"profile",label:"Profile",icon:K}],retail:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:se},{id:"food-management",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"food-management",label:"Inventory",icon:ie},{id:"profile",label:"Profile",icon:K}],bakery:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:ae},{id:"my-food-listings",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"food-management",label:"Baking Schedule",icon:de},{id:"profile",label:"Profile",icon:K}],grocery:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:se},{id:"my-food-listings",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"food-management",label:"Inventory",icon:ie},{id:"profile",label:"Profile",icon:K}],hotel:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:ae},{id:"my-food-listings",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"food-management",label:"Events",icon:de},{id:"profile",label:"Profile",icon:K}],factory:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:ie},{id:"my-food-listings",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"points",label:"Analytics",icon:ce},{id:"profile",label:"Profile",icon:K}],supermarket:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:se},{id:"my-food-listings",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"points",label:"Analytics",icon:ce},{id:"profile",label:"Profile",icon:K}],home:[{id:"home",label:"Dashboard",icon:J},{id:"food-management",label:"Add Food Items",icon:ae},{id:"my-food-listings",label:"My Food Listings",icon:de},{id:"reservations",label:"Reservations",icon:ne},{id:"points",label:"Analytics",icon:ce},{id:"profile",label:"Profile",icon:K}],verifier:[{id:"home",label:"Dashboard",icon:J},{id:"community",label:"Community",icon:ee},{id:"points",label:"Analytics",icon:ce},{id:"profile",label:"Profile",icon:K}],ambassador:[{id:"home",label:"Dashboard",icon:J},{id:"community",label:"Community",icon:ee},{id:"points",label:"Analytics",icon:ce},{id:"profile",label:"Profile",icon:K}],donor:[{id:"home",label:"Dashboard",icon:J},{id:"points",label:"Analytics",icon:ce},{id:"profile",label:"Profile",icon:K}],"end-user":[{id:"home",label:"Dashboard",icon:J},{id:"search",label:"Search",icon:ee},{id:"community",label:"Community",icon:ee},{id:"points",label:"Points",icon:ce},{id:"profile",label:"Profile",icon:K}]};return t[e]||t["end-user"]})(i),f=(0,R.jsxs)("div",{className:"bg-white shadow-lg overflow-y-auto h-full",children:[(0,R.jsx)("div",{className:"".concat(u.color," text-white p-4"),children:(0,R.jsxs)("div",{className:"flex justify-between items-center",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)("div",{className:"w-8 h-8 bg-white/20 rounded-full flex items-center justify-center",children:(0,R.jsx)(u.icon,{size:20})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h2",{className:"text-lg font-bold",children:u.title}),(0,R.jsx)("p",{className:"text-xs opacity-90",children:"Dashboard"})]})]}),(0,R.jsx)("button",{onClick:n,className:"p-1 hover:bg-white/20 rounded",children:(0,R.jsx)(F,{size:20})})]})}),(0,R.jsx)("div",{className:"p-4 space-y-1",children:m.map(e=>{const t=e.icon;return(0,R.jsxs)("button",{onClick:()=>{a(e.id),n()},className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-gray-100 transition-colors ".concat(r===e.id?"bg-green-50 border border-green-200":""),children:[(0,R.jsx)("div",{className:"w-8 h-8 ".concat(u.color," rounded-full flex items-center justify-center"),children:(0,R.jsx)(t,{size:16,className:"text-white"})}),(0,R.jsx)("span",{className:"font-medium ".concat(r===e.id?"text-green-700":"text-gray-700"),children:e.label}),r===e.id&&(0,R.jsx)("div",{className:"ml-auto w-2 h-2 bg-green-500 rounded-full"})]},e.id)})}),(0,R.jsx)("div",{className:"mt-auto p-4 border-t border-gray-200",children:(0,R.jsxs)("button",{onClick:()=>{o(),n()},className:"w-full flex items-center space-x-3 p-3 rounded-lg hover:bg-red-50 text-red-600 hover:text-red-700 transition-colors",children:[(0,R.jsx)(W,{size:20}),(0,R.jsx)("span",{className:"font-medium",children:"Logout"})]})})]});return c?(0,R.jsx)("div",{className:"hidden lg:block fixed left-0 top-0 h-full w-64 bg-white shadow-lg z-30",children:f}):t&&(0,R.jsx)("div",{className:"fixed inset-0 z-50 bg-black bg-opacity-50",onClick:n,children:(0,R.jsx)("div",{className:"fixed left-0 top-0 h-full w-80 bg-white shadow-lg overflow-y-auto",onClick:e=>e.stopPropagation(),children:f})})},me=C("send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]),fe=e=>{let{showAIChat:t,onClose:n,aiMessages:a,aiInput:s,onAiInputChange:i,onSendMessage:l,foodListings:o,isTyping:d=!1}=e;const u=(0,r.useRef)(null),[m,f]=(0,r.useState)([]),[p,h]=(0,r.useState)({dietaryRestrictions:[],favoriteCategories:[],location:null,lastSearches:[]});(0,r.useEffect)(()=>{g()},[a]);const g=()=>{u.current&&u.current.scrollIntoView({behavior:"smooth",block:"end"})};(0,r.useEffect)(()=>{if(t&&0===a.length){const e=(new Date).getHours(),t=e<12?"Good morning":e<17?"Good afternoon":"Good evening",n={id:Date.now(),text:"".concat(t,"! How can I help you today?"),sender:"ai",timestamp:(new Date).toLocaleTimeString(),fullTimestamp:(new Date).toISOString()};l(n)}},[t]);const x=async()=>{if(s.trim()){const e={id:Date.now(),text:s,sender:"user",timestamp:(new Date).toLocaleTimeString(),fullTimestamp:(new Date).toISOString()};f(e=>[...e,{role:"user",content:s}]),(e=>{const t=e.toLowerCase(),n=["vegetarian","vegan","gluten-free","halal","kosher","dairy-free"].filter(e=>t.includes(e));n.length>0&&h(e=>c(c({},e),{},{dietaryRestrictions:[...new Set([...e.dietaryRestrictions,...n])]})),(t.includes("near")||t.includes("location")||t.includes("close"))&&h(e=>c(c({},e),{},{location:"nearby"})),h(t=>c(c({},t),{},{lastSearches:[...t.lastSearches.slice(-4),e].slice(-5)}))})(s),i({target:{value:""}}),await l(e)}};return t?(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl h-[80vh] max-h-[600px] flex flex-col overflow-hidden",children:[(0,R.jsxs)("div",{className:"bg-gradient-to-r from-green-500 to-blue-500 text-white p-4 flex items-center justify-between flex-shrink-0",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center",children:(0,R.jsx)(V,{size:24})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h2",{className:"text-xl font-bold",children:"KindBite AI Assistant"}),(0,R.jsx)("p",{className:"text-sm opacity-90",children:"Your intelligent food rescue companion"})]})]}),(0,R.jsx)("button",{onClick:n,className:"p-2 hover:bg-white/20 rounded-lg transition-colors duration-200 bg-white/10",title:"Close AI Chat",children:(0,R.jsx)(F,{size:24})})]}),(0,R.jsxs)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4 scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[(0,R.jsx)("style",{jsx:!0,children:"\n            .scrollbar-hide::-webkit-scrollbar {\n              display: none;\n            }\n          "}),a.map(e=>(0,R.jsx)("div",{className:"flex ".concat("user"===e.sender?"justify-end":"justify-start"),children:(0,R.jsxs)("div",{className:"max-w-[80%] rounded-lg p-3 ".concat("user"===e.sender?"bg-green-500 text-white":"bg-gray-100 text-gray-800"),children:[(0,R.jsx)("p",{className:"whitespace-pre-wrap",children:e.text}),(0,R.jsx)("p",{className:"text-xs mt-1 ".concat("user"===e.sender?"text-green-100":"text-gray-500"),children:e.timestamp})]})},e.id)),d&&(0,R.jsx)("div",{className:"flex justify-start",children:(0,R.jsx)("div",{className:"bg-gray-100 rounded-lg p-3",children:(0,R.jsxs)("div",{className:"flex space-x-1",children:[(0,R.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce"}),(0,R.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),(0,R.jsx)("div",{className:"w-2 h-2 bg-gray-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})}),(0,R.jsx)("div",{ref:u})]}),(0,R.jsx)("div",{className:"border-t bg-white p-4 flex-shrink-0",children:(0,R.jsxs)("div",{className:"flex space-x-2",children:[(0,R.jsx)("input",{type:"text",value:s,onChange:i,onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),x())},placeholder:"Ask me anything about food, reservations, or the app...",className:"flex-1 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-green-500 focus:border-transparent resize-none",autoFocus:!0}),(0,R.jsx)("button",{onClick:x,disabled:!s.trim()||d,className:"bg-green-500 text-white px-4 py-2 rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center justify-center",children:(0,R.jsx)(me,{size:20})}),(0,R.jsx)("button",{onClick:n,className:"bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors duration-200 flex items-center justify-center",title:"Close AI Chat",children:(0,R.jsx)(F,{size:20})})]})})]})}):null},pe=e=>{let{selectedFood:t,onClose:n,onReserve:r}=e;if(!t)return null;return(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-end justify-center z-50 lg:items-center overflow-y-auto",children:(0,R.jsx)("div",{className:"bg-white rounded-t-lg w-full max-w-md lg:rounded-lg lg:max-w-lg lg:w-auto lg:mx-4 my-4",children:(0,R.jsxs)("div",{className:"p-4 lg:p-6",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,R.jsx)("h2",{className:"font-bold text-gray-800 text-xl lg:text-2xl",children:t.name||"Food Item"}),(0,R.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 p-1",children:"\u2715"})]}),(0,R.jsxs)("div",{className:"text-center mb-4",children:[(0,R.jsx)("div",{className:"mb-2 text-6xl lg:text-7xl",children:t.image_emoji||t.image||"\ud83c\udf7d\ufe0f"}),(0,R.jsx)("h3",{className:"font-semibold text-gray-700 lg:text-lg",children:t.restaurant_name||t.restaurant||"Unknown Restaurant"}),(0,R.jsx)("span",{className:"text-xs px-2 py-1 rounded-full lg:text-sm lg:px-3 lg:py-1 ".concat((e=>{switch(e){case"home":return"bg-blue-100 text-blue-600";case"factory":return"bg-gray-100 text-gray-600";case"supermarket":return"bg-purple-100 text-purple-600";case"retail":return"bg-pink-100 text-pink-600";default:return"bg-orange-100 text-orange-600"}})(t.provider_type||t.provider)),children:(e=>{switch(e){case"home":return"Home Kitchen";case"factory":return"Food Factory";case"supermarket":return"Supermarket";case"retail":return"Retail Shop";default:return"Restaurant"}})(t.provider_type||t.provider)})]}),(0,R.jsxs)("div",{className:"space-y-3 mb-6 lg:space-y-4",children:[(0,R.jsx)("div",{className:"text-center",children:(0,R.jsx)("p",{className:"text-gray-600 text-sm lg:text-base",children:t.description||"No description available"})}),(0,R.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-center",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"font-bold text-green-600 lg:text-lg",children:0===(t.discounted_price||t.discountedPrice||0)?"FREE":"UGX ".concat((t.discounted_price||t.discountedPrice||0).toLocaleString())}),(0,R.jsx)("div",{className:"text-xs text-gray-500 lg:text-sm",children:0===(t.discounted_price||t.discountedPrice||0)?"No Cost":"Discounted Price"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"font-bold text-orange-600 lg:text-lg",children:t.quantity||t.available_quantity||0}),(0,R.jsx)("div",{className:"text-xs text-gray-500 lg:text-sm",children:"Plates Left"})]})]}),(0,R.jsx)("div",{className:"text-center",children:(0,R.jsxs)("div",{className:"text-sm text-green-600 lg:text-base",children:["\ud83c\udf31 ",t.co2_saved||t.co2Saved||0,"kg CO\u2082 saved \u2022 ",(10*(t.co2_saved||t.co2Saved||0)).toFixed(0),"L water saved"]})})]}),(0,R.jsx)("button",{onClick:()=>r(t),className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors lg:py-4 lg:text-lg",children:"Reserve Item"})]})})})},he=C("mail",[["path",{d:"m22 7-8.991 5.727a2 2 0 0 1-2.009 0L2 7",key:"132q7q"}],["rect",{x:"2",y:"4",width:"20",height:"16",rx:"2",key:"izxlao"}]]),ge=C("lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),xe=C("eye-off",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]),ye=C("eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),ve=C("log-in",[["path",{d:"m10 17 5-5-5-5",key:"1bsop3"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}]]),be=e=>{let{onLogin:t,onSwitchToRegister:n,isLoading:a,onClose:s}=e;const[i,l]=(0,r.useState)({email:"",password:""}),[o,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)({}),f=e=>{const{name:t,value:n}=e.target;l(e=>c(c({},e),{},{[t]:n})),u[t]&&m(e=>c(c({},e),{},{[t]:""}))};return(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-6 w-full max-w-md mx-auto relative",children:[(0,R.jsx)("button",{onClick:()=>{"function"===typeof s?s():console.warn("onClose function is not defined in LoginForm")},className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-lg hover:bg-gray-50 transition-colors z-10",children:(0,R.jsx)(F,{size:18,className:"text-gray-600"})}),(0,R.jsxs)("div",{className:"text-center mb-6",children:[(0,R.jsx)("div",{className:"text-4xl mb-2",children:"\ud83c\udf0d"}),(0,R.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:"Welcome Back"}),(0,R.jsx)("p",{className:"text-gray-600",children:"Sign in to your KindBite account"})]}),(0,R.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return i.email?/\S+@\S+\.\S+/.test(i.email)||(e.email="Email is invalid"):e.email="Email is required",i.password?i.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",m(e),0===Object.keys(e).length})()&&t(i)},className:"space-y-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(he,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:"email",name:"email",value:i.email,onChange:f,className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(u.email?"border-red-500":"border-gray-300"),placeholder:"Enter your email"})]}),u.email&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:u.email})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(ge,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:o?"text":"password",name:"password",value:i.password,onChange:f,className:"w-full pl-10 pr-12 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(u.password?"border-red-500":"border-gray-300"),placeholder:"Enter your password"}),(0,R.jsx)("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:o?(0,R.jsx)(xe,{size:20}):(0,R.jsx)(ye,{size:20})})]}),u.password&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:u.password})]}),(0,R.jsx)("button",{type:"submit",disabled:a,className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?(0,R.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(ve,{size:20}),(0,R.jsx)("span",{children:"Sign In"})]})})]}),(0,R.jsx)("div",{className:"mt-6 text-center",children:(0,R.jsxs)("p",{className:"text-gray-600",children:["Don't have an account?"," ",(0,R.jsx)("button",{onClick:n,className:"text-green-600 hover:text-green-700 font-semibold",children:"Sign up here"})]})})]})},we=C("phone",[["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]]),je=C("map-pin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),Ne=C("user-plus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),ke=e=>{let{onRegister:t,onSwitchToLogin:n,isLoading:a,onClose:s}=e;const[i,l]=(0,r.useState)({first_name:"",last_name:"",email:"",password:"",password_confirm:"",phone:"",location:"",business_name:"",user_role:"end-user"}),[o,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)({}),h=[{value:"end-user",label:"Food Seeker",icon:"\ud83d\udc64",description:"Looking for affordable food"},{value:"restaurant",label:"Restaurant",icon:"\ud83c\udf7d\ufe0f",description:"Food establishment with surplus meals"},{value:"home",label:"Home Kitchen",icon:"\ud83c\udfe0",description:"Community member sharing home-cooked meals"},{value:"factory",label:"Food Factory",icon:"\ud83c\udfed",description:"Production facility with surplus products"},{value:"supermarket",label:"Supermarket",icon:"\ud83d\uded2",description:"Large retail store with clearance items"},{value:"retail",label:"Retail Shop",icon:"\ud83c\udfea",description:"Small shop or caf\xe9 with surplus items"},{value:"verifier",label:"Food Verifier",icon:"\ud83e\ude7a",description:"Volunteer doctor ensuring food safety"},{value:"ambassador",label:"Food Ambassador",icon:"\u2705",description:"Community volunteer facilitating connections"},{value:"donor",label:"Donor/Buyer",icon:"\ud83d\udcb0",description:"Financial supporter or bulk buyer"}],g=e=>{const{name:t,value:n}=e.target;l(e=>c(c({},e),{},{[t]:n})),f[t]&&p(e=>c(c({},e),{},{[t]:""}))};h.find(e=>e.value===i.userRole);return(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 w-full max-w-2xl mx-auto relative",children:[(0,R.jsx)("button",{onClick:()=>{"function"===typeof s?s():console.warn("onClose function is not defined in RegisterForm")},className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-lg hover:bg-gray-50 transition-colors z-10",children:(0,R.jsx)(F,{size:18,className:"text-gray-600"})}),(0,R.jsxs)("div",{className:"text-center mb-4",children:[(0,R.jsx)("div",{className:"text-3xl mb-2",children:"\ud83c\udf0d"}),(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Join KindBite"}),(0,R.jsx)("p",{className:"text-gray-600 text-sm",children:"Create your account and start making a difference"})]}),(0,R.jsxs)("form",{onSubmit:e=>{e.preventDefault(),(()=>{const e={};return i.first_name.trim()||(e.first_name="First name is required"),i.last_name.trim()||(e.last_name="Last name is required"),i.email?/\S+@\S+\.\S+/.test(i.email)||(e.email="Email is invalid"):e.email="Email is required",i.password?i.password.length<6&&(e.password="Password must be at least 6 characters"):e.password="Password is required",i.password!==i.password_confirm&&(e.password_confirm="Passwords do not match"),i.phone.trim()||(e.phone="Phone number is required"),i.location.trim()||(e.location="Location is required"),["restaurant","factory","supermarket","retail"].includes(i.user_role)&&!i.business_name.trim()&&(e.business_name="Business name is required for this role"),p(e),0===Object.keys(e).length})()&&t(i)},className:"space-y-3",children:[(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(K,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:"text",name:"first_name",value:i.first_name,onChange:g,className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(f.first_name?"border-red-500":"border-gray-300"),placeholder:"Enter your first name"})]}),f.first_name&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.first_name})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(K,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:"text",name:"last_name",value:i.last_name,onChange:g,className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(f.last_name?"border-red-500":"border-gray-300"),placeholder:"Enter your last name"})]}),f.last_name&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.last_name})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(he,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:"email",name:"email",value:i.email,onChange:g,className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(f.email?"border-red-500":"border-gray-300"),placeholder:"Enter your email"})]}),f.email&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.email})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(we,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:"tel",name:"phone",value:i.phone,onChange:g,className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(f.phone?"border-red-500":"border-gray-300"),placeholder:"Enter your phone number"})]}),f.phone&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.phone})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(je,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:"text",name:"location",value:i.location,onChange:g,className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(f.location?"border-red-500":"border-gray-300"),placeholder:"Enter your city or area"})]}),f.location&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.location})]}),["restaurant","factory","supermarket","retail"].includes(i.user_role)&&(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(ie,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:"text",name:"business_name",value:i.business_name,onChange:g,className:"w-full pl-10 pr-4 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(f.business_name?"border-red-500":"border-gray-300"),placeholder:"Enter your business name"})]}),f.business_name&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.business_name})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"I am a..."}),(0,R.jsx)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-2 max-h-40 overflow-y-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitScrollbar:{display:"none"}},children:h.map(e=>(0,R.jsx)("button",{type:"button",onClick:()=>l(t=>c(c({},t),{},{user_role:e.value})),className:"p-1.5 border-2 rounded-lg text-left transition-all ".concat(i.user_role===e.value?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),children:(0,R.jsxs)("div",{className:"flex items-center space-x-1.5",children:[(0,R.jsx)("span",{className:"text-base",children:e.icon}),(0,R.jsxs)("div",{className:"min-w-0 flex-1",children:[(0,R.jsx)("div",{className:"font-semibold text-gray-800 text-xs truncate",children:e.label}),(0,R.jsx)("div",{className:"text-xs text-gray-600 line-clamp-1",children:e.description})]})]})},e.value))})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Password"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(ge,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:o?"text":"password",name:"password",value:i.password,onChange:g,className:"w-full pl-10 pr-12 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(f.password?"border-red-500":"border-gray-300"),placeholder:"Create a password"}),(0,R.jsx)("button",{type:"button",onClick:()=>d(!o),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:o?(0,R.jsx)(xe,{size:20}):(0,R.jsx)(ye,{size:20})})]}),f.password&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.password})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm Password"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)(ge,{className:"absolute left-3 top-3 text-gray-400 w-5 h-5"}),(0,R.jsx)("input",{type:u?"text":"password",name:"password_confirm",value:i.password_confirm,onChange:g,className:"w-full pl-10 pr-12 py-3 border rounded-lg focus:outline-none focus:ring-2 focus:ring-green-500 ".concat(f.password_confirm?"border-red-500":"border-gray-300"),placeholder:"Confirm your password"}),(0,R.jsx)("button",{type:"button",onClick:()=>m(!u),className:"absolute right-3 top-3 text-gray-400 hover:text-gray-600",children:u?(0,R.jsx)(xe,{size:20}):(0,R.jsx)(ye,{size:20})})]}),f.password_confirm&&(0,R.jsx)("p",{className:"text-red-500 text-sm mt-1",children:f.password_confirm})]})]}),(0,R.jsx)("button",{type:"submit",disabled:a,className:"w-full bg-green-600 text-white py-2 rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:a?(0,R.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Ne,{size:20}),(0,R.jsx)("span",{children:"Create Account"})]})})]}),(0,R.jsx)("div",{className:"mt-4 text-center",children:(0,R.jsxs)("p",{className:"text-gray-600 text-sm",children:["Already have an account?"," ",(0,R.jsx)("button",{onClick:n,className:"text-green-600 hover:text-green-700 font-semibold",children:"Sign in here"})]})})]})},_e=e=>{let{isOpen:t,onClose:n,onLogin:a,onRegister:s,initialMode:i="login"}=e;const[l,o]=(0,r.useState)("login"===i),[c,d]=(0,r.useState)(!1);(0,r.useEffect)(()=>{o("login"===i)},[i]);const u=()=>{"function"===typeof n?n():console.warn("onClose function is not defined")};if(!t)return null;return(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,R.jsx)("div",{className:"relative w-full max-w-2xl sm:max-w-4xl max-h-[95vh] sm:max-h-[90vh] overflow-y-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitScrollbar:{display:"none"}},children:l?(0,R.jsx)(be,{onLogin:async e=>{d(!0);try{await a(e),u()}catch(t){console.error("Login error:",t)}finally{d(!1)}},onSwitchToRegister:()=>{o(!1)},isLoading:c,onClose:u}):(0,R.jsx)(ke,{onRegister:async e=>{d(!0);try{await s(e),u()}catch(t){console.error("Registration error:",t)}finally{d(!1)}},onSwitchToLogin:()=>{o(!0)},isLoading:c,onClose:u})})})},Se=C("heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]),Ee=C("leaf",[["path",{d:"M11 20A7 7 0 0 1 9.8 6.1C15.5 5 17 4.48 19 2c1 2 2 4.18 2 8 0 5.5-4.78 10-10 10Z",key:"nnexq3"}],["path",{d:"M2 21c0-3 1.85-5.36 5.08-6C9.5 14.52 12 13 13 12",key:"mt58a7"}]]),Ce=C("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Pe=e=>{let{onGetStarted:t,onLogin:n,onSignup:a}=e;const[s,i]=(0,r.useState)(null),l=e=>{i(t=>t===e?null:e)};return(0,R.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50",children:[(0,R.jsx)("header",{className:"bg-white shadow-sm",children:(0,R.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:(0,R.jsxs)("div",{className:"flex justify-between items-center py-6",children:[(0,R.jsx)("div",{className:"flex items-center",children:(0,R.jsx)("div",{className:"flex-shrink-0",children:(0,R.jsx)("h1",{className:"text-2xl font-bold text-green-600",children:"KindBite"})})}),(0,R.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,R.jsx)("button",{onClick:n,className:"text-gray-700 hover:text-green-600 px-3 py-2 rounded-md text-sm font-medium transition-colors duration-200",children:"Login"}),(0,R.jsx)("button",{onClick:a,className:"bg-green-500 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-green-600 transition-colors duration-200",children:"Sign Up"})]})]})})}),(0,R.jsx)("div",{className:"flex items-center justify-center p-4 min-h-[calc(100vh-80px)]",children:(0,R.jsxs)("div",{className:"max-w-4xl mx-auto text-center",children:[(0,R.jsxs)("div",{className:"mb-8",children:[(0,R.jsx)("div",{className:"text-8xl mb-4",children:"\ud83c\udf0d"}),(0,R.jsx)("h1",{className:"text-5xl font-bold text-gray-800 mb-4",children:"KindBite"}),(0,R.jsx)("p",{className:"text-xl text-gray-600 mb-8 max-w-2xl mx-auto",children:"Connecting Hearts, Reducing Waste, Fighting Hunger"})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 mb-12",children:[(0,R.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,R.jsx)(ee,{className:"w-12 h-12 text-green-600 mx-auto mb-4"}),(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Community Driven"}),(0,R.jsx)("p",{className:"text-gray-600",children:"Join a network of restaurants, home kitchens, factories, and volunteers working together to reduce food waste."})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,R.jsx)(Se,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Fight Hunger"}),(0,R.jsx)("p",{className:"text-gray-600",children:"Help provide affordable meals to those in need while supporting local businesses and reducing waste."})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg p-6 shadow-lg",children:[(0,R.jsx)(Ee,{className:"w-12 h-12 text-green-500 mx-auto mb-4"}),(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Save the Planet"}),(0,R.jsx)("p",{className:"text-gray-600",children:"Track your environmental impact and earn KindCoins for every meal saved and CO\u2082 prevented."})]})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg p-8 shadow-lg mb-8",children:[(0,R.jsx)("h2",{className:"text-2xl font-bold text-gray-800 mb-4",children:"Join Our Ecosystem"}),(0,R.jsx)("div",{className:"flex flex-wrap gap-4 items-start",children:[{key:"restaurants",icon:"\ud83c\udf7d\ufe0f",title:"Restaurants",summary:"List surplus meals, set pickup times, and reduce daily waste.",details:["Post discounted surplus meals in minutes","Control pickup windows and quantities","Earn KindCoins and community recognition"]},{key:"home_kitchens",icon:"\ud83c\udfe0",title:"Home Kitchens",summary:"Share extra portions safely with nearby neighbors.",details:["Verified guidelines for safe sharing","Limit by day and portion size","Support local families and reduce waste"]},{key:"factories",icon:"\ud83c\udfed",title:"Food Factories",summary:"Move excess inventory quickly to nonprofits and buyers.",details:["Bulk listings via CSV/API","Automated pickup and logistics matching","Compliance-friendly donation receipts"]},{key:"supermarkets",icon:"\ud83d\uded2",title:"Supermarkets",summary:"Clear near-expiry goods and reward eco\u2011friendly shoppers.",details:["Dynamic markdowns for near-expiry items","Local pickup scheduling","Impact analytics and leaderboards"]},{key:"retail",icon:"\ud83c\udfea",title:"Retail Shops",summary:"Bundle slow movers into value packs for the community.",details:["Create limited-time bundles","Drive foot traffic with pickups","Earn KindCoins for sustainability"]},{key:"verifiers",icon:"\ud83e\ude7a",title:"Verifiers",summary:"Verify recipients and report safety/quality checks.",details:["Simple verification flows","Anonymous issue reporting","Community trust building"]},{key:"ambassadors",icon:"\u2705",title:"Ambassadors",summary:"Onboard new partners and host local food-rescue drives.",details:["Invite and mentor local partners","Host monthly rescue events","Earn badges and KindCoins"]},{key:"donors",icon:"\ud83d\udcb0",title:"Donors",summary:"Sponsor meals and CO\u2082 savings where they matter most.",details:["Fund targeted rescue campaigns","Transparent impact reporting","Tax-friendly receipts (where applicable)"]}].map(e=>{const t=s===e.key;return(0,R.jsx)("div",{className:"basis-full sm:basis-[calc((100%_-_1rem_*_2)_/_3)] flex-grow-0 flex-shrink-0",children:(0,R.jsxs)("div",{className:"border rounded-lg",children:[(0,R.jsxs)("button",{type:"button",className:"w-full flex items-center justify-between p-4 text-left focus:outline-none focus:ring-2 focus:ring-green-500 rounded-lg ".concat(t?"bg-green-50":"bg-white"),"aria-expanded":t,"aria-controls":"ecosystem-panel-".concat(e.key),onClick:()=>l(e.key),onKeyDown:t=>{"Enter"!==t.key&&" "!==t.key||(t.preventDefault(),l(e.key))},children:[(0,R.jsxs)("span",{className:"flex items-center space-x-3",children:[(0,R.jsx)("span",{className:"text-2xl","aria-hidden":"true",children:e.icon}),(0,R.jsx)("span",{className:"font-medium text-gray-800",children:e.title})]}),(0,R.jsx)(Ce,{className:"w-5 h-5 text-gray-500 transition-transform duration-200 ".concat(t?"rotate-180":""),"aria-hidden":"true"})]}),(0,R.jsx)("div",{id:"ecosystem-panel-".concat(e.key),className:"overflow-hidden transition-all duration-300 ".concat(t?"max-h-96 opacity-100":"max-h-0 opacity-0"),children:(0,R.jsxs)("div",{className:"px-4 pb-4 text-sm text-gray-600",children:[(0,R.jsx)("p",{className:"mb-2",children:e.summary}),(0,R.jsx)("ul",{className:"list-disc pl-5 space-y-1",children:e.details.map((e,t)=>(0,R.jsx)("li",{children:e},t))})]})})]})},e.key)})})]}),(0,R.jsxs)("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[(0,R.jsxs)("button",{onClick:t,className:"bg-green-600 text-white px-8 py-4 rounded-lg font-semibold text-lg hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[(0,R.jsx)(te,{className:"w-6 h-6"}),(0,R.jsx)("span",{children:"Get Started"})]}),(0,R.jsx)("button",{className:"border-2 border-green-600 text-green-600 px-8 py-4 rounded-lg font-semibold text-lg hover:bg-green-50 transition-colors",children:"Learn More"})]}),(0,R.jsx)("div",{className:"mt-12 text-center",children:(0,R.jsxs)("p",{className:"text-gray-500 text-sm",children:["Already making a difference? ",(0,R.jsx)("span",{className:"text-green-600 font-semibold",children:"28,456+ items rescued"})," and counting!"]})})]})})]})},Ae=C("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]),Te=C("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),Le=C("square-pen",[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]]),Fe=C("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]),Re=C("tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]),Ie=C("dollar-sign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]),Oe=C("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Me=C("image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),ze=C("camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);const De=new class{async getFoodListings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.keys(e).forEach(n=>{null!==e[n]&&void 0!==e[n]&&""!==e[n]&&t.append(n,e[n])});const n=t.toString(),r=n?"".concat(p.LISTINGS,"?").concat(n):p.LISTINGS;return await b.request(r,{requiresAuth:!0})}catch(t){throw console.error("Error fetching food listings:",t),t}}async getAllFoodListings(){try{return await b.request(p.LISTINGS,{requiresAuth:!0})}catch(e){throw console.error("Error fetching all food listings:",e),e}}async getAvailableFoodListingsForSeekers(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.keys(e).forEach(n=>{null!==e[n]&&void 0!==e[n]&&""!==e[n]&&t.append(n,e[n])});const n=t.toString(),r=n?"".concat(p.AVAILABLE,"?").concat(n):p.AVAILABLE;return await b.request(r,{requiresAuth:!0})}catch(t){throw console.error("Error fetching available food listings for seekers:",t),t}}async getAvailableFoodListings(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.keys(e).forEach(n=>{null!==e[n]&&void 0!==e[n]&&""!==e[n]&&t.append(n,e[n])});const n=t.toString(),r=n?"".concat(p.SEARCH,"?").concat(n):p.SEARCH;return await b.request(r,{requiresAuth:!0})}catch(t){throw console.error("Error fetching available food listings:",t),t}}async getMyFoodListings(){try{return await b.request(p.LISTINGS,{requiresAuth:!0})}catch(e){throw console.error("Error fetching my food listings:",e),e}}async getFoodListing(e){try{return await b.request(p.LISTING_DETAIL(e),{requiresAuth:!0})}catch(t){throw console.error("Error fetching food listing:",t),t}}async createFoodListing(e){try{return await b.request(p.LISTINGS,{method:"POST",body:JSON.stringify(e),requiresAuth:!0})}catch(t){throw console.error("Error creating food listing:",t),t}}async updateFoodListing(e,t){try{return await b.request(p.LISTING_DETAIL(e),{method:"PUT",body:JSON.stringify(t),requiresAuth:!0})}catch(n){throw console.error("Error updating food listing:",n),n}}async deleteFoodListing(e){try{return await b.request(p.LISTING_DETAIL(e),{method:"DELETE",requiresAuth:!0})}catch(t){throw console.error("Error deleting food listing:",t),t}}async createReservation(e){try{const t={food_listing_id:e.food_listing,quantity_reserved:e.quantity_reserved,special_instructions:e.special_instructions||""};return await b.request(p.RESERVATION_CREATE,{method:"POST",body:JSON.stringify(t),requiresAuth:!0})}catch(t){throw console.error("Error creating reservation:",t),t}}async getUserReservations(){try{return await b.request(p.MY_RESERVATIONS,{requiresAuth:!0})}catch(e){throw console.error("Error fetching user reservations:",e),e}}async updateReservationStatus(e,t){try{return await b.request(p.UPDATE_RESERVATION_STATUS(e),{method:"PATCH",body:JSON.stringify({status:t}),requiresAuth:!0})}catch(n){throw console.error("Error updating reservation status:",n),n}}async getFoodStats(){try{return await b.request(p.STATS,{requiresAuth:!0})}catch(e){throw console.error("Error fetching food stats:",e),e}}async searchFoodListings(e){try{const t=new URLSearchParams;Object.keys(e).forEach(n=>{null!==e[n]&&void 0!==e[n]&&""!==e[n]&&t.append(n,e[n])});const n=t.toString(),r=n?"".concat(p.SEARCH,"?").concat(n):p.SEARCH;return await b.request(r,{requiresAuth:!0})}catch(t){throw console.error("Error searching food listings:",t),t}}async getFoodListingsByProvider(e){try{return await this.getAvailableFoodListings({provider_type:e})}catch(t){throw console.error("Error fetching food listings by provider:",t),t}}async getNearbyFoodListings(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10;try{return await this.getAvailableFoodListings({latitude:e,longitude:t,distance_km:n})}catch(r){throw console.error("Error fetching nearby food listings:",r),r}}async getFreeFoodListings(){try{return await this.getAvailableFoodListings({is_free:"true"})}catch(e){throw console.error("Error fetching free food listings:",e),e}}},qe=e=>{let{isOpen:t,onClose:n,onFoodAdded:a}=e;const[s,i]=(0,r.useState)({name:"",restaurant_name:"",description:"",original_price:"",discounted_price:"",quantity:"",pickup_date:"",pickup_window_start:"",pickup_window_end:"",location:"",dietary_info:[],image_emoji:"\ud83c\udf7d\ufe0f",co2_saved:"0"}),[l,o]=(0,r.useState)(!1),[d,u]=(0,r.useState)({}),[m,f]=(0,r.useState)([]),[p,h]=(0,r.useState)(null),[g,x]=(0,r.useState)(!1),[y,v]=(0,r.useState)([]),b=M(),w=e=>{const{name:t,value:n}=e.target;i(e=>c(c({},e),{},{[t]:n})),d[t]&&u(e=>c(c({},e),{},{[t]:""}))},j=()=>{i({name:"",restaurant_name:"",description:"",original_price:"",discounted_price:"",quantity:"",pickup_date:"",pickup_window_start:"",pickup_window_end:"",location:"",dietary_info:[],image_emoji:"\ud83c\udf7d\ufe0f",co2_saved:"0"}),u({}),f([]),h(null),x(!1),v([]),n()};return t?(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(Te,{className:"w-6 h-6 text-green-600"}),(0,R.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Add Food Item"})]}),(0,R.jsx)("button",{onClick:j,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,R.jsx)(F,{className:"w-5 h-5"})})]}),(0,R.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(s.name.trim()||(e.name="Food name is required"),s.restaurant_name.trim()||(e.restaurant_name="Restaurant name is required"),s.description.trim()||(e.description="Description is required"),(!s.original_price||parseFloat(s.original_price)<=0)&&(e.original_price="Original price must be greater than 0"),(!s.discounted_price||parseFloat(s.discounted_price)<0)&&(e.discounted_price="Discounted price cannot be negative"),parseFloat(s.discounted_price)>parseFloat(s.original_price)&&(e.discounted_price="Discounted price cannot be higher than original price"),(!s.quantity||parseInt(s.quantity)<=0)&&(e.quantity="Quantity must be at least 1"),s.pickup_date||(e.pickup_date="Pickup date is required"),s.pickup_window_start||(e.pickup_window_start="Pickup start time is required"),s.pickup_window_end||(e.pickup_window_end="Pickup end time is required"),s.location.trim()||(e.location="Location is required"),s.pickup_window_start&&s.pickup_window_end&&s.pickup_window_start>=s.pickup_window_end&&(e.pickup_window_end="End time must be after start time"),s.pickup_date){const t=new Date(s.pickup_date),n=new Date;n.setHours(0,0,0,0),t<n&&(e.pickup_date="Pickup date cannot be in the past")}return u(e),0===Object.keys(e).length})()){o(!0);try{const e={name:s.name,restaurant_name:s.restaurant_name,description:s.description,original_price:parseFloat(s.original_price),discounted_price:parseFloat(s.discounted_price),quantity:parseInt(s.quantity),pickup_date:s.pickup_date,pickup_window_start:s.pickup_window_start,pickup_window_end:s.pickup_window_end,location:s.location,dietary_info:s.dietary_info,image_emoji:s.image_emoji,co2_saved:parseFloat(s.co2_saved)},n=await De.createFoodListing(e);if(h(n.id),y&&y.length>0)try{for(const e of y){const t=new FormData;t.append("image",e),t.append("alt_text",e.name),t.append("is_primary",0===y.indexOf(e)),await fetch("http://localhost:8000/api/foods/images/".concat(n.id,"/upload/"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("kindbite_access_token"))},body:t})}b.success("Food item and images uploaded successfully!")}catch(t){console.error("Error uploading images:",t),b.success("Food item added successfully, but there was an error uploading images.")}else b.success("Food item added successfully!");a(n,y),j()}catch(n){console.error("Error adding food:",n),b.error(n.message||"Failed to add food item. Please try again.")}finally{o(!1)}}else b.error("Please fix the errors in the form")},className:"p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(Re,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Basic Information"})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Name *"}),(0,R.jsx)("input",{type:"text",name:"name",value:s.name,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.name?"border-red-500":"border-gray-300"),placeholder:"e.g., Mixed Rice & Chicken"}),d.name&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.name})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Restaurant/Business Name *"}),(0,R.jsx)("input",{type:"text",name:"restaurant_name",value:s.restaurant_name,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.restaurant_name?"border-red-500":"border-gray-300"),placeholder:"e.g., Mama's Kitchen"}),d.restaurant_name&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.restaurant_name})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,R.jsx)("textarea",{name:"description",value:s.description,onChange:w,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.description?"border-red-500":"border-gray-300"),placeholder:"Describe the food item..."}),d.description&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.description})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(Ie,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Pricing"})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price (UGX) *"}),(0,R.jsx)("input",{type:"number",name:"original_price",value:s.original_price,onChange:w,min:"0",step:"100",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.original_price?"border-red-500":"border-gray-300"),placeholder:"15000"}),d.original_price&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.original_price})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discounted Price (UGX) *"}),(0,R.jsx)("input",{type:"number",name:"discounted_price",value:s.discounted_price,onChange:w,min:"0",step:"100",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.discounted_price?"border-red-500":"border-gray-300"),placeholder:"5000"}),d.discounted_price&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.discounted_price})]})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(Oe,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Availability"})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),(0,R.jsx)("input",{type:"number",name:"quantity",value:s.quantity,onChange:w,min:"1",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.quantity?"border-red-500":"border-gray-300"),placeholder:"8"}),d.quantity&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.quantity})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Date *"}),(0,R.jsx)("input",{type:"date",name:"pickup_date",value:s.pickup_date,onChange:w,min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.pickup_date?"border-red-500":"border-gray-300")}),d.pickup_date&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.pickup_date})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CO2 Saved (kg)"}),(0,R.jsx)("input",{type:"number",name:"co2_saved",value:s.co2_saved,onChange:w,min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500",placeholder:"2.4"})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Start Time *"}),(0,R.jsx)("input",{type:"time",name:"pickup_window_start",value:s.pickup_window_start,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.pickup_window_start?"border-red-500":"border-gray-300")}),d.pickup_window_start&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.pickup_window_start})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup End Time *"}),(0,R.jsx)("input",{type:"time",name:"pickup_window_end",value:s.pickup_window_end,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.pickup_window_end?"border-red-500":"border-gray-300")}),d.pickup_window_end&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.pickup_window_end})]})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(je,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Location"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Location *"}),(0,R.jsx)("input",{type:"text",name:"location",value:s.location,onChange:w,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-green-500 focus:border-green-500 ".concat(d.location?"border-red-500":"border-gray-300"),placeholder:"e.g., Nakasero, Kampala"}),d.location&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:d.location})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(Ee,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Dietary Information"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select applicable dietary options"}),(0,R.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Halal","Vegetarian","Vegan","Gluten-Free","Dairy-Free","Nut-Free","Organic","Contains Gluten","Vegetarian Options"].map(e=>(0,R.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,R.jsx)("input",{type:"checkbox",checked:s.dietary_info.includes(e),onChange:()=>{return t=e,void i(e=>c(c({},e),{},{dietary_info:e.dietary_info.includes(t)?e.dietary_info.filter(e=>e!==t):[...e.dietary_info,t]}));var t},className:"w-4 h-4 text-green-600 border-gray-300 rounded focus:ring-green-500"}),(0,R.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Food Image"}),(0,R.jsxs)("div",{className:"flex space-x-2 mb-3",children:[(0,R.jsxs)("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(g?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-green-500 text-white"),children:[(0,R.jsx)(Me,{className:"w-4 h-4 inline mr-2"}),"Emoji"]}),(0,R.jsxs)("button",{type:"button",onClick:()=>x(!0),className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors ".concat(g?"bg-green-500 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,R.jsx)(ze,{className:"w-4 h-4 inline mr-2"}),"Upload Image"]})]}),g?(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("div",{className:"text-center text-gray-600 mb-4",children:[(0,R.jsx)(ze,{className:"w-8 h-8 mx-auto mb-2 text-green-500"}),(0,R.jsx)("p",{className:"text-sm font-medium",children:"Upload Food Images"}),(0,R.jsx)("p",{className:"text-xs text-gray-500",children:"Select up to 5 images (5MB each)"})]}),(0,R.jsxs)("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-green-400 transition-colors",children:[(0,R.jsx)("input",{type:"file",multiple:!0,accept:"image/*",onChange:e=>{const t=Array.from(e.target.files);if(y.length+t.length>5)return void alert("You can only upload up to 5 images.");const n=t.filter(e=>e.type.startsWith("image/")?!(e.size>5242880)||(alert("".concat(e.name," is too large. Please choose a file smaller than 5MB.")),!1):(alert("".concat(e.name," is not an image file.")),!1));v(e=>[...e,...n])},className:"hidden",id:"image-upload"}),(0,R.jsx)("label",{htmlFor:"image-upload",className:"cursor-pointer block",children:(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsx)("div",{className:"mx-auto w-12 h-12 bg-gray-100 rounded-full flex items-center justify-center",children:(0,R.jsx)(Me,{className:"w-6 h-6 text-gray-400"})}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm font-medium text-gray-700",children:"Click to select images"}),(0,R.jsx)("p",{className:"text-xs text-gray-500",children:"or drag and drop images here"})]})]})})]}),y.length>0&&(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsxs)("p",{className:"text-sm font-medium text-gray-700",children:["Selected Images (",y.length,"/5):"]}),(0,R.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:y.map((e,t)=>(0,R.jsxs)("div",{className:"relative group",children:[(0,R.jsx)("img",{src:URL.createObjectURL(e),alt:"Preview ".concat(t+1),className:"w-full h-24 object-cover rounded-lg border border-gray-200"}),(0,R.jsx)("button",{type:"button",onClick:()=>(e=>{v(t=>t.filter((t,n)=>n!==e))})(t),className:"absolute top-1 right-1 bg-red-500 text-white p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity",children:(0,R.jsx)(F,{size:12})})]},t))})]})]}):(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose an emoji for your food item"}),(0,R.jsx)("div",{className:"grid grid-cols-10 gap-2",children:["\ud83c\udf7d\ufe0f","\ud83c\udf5b","\ud83e\udd57","\ud83c\udf5e","\ud83e\udd6a","\ud83c\udf55","\ud83c\udf5c","\ud83c\udf72","\ud83e\udd58","\ud83c\udf71","\ud83c\udf70","\ud83e\uddc1","\ud83c\udf6a","\ud83c\udf69","\ud83e\udd67","\ud83c\udf6e","\ud83c\udf6f","\ud83e\udd5b","\u2615","\ud83c\udf75"].map(e=>(0,R.jsx)("button",{type:"button",onClick:()=>i(t=>c(c({},t),{},{image_emoji:e})),className:"w-10 h-10 text-2xl border-2 rounded-lg flex items-center justify-center transition-colors ".concat(s.image_emoji===e?"border-green-500 bg-green-50":"border-gray-300 hover:border-gray-400"),children:e},e))})]})]}),(0,R.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,R.jsx)("button",{type:"button",onClick:j,className:"px-6 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,R.jsx)("button",{type:"submit",disabled:l,className:"px-6 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:l?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,R.jsx)("span",{children:"Adding..."})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Te,{className:"w-4 h-4"}),(0,R.jsx)("span",{children:"Add Food Item"})]})})]})]})]})}):null},Ue=e=>{let{isOpen:t,onClose:n,onFoodUpdated:a,foodItem:s}=e;const[i,l]=(0,r.useState)({name:"",restaurant_name:"",description:"",original_price:"",discounted_price:"",quantity:"",pickup_date:"",pickup_window_start:"",pickup_window_end:"",location:"",dietary_info:[],image_emoji:"\ud83c\udf7d\ufe0f",co2_saved:"0"}),[o,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)({}),f=M();(0,r.useEffect)(()=>{var e,t,n,r;s&&l({name:s.name||"",restaurant_name:s.restaurant||s.restaurant_name||"",description:s.description||"",original_price:(null===(e=s.originalPrice)||void 0===e?void 0:e.toString())||"",discounted_price:(null===(t=s.discountedPrice)||void 0===t?void 0:t.toString())||"",quantity:(null===(n=s.quantity)||void 0===n?void 0:n.toString())||"",pickup_date:s.pickupDate||"",pickup_window_start:s.pickupWindowStart||"",pickup_window_end:s.pickupWindowEnd||"",location:s.location||"",dietary_info:s.dietary||[],image_emoji:s.image||"\ud83c\udf7d\ufe0f",co2_saved:(null===(r=s.co2Saved)||void 0===r?void 0:r.toString())||"0"})},[s]);const p=e=>{const{name:t,value:n}=e.target;l(e=>c(c({},e),{},{[t]:n})),u[t]&&m(e=>c(c({},e),{},{[t]:""}))},h=()=>{l({name:"",restaurant_name:"",description:"",original_price:"",discounted_price:"",quantity:"",pickup_date:"",pickup_window_start:"",pickup_window_end:"",location:"",dietary_info:[],image_emoji:"\ud83c\udf7d\ufe0f",co2_saved:"0"}),m({}),n()};return t&&s?(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(Le,{className:"w-6 h-6 text-blue-600"}),(0,R.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Edit Food Item"})]}),(0,R.jsx)("button",{onClick:h,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,R.jsx)(F,{className:"w-5 h-5"})})]}),(0,R.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),(()=>{const e={};if(i.name.trim()||(e.name="Food name is required"),i.restaurant_name.trim()||(e.restaurant_name="Restaurant name is required"),i.description.trim()||(e.description="Description is required"),(!i.original_price||parseFloat(i.original_price)<=0)&&(e.original_price="Original price must be greater than 0"),(!i.discounted_price||parseFloat(i.discounted_price)<0)&&(e.discounted_price="Discounted price cannot be negative"),parseFloat(i.discounted_price)>parseFloat(i.original_price)&&(e.discounted_price="Discounted price cannot be higher than original price"),(!i.quantity||parseInt(i.quantity)<=0)&&(e.quantity="Quantity must be at least 1"),i.pickup_date||(e.pickup_date="Pickup date is required"),i.pickup_window_start||(e.pickup_window_start="Pickup start time is required"),i.pickup_window_end||(e.pickup_window_end="Pickup end time is required"),i.location.trim()||(e.location="Location is required"),i.pickup_window_start&&i.pickup_window_end&&i.pickup_window_start>=i.pickup_window_end&&(e.pickup_window_end="End time must be after start time"),i.pickup_date){const t=new Date(i.pickup_date),n=new Date;n.setHours(0,0,0,0),t<n&&(e.pickup_date="Pickup date cannot be in the past")}return m(e),0===Object.keys(e).length})()){d(!0);try{const e={name:i.name,restaurant:i.restaurant_name,description:i.description,originalPrice:parseFloat(i.original_price),discountedPrice:parseFloat(i.discounted_price),quantity:parseInt(i.quantity),pickupDate:i.pickup_date,pickupWindowStart:i.pickup_window_start,pickupWindowEnd:i.pickup_window_end,location:i.location,dietary:i.dietary_info,image:i.image_emoji,co2Saved:parseFloat(i.co2_saved)},t=await De.updateFood(s.id,e);f.success("Food item updated successfully!"),a(t),h()}catch(t){console.error("Error updating food:",t),f.error(t.message||"Failed to update food item. Please try again.")}finally{d(!1)}}else f.error("Please fix the errors in the form")},className:"p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(Re,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Basic Information"})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Food Name *"}),(0,R.jsx)("input",{type:"text",name:"name",value:i.name,onChange:p,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.name?"border-red-500":"border-gray-300"),placeholder:"e.g., Mixed Rice & Chicken"}),u.name&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.name})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Restaurant/Business Name *"}),(0,R.jsx)("input",{type:"text",name:"restaurant_name",value:i.restaurant_name,onChange:p,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.restaurant_name?"border-red-500":"border-gray-300"),placeholder:"e.g., Mama's Kitchen"}),u.restaurant_name&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.restaurant_name})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),(0,R.jsx)("textarea",{name:"description",value:i.description,onChange:p,rows:3,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.description?"border-red-500":"border-gray-300"),placeholder:"Describe the food item..."}),u.description&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.description})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(Ie,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Pricing"})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Original Price (UGX) *"}),(0,R.jsx)("input",{type:"number",name:"original_price",value:i.original_price,onChange:p,min:"0",step:"100",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.original_price?"border-red-500":"border-gray-300"),placeholder:"15000"}),u.original_price&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.original_price})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discounted Price (UGX) *"}),(0,R.jsx)("input",{type:"number",name:"discounted_price",value:i.discounted_price,onChange:p,min:"0",step:"100",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.discounted_price?"border-red-500":"border-gray-300"),placeholder:"5000"}),u.discounted_price&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.discounted_price})]})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(Oe,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Availability"})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),(0,R.jsx)("input",{type:"number",name:"quantity",value:i.quantity,onChange:p,min:"1",className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.quantity?"border-red-500":"border-gray-300"),placeholder:"8"}),u.quantity&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.quantity})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Date *"}),(0,R.jsx)("input",{type:"date",name:"pickup_date",value:i.pickup_date,onChange:p,min:(new Date).toISOString().split("T")[0],className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.pickup_date?"border-red-500":"border-gray-300")}),u.pickup_date&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.pickup_date})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"CO2 Saved (kg)"}),(0,R.jsx)("input",{type:"number",name:"co2_saved",value:i.co2_saved,onChange:p,min:"0",step:"0.1",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"2.4"})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Start Time *"}),(0,R.jsx)("input",{type:"time",name:"pickup_window_start",value:i.pickup_window_start,onChange:p,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.pickup_window_start?"border-red-500":"border-gray-300")}),u.pickup_window_start&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.pickup_window_start})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup End Time *"}),(0,R.jsx)("input",{type:"time",name:"pickup_window_end",value:i.pickup_window_end,onChange:p,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.pickup_window_end?"border-red-500":"border-gray-300")}),u.pickup_window_end&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.pickup_window_end})]})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(je,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Location"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Pickup Location *"}),(0,R.jsx)("input",{type:"text",name:"location",value:i.location,onChange:p,className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 ".concat(u.location?"border-red-500":"border-gray-300"),placeholder:"e.g., Nakasero, Kampala"}),u.location&&(0,R.jsx)("p",{className:"text-red-500 text-xs mt-1",children:u.location})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("h3",{className:"text-lg font-medium text-gray-800 flex items-center space-x-2",children:[(0,R.jsx)(Ee,{className:"w-5 h-5"}),(0,R.jsx)("span",{children:"Dietary Information"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Select applicable dietary options"}),(0,R.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:["Halal","Vegetarian","Vegan","Gluten-Free","Dairy-Free","Nut-Free","Organic","Contains Gluten","Vegetarian Options"].map(e=>(0,R.jsxs)("label",{className:"flex items-center space-x-2 cursor-pointer",children:[(0,R.jsx)("input",{type:"checkbox",checked:i.dietary_info.includes(e),onChange:()=>{return t=e,void l(e=>c(c({},e),{},{dietary_info:e.dietary_info.includes(t)?e.dietary_info.filter(e=>e!==t):[...e.dietary_info,t]}));var t},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),(0,R.jsx)("span",{className:"text-sm text-gray-700",children:e})]},e))})]})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsx)("h3",{className:"text-lg font-medium text-gray-800",children:"Food Emoji"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Choose an emoji for your food item"}),(0,R.jsx)("div",{className:"grid grid-cols-10 gap-2",children:["\ud83c\udf7d\ufe0f","\ud83c\udf5b","\ud83e\udd57","\ud83c\udf5e","\ud83e\udd6a","\ud83c\udf55","\ud83c\udf5c","\ud83c\udf72","\ud83e\udd58","\ud83c\udf71","\ud83c\udf70","\ud83e\uddc1","\ud83c\udf6a","\ud83c\udf69","\ud83e\udd67","\ud83c\udf6e","\ud83c\udf6f","\ud83e\udd5b","\u2615","\ud83c\udf75"].map(e=>(0,R.jsx)("button",{type:"button",onClick:()=>l(t=>c(c({},t),{},{image_emoji:e})),className:"w-10 h-10 text-2xl border-2 rounded-lg flex items-center justify-center transition-colors ".concat(i.image_emoji===e?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"),children:e},e))})]})]}),(0,R.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t",children:[(0,R.jsx)("button",{type:"button",onClick:h,className:"px-6 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),(0,R.jsx)("button",{type:"submit",disabled:o,className:"px-6 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:o?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,R.jsx)("span",{children:"Updating..."})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Le,{className:"w-4 h-4"}),(0,R.jsx)("span",{children:"Update Food Item"})]})})]})]})]})}):null},He=C("triangle-alert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Ve=e=>{var t,n;let{isOpen:a,onClose:s,onFoodDeleted:i,foodItem:l}=e;const[o,c]=(0,r.useState)(!1),[d,u]=(0,r.useState)(""),m=M(),f="DELETE"===d,p=()=>{u(""),s()};return a&&l?(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-6 border-b",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(Fe,{className:"w-6 h-6 text-red-600"}),(0,R.jsx)("h2",{className:"text-xl font-semibold text-gray-800",children:"Delete Food Item"})]}),(0,R.jsx)("button",{onClick:p,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:(0,R.jsx)(F,{className:"w-5 h-5"})})]}),(0,R.jsxs)("div",{className:"p-6 space-y-4",children:[(0,R.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,R.jsx)(He,{className:"w-6 h-6 text-red-500 flex-shrink-0 mt-0.5"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-lg font-medium text-gray-800 mb-2",children:"Are you sure you want to delete this food item?"}),(0,R.jsx)("p",{className:"text-gray-600 text-sm",children:"This action cannot be undone. The food item will be permanently removed from your listings."})]})]}),(0,R.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 space-y-2",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)("span",{className:"text-2xl",children:l.image||"\ud83c\udf7d\ufe0f"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h4",{className:"font-medium text-gray-800",children:l.name}),(0,R.jsx)("p",{className:"text-sm text-gray-600",children:l.restaurant||l.restaurant_name})]})]}),(0,R.jsxs)("div",{className:"text-sm text-gray-600",children:[(0,R.jsxs)("p",{children:[(0,R.jsx)("span",{className:"font-medium",children:"Quantity:"})," ",l.quantity]}),(0,R.jsxs)("p",{children:[(0,R.jsx)("span",{className:"font-medium",children:"Price:"})," UGX ",null===(t=l.originalPrice)||void 0===t?void 0:t.toLocaleString()," \u2192 UGX ",null===(n=l.discountedPrice)||void 0===n?void 0:n.toLocaleString()]}),(0,R.jsxs)("p",{children:[(0,R.jsx)("span",{className:"font-medium",children:"Pickup:"})," ",l.pickupDate," at ",l.pickupWindow||l.location]})]})]}),(0,R.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:(0,R.jsxs)("div",{className:"flex items-start space-x-2",children:[(0,R.jsx)(L,{className:"w-5 h-5 text-yellow-600 flex-shrink-0 mt-0.5"}),(0,R.jsxs)("div",{className:"text-sm",children:[(0,R.jsx)("p",{className:"font-medium text-yellow-800 mb-1",children:"Impact of deletion:"}),(0,R.jsxs)("ul",{className:"text-yellow-700 space-y-1",children:[(0,R.jsx)("li",{children:"\u2022 Any existing reservations will be cancelled"}),(0,R.jsx)("li",{children:"\u2022 Users who reserved this item will be notified"}),(0,R.jsx)("li",{children:"\u2022 This food item will no longer be available for rescue"})]})]})]})}),(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsxs)("label",{className:"block text-sm font-medium text-gray-700",children:["To confirm deletion, type ",(0,R.jsx)("span",{className:"font-mono bg-gray-100 px-2 py-1 rounded",children:"DELETE"})," below:"]}),(0,R.jsx)("input",{type:"text",value:d,onChange:e=>u(e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-red-500 focus:border-red-500 ".concat(d&&!f?"border-red-500":"border-gray-300"),placeholder:"Type DELETE to confirm",autoComplete:"off"}),d&&!f&&(0,R.jsx)("p",{className:"text-red-500 text-xs",children:'Please type exactly "DELETE" to confirm'})]})]}),(0,R.jsxs)("div",{className:"flex justify-end space-x-3 p-6 border-t bg-gray-50",children:[(0,R.jsx)("button",{type:"button",onClick:p,className:"px-6 py-2 text-gray-600 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,R.jsx)("button",{onClick:async()=>{if(f){c(!0);try{await De.deleteFoodListing(l.id),m.success("Food item deleted successfully!"),i(l.id),p()}catch(e){console.error("Error deleting food:",e),m.error(e.message||"Failed to delete food item. Please try again.")}finally{c(!1)}}else m.error('Please type "DELETE" to confirm')},disabled:!f||o,className:"px-6 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center space-x-2",children:o?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin"}),(0,R.jsx)("span",{children:"Deleting..."})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Fe,{className:"w-4 h-4"}),(0,R.jsx)("span",{children:"Delete Food Item"})]})})]})]})}):null},Ke=e=>{let{isOpen:t,onClose:n,user:a,userFoodListings:s,onAddFood:i,onUpdateFood:l,onDeleteFood:o}=e;const[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)(!1),[f,p]=(0,r.useState)(!1),[h,g]=(0,r.useState)(null),[x,y]=(0,r.useState)(null),[v,w]=(0,r.useState)(!1),[j,N]=(0,r.useState)(null),k=M();(0,r.useEffect)(()=>{if(t&&a){const e=setTimeout(()=>{_()},100);return()=>clearTimeout(e)}},[t,a]);const _=async()=>{try{if(!localStorage.getItem("kindbite_access_token"))return void console.log("No access token available, skipping food stats load");try{const e=await De.getFoodStats();N(e)}catch(e){if(403!==e.status)throw e;console.log("Food stats load failed with 403, attempting token refresh...");if(await b.refreshToken()){console.log("Token refreshed, retrying food stats load...");const e=await De.getFoodStats();N(e)}else console.log("Token refresh failed, skipping food stats load")}}catch(t){console.error("Failed to load food stats:",t),403!==t.status&&k.error("Failed to load food statistics")}};if(!t)return null;return(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-2 sm:p-4",children:(0,R.jsxs)("div",{className:"relative w-full max-w-4xl max-h-[90vh] overflow-y-auto scrollbar-hide",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitScrollbar:{display:"none"}},children:[(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 w-full max-w-4xl mx-auto relative",children:[(0,R.jsx)("button",{onClick:n,className:"absolute top-2 right-2 bg-white rounded-full p-1 shadow-lg hover:bg-gray-50 transition-colors z-10",children:(0,R.jsx)(F,{size:18,className:"text-gray-600"})}),(0,R.jsxs)("div",{className:"text-center mb-6",children:[(0,R.jsx)("h2",{className:"text-2xl font-bold text-gray-800",children:(()=>{switch(null===a||void 0===a?void 0:a.user_role){case"restaurant":return"Restaurant Menu Management";case"home":return"Home Kitchen Management";case"factory":return"Factory Production Management";case"supermarket":return"Supermarket Inventory";case"retail":return"Retail Shop Management";default:return"Food Management"}})()}),(0,R.jsx)("p",{className:"text-gray-600",children:"Manage your food listings"}),(0,R.jsxs)("button",{onClick:async()=>{w(!0);try{await _(),k.success("Food listings refreshed!")}catch(e){k.error("Failed to refresh food listings")}finally{w(!1)}},disabled:v,className:"mt-2 px-3 py-1 bg-gray-100 text-gray-600 rounded-lg hover:bg-gray-200 transition-colors flex items-center space-x-1 mx-auto disabled:opacity-50",children:[(0,R.jsx)(Ae,{className:"w-4 h-4 ".concat(v?"animate-spin":"")}),(0,R.jsx)("span",{children:"Refresh"})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[(0,R.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 text-center",children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-green-600",children:(null===j||void 0===j?void 0:j.total_listings)||s.length}),(0,R.jsx)("div",{className:"text-sm text-green-600",children:"Total Items"})]}),(0,R.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 text-center",children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:(null===j||void 0===j?void 0:j.active_listings)||s.filter(e=>e.isAvailable).length}),(0,R.jsx)("div",{className:"text-sm text-blue-600",children:"Active Items"})]}),(0,R.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 text-center",children:[(0,R.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[(null===j||void 0===j?void 0:j.total_co2_saved)||s.reduce((e,t)=>e+(t.co2Saved||0),0).toFixed(1),"kg"]}),(0,R.jsx)("div",{className:"text-sm text-purple-600",children:"CO\u2082 Saved"})]}),(0,R.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 text-center",children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:(null===j||void 0===j?void 0:j.total_kindcoins_earned)||0}),(0,R.jsx)("div",{className:"text-sm text-orange-600",children:"KindCoins Earned"})]})]}),(0,R.jsx)("div",{className:"mb-6",children:(0,R.jsxs)("button",{onClick:()=>d(!0),className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center justify-center space-x-2",children:[(0,R.jsx)(Te,{size:20}),(0,R.jsx)("span",{children:"Add New Food Item"})]})}),(0,R.jsx)("div",{className:"space-y-4",children:0===s.length?(0,R.jsxs)("div",{className:"text-center py-8 text-gray-500",children:[(0,R.jsx)("div",{className:"text-4xl mb-4",children:"\ud83c\udf7d\ufe0f"}),(0,R.jsx)("p",{className:"text-lg",children:"No food items yet"}),(0,R.jsx)("p",{className:"text-sm",children:"Add your first food item to get started!"})]}):s.map(e=>(0,R.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[(0,R.jsxs)("div",{className:"flex items-start space-x-4",children:[(0,R.jsx)("div",{className:"text-4xl",children:e.image}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800 text-lg",children:e.name}),(0,R.jsx)("p",{className:"text-gray-600 text-sm",children:e.description}),(0,R.jsxs)("div",{className:"flex items-center space-x-4 mt-2 text-sm text-gray-500",children:[(0,R.jsxs)("span",{children:["\ud83d\udccd ",e.location]}),(0,R.jsxs)("span",{children:["\ud83d\udd52 ",e.pickup_window||"".concat(e.pickup_date," ").concat(e.pickup_window_start,"-").concat(e.pickup_window_end)]}),(0,R.jsxs)("span",{children:["\ud83d\udce6 ",e.available_quantity||e.quantity," available"]})]})]}),(0,R.jsxs)("div",{className:"text-right",children:[(0,R.jsx)("div",{className:"text-lg font-bold text-green-600",children:0===e.discounted_price?"FREE":"UGX ".concat((e.discounted_price||0).toLocaleString())}),e.original_price&&e.discounted_price&&e.original_price>e.discounted_price&&(0,R.jsxs)("div",{className:"text-sm text-gray-400 line-through",children:["UGX ",(e.original_price||0).toLocaleString()]})]})]}),(0,R.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,R.jsx)("div",{className:"flex space-x-1",children:(e.dietary||e.dietary_info||[]).map((e,t)=>(0,R.jsx)("span",{className:"bg-gray-200 text-gray-600 px-2 py-1 rounded-full text-xs",children:e},t))}),(0,R.jsxs)("div",{className:"text-sm text-green-600",children:["\ud83c\udf31 ",e.co2Saved||0,"kg CO\u2082 saved"]})]})]})]}),(0,R.jsxs)("div",{className:"flex justify-end space-x-2 mt-4",children:[(0,R.jsxs)("button",{onClick:()=>(e=>{g(e),m(!0)})(e),className:"px-3 py-1 bg-blue-100 text-blue-600 rounded-lg text-sm hover:bg-blue-200 transition-colors flex items-center space-x-1",children:[(0,R.jsx)(Le,{size:14}),(0,R.jsx)("span",{children:"Edit"})]}),(0,R.jsxs)("button",{onClick:()=>(e=>{y(e),p(!0)})(e),className:"px-3 py-1 bg-red-100 text-red-600 rounded-lg text-sm hover:bg-red-200 transition-colors flex items-center space-x-1",children:[(0,R.jsx)(Fe,{size:14}),(0,R.jsx)("span",{children:"Delete"})]})]})]},e.id))})]}),(0,R.jsx)(qe,{isOpen:c,onClose:()=>d(!1),onFoodAdded:e=>{i(e),d(!1)}}),(0,R.jsx)(Ue,{isOpen:u,onClose:()=>{m(!1),g(null)},onFoodUpdated:e=>{l(e),m(!1),g(null)},foodItem:h}),(0,R.jsx)(Ve,{isOpen:f,onClose:()=>{p(!1),y(null)},onFoodDeleted:e=>{o(e),p(!1),y(null)},foodItem:x})]})})},Be=C("trending-up",[["path",{d:"M16 7h6v6",key:"box55l"}],["path",{d:"m22 7-8.5 8.5-5-5L2 17",key:"1t1m79"}]]),We=C("star",[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]]),Ge=C("credit-card",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),$e=e=>{let{food:t,isOpen:n,onClose:a}=e;const{user:s}=q(),i=M(),[l,o]=(0,r.useState)({quantity:1,special_instructions:"",payment_method:"cash",contact_phone:(null===s||void 0===s?void 0:s.phone)||"",contact_email:(null===s||void 0===s?void 0:s.email)||""}),[d,u]=(0,r.useState)(!1);if(!n||!t)return null;const m=e=>{const{name:t,value:n}=e.target;o(e=>c(c({},e),{},{[t]:n}))},f=l.quantity*(t.discounted_price||t.discountedPrice||0),p=0===f;return(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:(0,R.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:(0,R.jsxs)("div",{className:"p-6",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Reserve Food"}),(0,R.jsx)("p",{className:"text-gray-600 text-sm",children:"Complete your reservation"})]}),(0,R.jsx)("button",{onClick:a,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,R.jsx)(F,{size:24})})]}),(0,R.jsx)("div",{className:"bg-gray-50 rounded-lg p-4 mb-6",children:(0,R.jsxs)("div",{className:"flex items-start space-x-3",children:[(0,R.jsx)("div",{className:"text-3xl",children:t.image_emoji||t.image||"\ud83c\udf7d\ufe0f"}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800",children:t.name}),(0,R.jsx)("p",{className:"text-gray-600 text-sm mb-2",children:t.description}),(0,R.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(je,{size:14,className:"mr-2"}),(0,R.jsx)("span",{children:t.location})]}),(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(Oe,{size:14,className:"mr-2"}),(0,R.jsx)("span",{children:t.pickup_window||t.pickupWindow||"N/A"})]}),(0,R.jsx)("div",{className:"flex items-center",children:(0,R.jsx)("span",{className:"font-medium",children:t.restaurant_name||t.restaurant||"Provider"})})]})]})]})}),(0,R.jsxs)("form",{onSubmit:async e=>{if(e.preventDefault(),s)if(l.quantity>t.available_quantity)i.error("Only ".concat(t.available_quantity," items available"));else{u(!0);try{const e={food_listing:t.id,quantity_reserved:parseInt(l.quantity),special_instructions:l.special_instructions,payment_method:l.payment_method,contact_phone:l.contact_phone,contact_email:l.contact_email};await De.createReservation(e);i.success("Reservation created successfully! You will be contacted for pickup details."),a(),window.dispatchEvent(new CustomEvent("refreshFoodListings"))}catch(n){console.error("Error creating reservation:",n),i.error(n.message||"Failed to create reservation. Please try again.")}finally{u(!1)}}else i.error("You must be logged in to make a reservation")},className:"space-y-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity"}),(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)("button",{type:"button",onClick:()=>o(e=>c(c({},e),{},{quantity:Math.max(1,e.quantity-1)})),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300",children:"-"}),(0,R.jsx)("input",{type:"number",name:"quantity",value:l.quantity,onChange:m,min:"1",max:t.available_quantity||t.quantity||1,className:"w-20 text-center border border-gray-300 rounded-lg px-3 py-2"}),(0,R.jsx)("button",{type:"button",onClick:()=>o(e=>c(c({},e),{},{quantity:Math.min(t.available_quantity||t.quantity||1,e.quantity+1)})),className:"w-8 h-8 bg-gray-200 rounded-full flex items-center justify-center hover:bg-gray-300",children:"+"}),(0,R.jsxs)("span",{className:"text-sm text-gray-600",children:["of ",t.available_quantity||t.quantity||0," available"]})]})]}),!p&&(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),(0,R.jsxs)("select",{name:"payment_method",value:l.payment_method,onChange:m,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",children:[(0,R.jsx)("option",{value:"cash",children:"Cash on Pickup"}),(0,R.jsx)("option",{value:"mobile_money",children:"Mobile Money"}),(0,R.jsx)("option",{value:"card",children:"Credit/Debit Card"})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Phone"}),(0,R.jsx)("input",{type:"tel",name:"contact_phone",value:l.contact_phone,onChange:m,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Your phone number"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Contact Email"}),(0,R.jsx)("input",{type:"email",name:"contact_email",value:l.contact_email,onChange:m,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Your email"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Special Instructions (Optional)"}),(0,R.jsx)("textarea",{name:"special_instructions",value:l.special_instructions,onChange:m,rows:3,className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500",placeholder:"Any special requests or notes..."})]}),(0,R.jsxs)("div",{className:"bg-green-50 rounded-lg p-4",children:[(0,R.jsxs)("div",{className:"flex justify-between items-center mb-2",children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Total Price:"}),(0,R.jsx)("span",{className:"text-lg font-bold text-green-600",children:p?"FREE":"UGX ".concat(f.toLocaleString())})]}),!p&&(0,R.jsxs)("div",{className:"text-sm text-gray-600",children:["Payment: ","cash"===l.payment_method?"Cash on pickup":"mobile_money"===l.payment_method?"Mobile Money":"Credit/Debit Card"]})]}),(0,R.jsx)("button",{type:"submit",disabled:d,className:"w-full bg-green-600 text-white py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2",children:d?(0,R.jsx)("div",{className:"w-5 h-5 border-2 border-white border-t-transparent rounded-full animate-spin"}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Ge,{size:20}),(0,R.jsx)("span",{children:p?"Reserve Free Food":"Reserve & Pay"})]})})]}),(0,R.jsxs)("div",{className:"mt-6 pt-4 border-t border-gray-200",children:[(0,R.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Provider Contact"}),(0,R.jsxs)("div",{className:"space-y-1 text-sm text-gray-600",children:[(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(K,{size:14,className:"mr-2"}),(0,R.jsx)("span",{children:t.restaurant_name||t.restaurant||"Provider"})]}),t.provider_email&&(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(ne,{size:14,className:"mr-2"}),(0,R.jsx)("span",{children:t.provider_email})]}),t.provider_phone&&(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(we,{size:14,className:"mr-2"}),(0,R.jsx)("span",{children:t.provider_phone})]})]})]})]})})})},Qe=e=>{let{food:t,onClick:n,onLikeToggle:a,onReserve:s}=e;const{user:i}=q(),[l,o]=(0,r.useState)(!1);if(!t||"object"!==typeof t)return null;return(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-4 cursor-pointer hover:shadow-lg transition-shadow duration-200 relative",onClick:()=>n(t),children:[(0,R.jsx)("button",{onClick:e=>{e.stopPropagation(),a&&a(t.id,!t.isLiked)},className:"absolute top-3 right-3 p-2 rounded-full transition-all duration-200 z-10 ".concat(t.isLiked?"bg-red-500 text-white hover:bg-red-600":"bg-white text-gray-400 hover:text-red-500 hover:bg-red-50"," shadow-md hover:shadow-lg"),title:t.isLiked?"Unlike this food":"Like this food",children:(0,R.jsx)(Se,{size:18,className:t.isLiked?"fill-current":""})}),(0,R.jsxs)("div",{className:"w-full h-32 bg-gray-100 rounded-lg mb-3 flex items-center justify-center overflow-hidden",children:[t.image_url&&"string"===typeof t.image_url&&t.image_url.length>0&&t.image_url.startsWith&&t.image_url.startsWith("http")?(0,R.jsx)("img",{src:t.image_url,alt:t.name,className:"w-full h-full object-cover rounded-lg",onError:e=>{e.target.style.display="none",e.target.nextSibling.style.display="flex"}}):null,(0,R.jsx)("div",{className:"w-full h-full flex items-center justify-center text-4xl ".concat(t.image_url&&"string"===typeof t.image_url&&t.image_url.length>0&&t.image_url.startsWith&&t.image_url.startsWith("http")?"hidden":"flex"),children:t.image_emoji||t.image||"\ud83c\udf7d\ufe0f"})]}),(0,R.jsxs)("div",{className:"space-y-2",children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800 text-lg",children:t.name||"Food Item"}),(0,R.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,R.jsx)("div",{className:"inline-block px-2 py-1 rounded-full text-xs font-medium ".concat((e=>{const t={restaurant:"bg-blue-100 text-blue-800",bakery:"bg-yellow-100 text-yellow-800",supermarket:"bg-green-100 text-green-800",home:"bg-purple-100 text-purple-800",default:"bg-gray-100 text-gray-800"};return t[e]||t.default})(t.provider_type||t.provider)),children:t.restaurant_name||t.restaurant||"Provider"}),t.provider_type&&(0,R.jsx)("span",{className:"text-xs text-gray-500 capitalize",children:t.provider_type})]}),(0,R.jsx)("p",{className:"text-gray-600 text-sm line-clamp-2",children:t.description||"No description available"}),(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[0===t.discounted_price?(0,R.jsx)("span",{className:"bg-green-100 text-green-800 px-2 py-1 rounded text-sm font-semibold",children:"FREE"}):(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsxs)("span",{className:"text-gray-400 line-through text-sm",children:["UGX ",(t.original_price||0).toLocaleString()]}),(0,R.jsxs)("span",{className:"text-green-600 font-semibold text-lg",children:["UGX ",(t.discounted_price||0).toLocaleString()]})]}),(0,R.jsxs)("span",{className:"text-gray-500 text-sm",children:[t.available_quantity||t.quantity||0," available"]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-sm text-gray-500",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,R.jsx)(je,{size:14}),(0,R.jsx)("span",{children:t.distance||t.location||"N/A"})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,R.jsx)(Oe,{size:14}),(0,R.jsx)("span",{children:t.pickup_window||t.pickupWindow||t.pickup_date||"N/A"})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,R.jsx)(We,{size:14}),(0,R.jsx)("span",{children:t.rating||"N/A"})]}),(0,R.jsx)("div",{className:"flex items-center space-x-1",children:(0,R.jsxs)("span",{className:"text-xs",children:["\ud83d\udce6 ",t.available_quantity||t.quantity||0]})})]}),t.dietary_info&&Array.isArray(t.dietary_info)&&t.dietary_info.length>0||t.dietary&&Array.isArray(t.dietary)&&t.dietary.length>0?(0,R.jsx)("div",{className:"flex flex-wrap gap-1",children:(t.dietary_info||t.dietary||[]).map((e,t)=>(0,R.jsxs)("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:[(0,R.jsx)(Re,{size:12,className:"mr-1"}),e]},t))}):(0,R.jsx)("span",{className:"text-gray-400 text-xs",children:"No dietary info"}),(0,R.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-100",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-1 text-green-600 text-sm",children:[(0,R.jsx)(Se,{size:14}),(0,R.jsxs)("span",{children:["Save ",t.co2_saved||t.co2Saved||0,"kg CO\u2082"]}),t.water_saved&&(0,R.jsxs)("span",{className:"ml-2",children:["\ud83d\udca7 ",t.water_saved,"L"]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsxs)("span",{className:"text-xs text-gray-500",children:[t.likesCount||0," likes"]}),"end-user"===(null===i||void 0===i?void 0:i.user_role)?(0,R.jsxs)("button",{onClick:e=>{e.stopPropagation(),o(!0)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 bg-green-500 text-white hover:bg-green-600 flex items-center space-x-1",children:[(0,R.jsx)(Ge,{size:14}),(0,R.jsx)("span",{children:"Reserve Now"})]}):null!==i&&void 0!==i&&i.user_role&&["restaurant","home","factory","supermarket","retail"].includes(i.user_role)?(0,R.jsx)("button",{onClick:e=>{e.stopPropagation(),n&&n(t)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 bg-blue-500 text-white hover:bg-blue-600",children:"View Details"}):(0,R.jsx)("button",{onClick:e=>{e.stopPropagation(),s&&s(t.id,!t.isReserved)},className:"px-4 py-2 rounded-lg text-sm font-medium transition-colors duration-200 ".concat(t.isReserved?"bg-gray-500 text-white cursor-not-allowed":"bg-green-500 text-white hover:bg-green-600"),disabled:t.isReserved,children:t.isReserved?"Reserved":"Reserve Now"})]})]})]}),(0,R.jsx)($e,{food:t,isOpen:l,onClose:()=>o(!1)})]})},Ye=e=>{let{foodListings:t=[],onOpenFoodModal:n,onViewChange:r,onLikeToggle:a,onReserve:s,userStats:i,isLoadingStats:l,user:o,isLoadingFoods:c=!1}=e;const d=e=>{n&&n(e)};return(0,R.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-24",children:(0,R.jsxs)("div",{className:"p-4 lg:p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6 text-center",children:[(0,R.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-800 mb-4",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?"Welcome to KindBite":"Welcome back, ".concat((null===o||void 0===o?void 0:o.full_name)||(null===o||void 0===o?void 0:o.first_name)||"Provider","!")}),(0,R.jsx)("p",{className:"text-gray-600 mb-6 text-lg",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?"Discover amazing food while helping the environment and community":"Manage your food listings and help reduce waste in your community"}),(0,R.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("button",{onClick:()=>r&&r("search"),className:"bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors duration-200",children:"Find Food Now"}),(0,R.jsx)("button",{onClick:()=>r&&r("community"),className:"bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition-colors duration-200",children:"Join Community"})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("button",{onClick:()=>r&&r("food-management"),className:"bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors duration-200",children:"Add Food Listing"}),(0,R.jsx)("button",{onClick:()=>r&&r("reservations"),className:"bg-blue-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-blue-600 transition-colors duration-200",children:"View Reservations"})]})})]}),(0,R.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,R.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,R.jsx)(Ee,{className:"w-6 h-6 text-green-600"})}),(0,R.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===i||void 0===i?void 0:i.completed_reservations)||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Meals Rescued"})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,R.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,R.jsx)(Be,{className:"w-6 h-6 text-blue-600"})}),(0,R.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===i||void 0===i?void 0:i.total_co2_saved)||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"CO\u2082 kg Saved"})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,R.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,R.jsx)(te,{className:"w-6 h-6 text-purple-600"})}),(0,R.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===i||void 0===i?void 0:i.total_kindcoins_earned)||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"KindCoins Earned"})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,R.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,R.jsx)(ee,{className:"w-6 h-6 text-orange-600"})}),(0,R.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===i||void 0===i?void 0:i.total_reservations)||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Total Reservations"})]})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,R.jsx)("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,R.jsx)(Ee,{className:"w-6 h-6 text-green-600"})}),(0,R.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===i||void 0===i?void 0:i.active_listings)||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Active Listings"})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,R.jsx)("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,R.jsx)(Be,{className:"w-6 h-6 text-blue-600"})}),(0,R.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===i||void 0===i?void 0:i.total_reservations)||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Total Reservations"})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,R.jsx)("div",{className:"w-12 h-12 bg-purple-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,R.jsx)(te,{className:"w-6 h-6 text-purple-600"})}),(0,R.jsx)("div",{className:"text-2xl font-bold text-gray-800",children:(null===i||void 0===i?void 0:i.total_co2_saved)||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"CO\u2082 kg Saved"})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 text-center",children:[(0,R.jsx)("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center mx-auto mb-2",children:(0,R.jsx)(ee,{className:"w-6 h-6 text-orange-600"})}),(0,R.jsxs)("div",{className:"text-2xl font-bold text-gray-800",children:[(null===i||void 0===i?void 0:i.average_rating)||0,"\u2605"]}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Average Rating"})]})]})}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsx)("h2",{className:"text-xl font-semibold text-gray-800 mb-4",children:"Quick Actions"}),(0,R.jsx)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-3",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("button",{onClick:()=>r&&r("search"),className:"flex flex-col items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors duration-200",children:[(0,R.jsx)(Z,{className:"w-8 h-8 text-green-600 mb-2"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Search Food"})]}),(0,R.jsxs)("button",{onClick:()=>r&&r("environment"),className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors duration-200",children:[(0,R.jsx)(Ee,{className:"w-8 h-8 text-blue-600 mb-2"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Eco Impact"})]}),(0,R.jsxs)("button",{onClick:()=>r&&r("reservations"),className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors duration-200",children:[(0,R.jsx)(de,{className:"w-8 h-8 text-purple-600 mb-2"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"My Reservations"})]}),(0,R.jsxs)("button",{onClick:()=>r&&r("community"),className:"flex flex-col items-center p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors duration-200",children:[(0,R.jsx)(ee,{className:"w-8 h-8 text-orange-600 mb-2"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Community"})]})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("button",{onClick:()=>r&&r("food-management"),className:"flex flex-col items-center p-4 bg-green-50 rounded-lg hover:bg-green-100 transition-colors duration-200",children:[(0,R.jsx)(Z,{className:"w-8 h-8 text-green-600 mb-2"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Manage Food"})]}),(0,R.jsxs)("button",{onClick:()=>r&&r("reservations"),className:"flex flex-col items-center p-4 bg-blue-50 rounded-lg hover:bg-blue-100 transition-colors duration-200",children:[(0,R.jsx)(de,{className:"w-8 h-8 text-blue-600 mb-2"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Reservations"})]}),(0,R.jsxs)("button",{onClick:()=>r&&r("environment"),className:"flex flex-col items-center p-4 bg-purple-50 rounded-lg hover:bg-purple-100 transition-colors duration-200",children:[(0,R.jsx)(Ee,{className:"w-8 h-8 text-purple-600 mb-2"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Eco Impact"})]}),(0,R.jsxs)("button",{onClick:()=>r&&r("community"),className:"flex flex-col items-center p-4 bg-orange-50 rounded-lg hover:bg-orange-100 transition-colors duration-200",children:[(0,R.jsx)(ee,{className:"w-8 h-8 text-orange-600 mb-2"}),(0,R.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Community"})]})]})})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsxs)("h2",{className:"text-xl font-semibold text-gray-800 flex items-center",children:[(0,R.jsx)(je,{className:"w-5 h-5 text-green-500 mr-2"}),"end-user"===(null===o||void 0===o?void 0:o.user_role)?"Nearby Food Available":"Your Food Listings","end-user"===(null===o||void 0===o?void 0:o.user_role)&&t&&t.length>0&&(0,R.jsxs)("span",{className:"ml-2 text-sm font-normal text-gray-600",children:["(",t.filter(e=>{const t=(null===e||void 0===e?void 0:e.discounted_price)||(null===e||void 0===e?void 0:e.discountedPrice)||0;return 0===t||"0"===t||"0.00"===t||0===parseFloat(t)}).length," free)"]})]}),(0,R.jsx)("button",{onClick:()=>r&&r("end-user"===(null===o||void 0===o?void 0:o.user_role)?"search":"food-management"),className:"text-green-600 hover:text-green-700 font-medium",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?"View All \u2192":"Manage All \u2192"})]}),c?(0,R.jsxs)("div",{className:"text-center py-12",children:[(0,R.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500 mx-auto mb-4"}),(0,R.jsx)("p",{className:"text-gray-600",children:"Loading food listings..."})]}):t&&t.length>0?(0,R.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:t.slice(0,6).map(e=>(0,R.jsx)(Qe,{food:e,onClick:d,onLikeToggle:a,onReserve:s},e.id||Math.random()))}):(0,R.jsxs)("div",{className:"text-center py-12",children:[(0,R.jsx)("div",{className:"text-6xl mb-4",children:"\ud83c\udf7d\ufe0f"}),(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?"No food available nearby":"No food listings yet"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?"Check back later or search for food in other areas":"Start by adding your first food listing to help reduce waste"}),(0,R.jsx)("div",{className:"flex flex-col sm:flex-row gap-3 justify-center",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("button",{onClick:()=>r&&r("search"),className:"bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors duration-200",children:"Search for Food"}),(0,R.jsx)("button",{onClick:()=>r&&r("home"),className:"bg-gray-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors duration-200",children:"Go Home"})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("button",{onClick:()=>r&&r("food-management"),className:"bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors duration-200",children:"Add Food Listing"}),(0,R.jsx)("button",{onClick:()=>r&&r("home"),className:"bg-gray-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-gray-600 transition-colors duration-200",children:"Go Home"})]})})]})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:"Your KindCoins"}),(0,R.jsx)("p",{className:"text-gray-600",children:"end-user"===(null===o||void 0===o?void 0:o.user_role)?"Earn points by rescuing food and helping the community":"Earn points by providing food and helping reduce waste"})]}),(0,R.jsx)("div",{className:"text-right",children:l?(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-500"}),(0,R.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading..."})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)("div",{className:"text-3xl font-bold text-green-600",children:(null===i||void 0===i?void 0:i.total_kindcoins_earned)||(null===o||void 0===o?void 0:o.kind_coins)||0}),(0,R.jsx)("div",{className:"text-sm text-gray-500",children:"Available Points"})]})})]}),(0,R.jsx)("button",{onClick:()=>r&&r("points"),className:"w-full mt-4 bg-green-500 text-white py-2 rounded-lg hover:bg-green-600 transition-colors duration-200",children:"View Points History"})]}),"end-user"===(null===o||void 0===o?void 0:o.user_role)&&i&&(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Your Food Rescue Impact"}),(0,R.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-green-600",children:i.total_reservations||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Total Reservations"})]}),(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:i.completed_reservations||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Completed"})]}),(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsxs)("div",{className:"text-2xl font-bold text-purple-600",children:[i.total_co2_saved||0," kg"]}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"CO\u2082 Saved"})]}),(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[i.average_rating||0,"\u2605"]}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Rating"})]})]})]}),"end-user"!==(null===o||void 0===o?void 0:o.user_role)&&i&&(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4",children:"Your Provider Impact"}),(0,R.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-green-600",children:i.total_listings||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Total Listings"})]}),(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:i.active_listings||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Active Listings"})]}),(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:i.total_reservations||0}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Total Reservations"})]}),(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsxs)("div",{className:"text-2xl font-bold text-orange-600",children:[i.average_rating||0,"\u2605"]}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Average Rating"})]})]})]})]})})},Xe=C("zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),Je=C("funnel",[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]]),Ze=C("arrow-up-narrow-wide",[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]]),et=C("arrow-down-wide-narrow",[["path",{d:"m3 16 4 4 4-4",key:"1co6wj"}],["path",{d:"M7 20V4",key:"1yoxec"}],["path",{d:"M11 4h10",key:"1w87gc"}],["path",{d:"M11 8h7",key:"djye34"}],["path",{d:"M11 12h4",key:"q8tih4"}]]),tt=e=>{let{foodListings:t=[],onFoodSelect:n,onViewChange:a,loading:s=!1,error:i=null,onRefresh:l,title:o="Search Food"}=e;const[c,d]=(0,r.useState)(""),[u,m]=(0,r.useState)("all"),[f,p]=(0,r.useState)("distance"),[h,g]=(0,r.useState)("asc"),[x,y]=(0,r.useState)([0,1e4]),[v,b]=(0,r.useState)(10),[w,j]=(0,r.useState)(!1);(0,r.useEffect)(()=>{const e=()=>{l&&l()};return window.addEventListener("refreshFoodListings",e),()=>window.removeEventListener("refreshFoodListings",e)},[l]);const N=e=>{n&&e&&n(e)},k=Array.isArray(t)?t:[],_=(0,r.useMemo)(()=>{let e=k.filter(e=>{if(!e||"object"!==typeof e)return!1;const t=!c||e.name&&"string"===typeof e.name&&e.name.toLowerCase().includes(c.toLowerCase())||e.restaurant_name&&"string"===typeof e.restaurant_name&&e.restaurant_name.toLowerCase().includes(c.toLowerCase())||e.restaurant&&"string"===typeof e.restaurant&&e.restaurant.toLowerCase().includes(c.toLowerCase())||e.description&&"string"===typeof e.description&&e.description.toLowerCase().includes(c.toLowerCase());let n=!0;try{switch(u){case"vegetarian":n=e.dietary_info&&Array.isArray(e.dietary_info)&&e.dietary_info.includes("Vegetarian")||e.dietary&&Array.isArray(e.dietary)&&e.dietary.includes("Vegetarian");break;case"halal":n=e.dietary_info&&Array.isArray(e.dietary_info)&&e.dietary_info.includes("Halal")||e.dietary&&Array.isArray(e.dietary)&&e.dietary.includes("Halal");break;case"vegan":n=e.dietary_info&&Array.isArray(e.dietary_info)&&e.dietary_info.includes("Vegan")||e.dietary&&Array.isArray(e.dietary)&&e.dietary.includes("Vegan");break;case"gluten-free":n=e.dietary_info&&Array.isArray(e.dietary_info)&&e.dietary_info.includes("Gluten-Free")||e.dietary&&Array.isArray(e.dietary)&&e.dietary.includes("Gluten-Free");break;case"near-me":if(e.distance&&"string"===typeof e.distance){const t=e.distance.match(/(\d+(?:\.\d+)?)\s*km/);n=t&&parseFloat(t[1])<=v}else n=!1;break;case"free":const t=e.discounted_price||e.discountedPrice||0;n=0===t||"0"===t||"0.00"===t||0===parseFloat(t);break;case"under-1000":const r=e.discounted_price||e.discountedPrice||0;n=r&&r<=1e3;break;case"under-5000":const a=e.discounted_price||e.discountedPrice||0;n=a&&a<=5e3;break;case"high-rated":n=e.rating&&parseFloat(e.rating)>=4;break;case"restaurant":n="restaurant"===e.provider_type||"restaurant"===e.provider;break;case"home-kitchen":n="home"===e.provider_type||"home"===e.provider;break;case"bakery":n="bakery"===e.provider_type||"bakery"===e.provider;break;case"supermarket":n="supermarket"===e.provider_type||"supermarket"===e.provider;break;default:n=!0}}catch(i){console.warn("Error processing filter for food item:",e,i),n=!1}const r=e.discounted_price||e.discountedPrice||0,a=r>=x[0]&&r<=x[1];return t&&n&&a});return e.sort((e,t)=>{var n,r;let a,s;try{switch(f){case"distance":a=e.distance?parseFloat((null===(n=e.distance.match(/(\d+(?:\.\d+)?)/))||void 0===n?void 0:n[1])||999):999,s=t.distance?parseFloat((null===(r=t.distance.match(/(\d+(?:\.\d+)?)/))||void 0===r?void 0:r[1])||999):999;break;case"price":a=e.discounted_price||e.discountedPrice||0,s=t.discounted_price||t.discountedPrice||0;break;case"rating":a=e.rating?parseFloat(e.rating):0,s=t.rating?parseFloat(t.rating):0;break;case"co2-saved":a=e.co2_saved||e.co2Saved||0,s=t.co2_saved||t.co2Saved||0;break;case"pickup-time":a=e.pickup_window||e.pickupWindow?(new Date).getTime():999999999999,s=t.pickup_window||t.pickupWindow?(new Date).getTime():999999999999;break;default:a=0,s=0}}catch(i){a=0,s=0}return"asc"===h?a-s:s-a}),e},[k,c,u,f,h,x,v]),S=[{id:"all",label:"All",icon:"\ud83c\udf7d\ufe0f",count:k.length},{id:"free",label:"Free",icon:"\ud83c\udf81",count:k.filter(e=>{const t=(null===e||void 0===e?void 0:e.discounted_price)||(null===e||void 0===e?void 0:e.discountedPrice)||0;return 0===t||"0"===t||"0.00"===t||0===parseFloat(t)}).length,highlight:!0},{id:"vegetarian",label:"Vegetarian",icon:"\ud83e\udd6c",count:k.filter(e=>{var t,n;return(null===e||void 0===e||null===(t=e.dietary_info)||void 0===t?void 0:t.includes("Vegetarian"))||(null===e||void 0===e||null===(n=e.dietary)||void 0===n?void 0:n.includes("Vegetarian"))}).length},{id:"halal",label:"Halal",icon:"\u262a\ufe0f",count:k.filter(e=>{var t,n;return(null===e||void 0===e||null===(t=e.dietary_info)||void 0===t?void 0:t.includes("Halal"))||(null===e||void 0===e||null===(n=e.dietary)||void 0===n?void 0:n.includes("Halal"))}).length},{id:"vegan",label:"Vegan",icon:"\ud83c\udf31",count:k.filter(e=>{var t,n;return(null===e||void 0===e||null===(t=e.dietary_info)||void 0===t?void 0:t.includes("Vegan"))||(null===e||void 0===e||null===(n=e.dietary)||void 0===n?void 0:n.includes("Vegan"))}).length},{id:"gluten-free",label:"Gluten-Free",icon:"\ud83c\udf3e",count:k.filter(e=>{var t,n;return(null===e||void 0===e||null===(t=e.dietary_info)||void 0===t?void 0:t.includes("Gluten-Free"))||(null===e||void 0===e||null===(n=e.dietary)||void 0===n?void 0:n.includes("Gluten-Free"))}).length},{id:"near-me",label:"Near Me",icon:"\ud83d\udccd",count:k.filter(e=>{var t;return(null===e||void 0===e?void 0:e.distance)&&parseFloat((null===(t=e.distance.match(/(\d+(?:\.\d+)?)/))||void 0===t?void 0:t[1])||999)<=v}).length},{id:"under-1000",label:"Under 1000",icon:"\ud83d\udcb0",count:k.filter(e=>((null===e||void 0===e?void 0:e.discounted_price)||(null===e||void 0===e?void 0:e.discountedPrice)||0)<=1e3).length},{id:"under-5000",label:"Under 5000",icon:"\ud83d\udcb5",count:k.filter(e=>((null===e||void 0===e?void 0:e.discounted_price)||(null===e||void 0===e?void 0:e.discountedPrice)||0)<=5e3).length},{id:"high-rated",label:"Top Rated",icon:"\u2b50",count:k.filter(e=>(null===e||void 0===e?void 0:e.rating)&&parseFloat(e.rating)>=4).length},{id:"restaurant",label:"Restaurants",icon:"\ud83c\udfea",count:k.filter(e=>"restaurant"===(null===e||void 0===e?void 0:e.provider_type)||"restaurant"===(null===e||void 0===e?void 0:e.provider)).length},{id:"home-kitchen",label:"Home Kitchens",icon:"\ud83c\udfe0",count:k.filter(e=>"home"===(null===e||void 0===e?void 0:e.provider_type)||"home"===(null===e||void 0===e?void 0:e.provider)).length},{id:"bakery",label:"Bakeries",icon:"\ud83e\udd56",count:k.filter(e=>"bakery"===(null===e||void 0===e?void 0:e.provider_type)||"bakery"===(null===e||void 0===e?void 0:e.provider)).length},{id:"supermarket",label:"Supermarkets",icon:"\ud83d\uded2",count:k.filter(e=>"supermarket"===(null===e||void 0===e?void 0:e.provider_type)||"supermarket"===(null===e||void 0===e?void 0:e.provider)).length}],E=[{id:"distance",label:"Distance",icon:je},{id:"price",label:"Price",icon:Xe},{id:"rating",label:"Rating",icon:We},{id:"co2-saved",label:"CO\u2082 Saved",icon:Se},{id:"pickup-time",label:"Pickup Time",icon:Oe}],C=(0,r.useMemo)(()=>{if(!c||c.length<2)return[];const e=new Set;return k.forEach(t=>{var n,r;null!==t&&void 0!==t&&null!==(n=t.name)&&void 0!==n&&n.toLowerCase().includes(c.toLowerCase())&&e.add(t.name),null!==t&&void 0!==t&&null!==(r=t.restaurant)&&void 0!==r&&r.toLowerCase().includes(c.toLowerCase())&&e.add(t.restaurant)}),Array.from(e).slice(0,5)},[c,k]),P=(()=>{try{return{total:_.length,free:_.filter(e=>{if(!e)return!1;const t=e.discounted_price||e.discountedPrice||0;return 0===t||"0"===t||"0.00"===t||0===parseFloat(t)}).length,vegetarian:_.filter(e=>e&&(e.dietary_info&&Array.isArray(e.dietary_info)&&e.dietary_info.includes("Vegetarian")||e.dietary&&Array.isArray(e.dietary)&&e.dietary.includes("Vegetarian"))).length,topRated:_.filter(e=>e&&e.rating&&!isNaN(parseFloat(e.rating))&&parseFloat(e.rating)>=4).length,avgPrice:_.length>0?Math.round(_.reduce((e,t)=>e+(t.discounted_price||t.discountedPrice||0),0)/_.length):0,totalCO2Saved:_.reduce((e,t)=>e+(t.co2_saved||t.co2Saved||0),0)}}catch(i){return console.warn("Error calculating stats:",i),{total:0,free:0,vegetarian:0,topRated:0,avgPrice:0,totalCO2Saved:0}}})();return(0,R.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 via-white to-green-50 pt-20 pb-24",children:(0,R.jsxs)("div",{className:"p-4 lg:p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"card-premium p-6",children:[(0,R.jsx)("h1",{className:"text-2xl lg:text-3xl font-bold text-gray-800 mb-6 text-center",children:o}),(0,R.jsxs)("div",{className:"relative mb-6",children:[(0,R.jsx)(Z,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-gray-400 w-5 h-5 lg:w-6 lg:h-6"}),(0,R.jsx)("input",{type:"text",placeholder:"Search for food, restaurants, or cuisines...",value:c,onChange:e=>d(e.target.value),className:"w-full pl-12 pr-4 py-4 bg-white border-2 border-gray-200 rounded-2xl text-lg focus:border-green-500 focus:outline-none transition-all duration-300 hover:border-gray-300 lg:py-5 lg:text-xl"}),C.length>0&&(0,R.jsx)("div",{className:"absolute top-full left-0 right-0 bg-white border-2 border-gray-200 rounded-xl mt-2 shadow-lg z-10",children:C.map((e,t)=>(0,R.jsxs)("button",{onClick:()=>d(e),className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors duration-200 border-b border-gray-100 last:border-b-0",children:[(0,R.jsx)(Z,{size:16,className:"inline mr-2 text-gray-400"}),e]},t))})]}),(0,R.jsx)("div",{className:"flex justify-center mb-4",children:(0,R.jsxs)("button",{onClick:()=>j(!w),className:"flex items-center space-x-2 px-4 py-2 text-green-600 hover:text-green-700 font-medium transition-colors duration-300",children:[(0,R.jsx)(Je,{size:20}),(0,R.jsxs)("span",{children:[w?"Hide":"Show"," Advanced Filters"]})]})}),w&&(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6 p-4 bg-gray-50 rounded-xl",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Price Range (UGX)"}),(0,R.jsxs)("div",{className:"flex space-x-2",children:[(0,R.jsx)("input",{type:"number",placeholder:"Min",value:x[0],onChange:e=>y([parseInt(e.target.value)||0,x[1]]),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none"}),(0,R.jsx)("input",{type:"number",placeholder:"Max",value:x[1],onChange:e=>y([x[0],parseInt(e.target.value)||1e4]),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Max Distance (km)"}),(0,R.jsx)("input",{type:"range",min:"1",max:"20",value:v,onChange:e=>b(parseInt(e.target.value)),className:"w-full"}),(0,R.jsxs)("div",{className:"text-center text-sm text-gray-600",children:[v," km"]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Sort By"}),(0,R.jsxs)("div",{className:"flex space-x-2",children:[(0,R.jsx)("select",{value:f,onChange:e=>p(e.target.value),className:"flex-1 px-3 py-2 border border-gray-300 rounded-lg focus:border-green-500 focus:outline-none",children:E.map(e=>(0,R.jsx)("option",{value:e.id,children:e.label},e.id))}),(0,R.jsx)("button",{onClick:()=>g("asc"===h?"desc":"asc"),className:"px-3 py-2 bg-gray-200 hover:bg-gray-300 rounded-lg transition-colors duration-200",children:"asc"===h?(0,R.jsx)(Ze,{size:16}):(0,R.jsx)(et,{size:16})})]})]})]}),(0,R.jsx)("div",{className:"flex flex-wrap gap-2 mb-6",children:S.map(e=>(0,R.jsxs)("button",{onClick:()=>m(e.id),className:"px-4 py-2 rounded-lg font-medium transition-colors duration-200 ".concat(u===e.id?"bg-green-500 text-white":e.highlight?"bg-yellow-100 text-yellow-800 hover:bg-yellow-200 border-2 border-yellow-300":"bg-gray-100 text-gray-700 hover:bg-gray-200"),children:[(0,R.jsx)("span",{className:"mr-1",children:e.icon}),e.label," (",e.count,")"]},e.id))})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsxs)("h2",{className:"text-xl font-bold text-gray-800",children:[P.total," ",1===P.total?"Result":"Results"," Found"]}),c&&(0,R.jsx)("button",{onClick:()=>d(""),className:"text-green-600 hover:text-green-700 font-medium text-sm hover:underline transition-colors duration-300",children:"Clear Search"})]}),P.free>0&&"free"!==u&&(0,R.jsx)("div",{className:"bg-gradient-to-r from-yellow-50 to-orange-50 border-2 border-yellow-200 rounded-xl p-4 mb-6",children:(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)("div",{className:"text-3xl",children:"\ud83c\udf81"}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("h3",{className:"text-lg font-bold text-yellow-800",children:[P.free," Free Food",1!==P.free?"s":""," Available!"]}),(0,R.jsx)("p",{className:"text-yellow-700 text-sm",children:"Don't miss out on completely free food items"})]})]}),(0,R.jsx)("button",{onClick:()=>m("free"),className:"bg-yellow-500 hover:bg-yellow-600 text-white px-4 py-2 rounded-lg font-semibold transition-colors duration-200",children:"View Free Foods"})]})}),s?(0,R.jsxs)("div",{className:"text-center py-12",children:[(0,R.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500 mx-auto mb-4"}),(0,R.jsx)("p",{className:"text-gray-600",children:"Loading food listings..."})]}):i?(0,R.jsxs)("div",{className:"text-center py-12",children:[(0,R.jsx)("div",{className:"text-6xl mb-4",children:"\u274c"}),(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"Error loading food"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:i}),(0,R.jsx)("button",{onClick:l,className:"bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors duration-200",children:"Try Again"})]}):_.length>0?(0,R.jsx)("div",{className:"space-y-4",children:_.map((e,t)=>(0,R.jsx)(Qe,{food:e,onClick:N},(null===e||void 0===e?void 0:e.id)||"food-".concat(t)))}):(0,R.jsxs)("div",{className:"card-premium p-12 text-center",children:[(0,R.jsx)("div",{className:"text-6xl mb-4",children:"\ud83d\udd0d"}),(0,R.jsx)("h3",{className:"text-xl font-semibold text-gray-800 mb-2",children:c?"No results found":"No food available"}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:c?"Try adjusting your search terms or filters":"Check back later or search for food in other areas!"}),c&&(0,R.jsx)("button",{onClick:()=>d(""),className:"bg-gradient-to-r from-green-500 to-blue-500 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300 mr-3",children:"Clear Search"}),(0,R.jsx)("button",{onClick:()=>a&&a("home"),className:"bg-gradient-to-r from-gray-500 to-slate-500 text-white px-6 py-3 rounded-xl font-semibold hover:shadow-lg transform hover:scale-105 transition-all duration-300",children:"Go Home"})]})]}),_.length>0&&(0,R.jsxs)("div",{className:"card-premium p-6",children:[(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-4 text-center",children:"Search Summary"}),(0,R.jsxs)("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-4 text-center",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-green-600",children:P.total}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Total Results"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-blue-600",children:P.free}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Free Meals"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-purple-600",children:P.vegetarian}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Vegetarian"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:P.topRated}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Top Rated"})]}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"text-2xl font-bold text-indigo-600",children:["UGX ",P.avgPrice]}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"Avg Price"})]}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"text-2xl font-bold text-emerald-600",children:[P.totalCO2Saved,"kg"]}),(0,R.jsx)("div",{className:"text-sm text-gray-600",children:"CO\u2082 Saved"})]})]})]})]})})},nt=e=>{let{onViewChange:t}=e;return(0,R.jsx)("div",{children:(0,R.jsxs)("div",{className:"p-4 space-y-6 lg:p-6 lg:space-y-8",children:[(0,R.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4",children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800 mb-3 lg:text-lg",children:"Community Impact"}),(0,R.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center lg:gap-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"font-bold text-green-600 text-2xl lg:text-3xl",children:"3,247"}),(0,R.jsx)("div",{className:"text-gray-600 text-xs lg:text-sm",children:"Active Providers"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"font-bold text-blue-600 text-2xl lg:text-3xl",children:"28,456"}),(0,R.jsx)("div",{className:"text-gray-600 text-xs lg:text-sm",children:"Items Rescued"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"font-bold text-purple-600 text-2xl lg:text-3xl",children:"18.9T"}),(0,R.jsx)("div",{className:"text-gray-600 text-xs lg:text-sm",children:"CO\u2082 Saved"})]})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-3 gap-4 lg:gap-6",children:[(0,R.jsxs)("button",{onClick:()=>t("news"),className:"bg-white border border-gray-200 rounded-lg p-4 text-center hover:shadow-md transition-shadow",children:[(0,R.jsx)(de,{className:"mx-auto mb-2 text-blue-600 w-6 h-6 lg:w-8 lg:h-8"}),(0,R.jsx)("span",{className:"font-medium text-sm lg:text-base",children:"News & Events"})]}),(0,R.jsxs)("button",{onClick:()=>t("chat"),className:"bg-white border border-gray-200 rounded-lg p-4 text-center hover:shadow-md transition-shadow",children:[(0,R.jsx)(ne,{className:"mx-auto mb-2 text-green-600 w-6 h-6 lg:w-8 lg:h-8"}),(0,R.jsx)("span",{className:"font-medium text-sm lg:text-base",children:"Messages"})]}),(0,R.jsxs)("button",{onClick:()=>t("panels"),className:"bg-white border border-gray-200 rounded-lg p-4 text-center hover:shadow-md transition-shadow",children:[(0,R.jsx)(ee,{className:"mx-auto mb-2 text-purple-600 w-6 h-6 lg:w-8 lg:h-8"}),(0,R.jsx)("span",{className:"font-medium text-sm lg:text-base",children:"User Panels"})]})]}),(0,R.jsx)("div",{className:"text-center mt-6",children:(0,R.jsx)("button",{onClick:()=>t&&t("home"),className:"bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors duration-200",children:"Back to Home"})})]})})},rt=e=>{let{userPoints:t,onViewChange:n}=e;return(0,R.jsx)("div",{children:(0,R.jsxs)("div",{className:"p-4 lg:p-6",children:[(0,R.jsx)("div",{className:"bg-gradient-to-r from-green-600 to-green-700 rounded-lg p-6 text-white mb-6 lg:p-8 lg:mb-8",children:(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsx)("h2",{className:"font-medium text-lg lg:text-xl",children:"Your Balance"}),(0,R.jsx)("div",{className:"font-bold mt-2 text-4xl lg:text-5xl",children:t}),(0,R.jsx)("div",{className:"opacity-90 text-sm lg:text-base",children:"KindCoins"})]})}),(0,R.jsx)("h3",{className:"font-semibold text-gray-800 mb-3 lg:text-lg lg:mb-4",children:"Community Leaderboard"}),(0,R.jsx)("div",{className:"bg-white rounded-lg shadow-md",children:[{name:"Roshni L.",points:1240,rank:1},{name:"Rania L.",points:980,rank:2},{name:"You",points:t,rank:3},{name:"Robert L.",points:210,rank:4}].map((e,t)=>(0,R.jsxs)("div",{className:"p-4 flex justify-between items-center ".concat("You"===e.name?"bg-green-50":""," ").concat(t<3?"border-b border-gray-200":""),children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ".concat(1===e.rank?"bg-yellow-500 text-white":2===e.rank?"bg-gray-400 text-white":3===e.rank?"bg-orange-500 text-white":"bg-gray-200 text-gray-600"," lg:w-10 lg:h-10 lg:text-base"),children:e.rank}),(0,R.jsx)("span",{className:"font-medium ".concat("You"===e.name?"text-green-600":"text-gray-800"," lg:text-lg"),children:e.name})]}),(0,R.jsx)("span",{className:"font-bold text-gray-800 lg:text-lg",children:e.points})]},t))}),(0,R.jsx)("div",{className:"text-center mt-6",children:(0,R.jsx)("button",{onClick:()=>n&&n("home"),className:"bg-green-500 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-600 transition-colors duration-200",children:"Back to Home"})})]})})},at=C("pen-line",[["path",{d:"M13 21h8",key:"1jsn5i"}],["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),st=C("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]),it=e=>{let{userPoints:t}=e;const{user:n,isAuthenticated:a,updateUser:s}=q(),i=M(),[l,o]=(0,r.useState)("today"),[d,u]=(0,r.useState)(!1),[m,f]=(0,r.useState)(!1),[p,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[y,v]=(0,r.useState)({first_name:"",last_name:"",email:"",phone:"",location:"",business_name:"",profile_image:""}),[w,j]=(0,r.useState)({current_password:"",new_password:"",confirm_password:""}),N={today:{meals:12,co2:8.4,kindcoins:245,water:125,packaging:1.2,foodMiles:.3,treesEquiv:2,carKmEquiv:35},week:{meals:45,co2:32.1,kindcoins:890,water:485,packaging:4.8,foodMiles:1.2,treesEquiv:7,carKmEquiv:134},month:{meals:156,co2:125.6,kindcoins:3240,water:1845,packaging:18.2,foodMiles:4.8,treesEquiv:28,carKmEquiv:524},year:{meals:1840,co2:1456.8,kindcoins:38750,water:22145,packaging:218.6,foodMiles:58.2,treesEquiv:325,carKmEquiv:6089}}[l],k={today:"Today",week:"This Week",month:"This Month",year:"This Year"};(0,r.useEffect)(()=>{n&&v({first_name:n.first_name||"",last_name:n.last_name||"",email:n.email||"",phone:n.phone||"",location:n.location||"",business_name:n.business_name||"",profile_image:n.profile_image||""})},[n]);const _=(e,t)=>{v(n=>c(c({},n),{},{[e]:t}))},S=(e,t)=>{j(n=>c(c({},n),{},{[e]:t}))};return(0,R.jsx)("div",{children:(0,R.jsxs)("div",{className:"p-4 space-y-6 lg:p-6 lg:space-y-8",children:[(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Profile Information"}),!d&&!m&&(0,R.jsxs)("button",{onClick:()=>u(!0),className:"flex items-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors",children:[(0,R.jsx)(at,{size:16}),(0,R.jsx)("span",{children:"Edit Profile"})]})]}),(0,R.jsxs)("div",{className:"text-center",children:[(0,R.jsxs)("div",{className:"relative w-24 h-24 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4 lg:w-32 lg:h-32 overflow-hidden",children:[y.profile_image?(0,R.jsx)("img",{src:y.profile_image,alt:"Profile",className:"w-full h-full object-cover"}):(0,R.jsx)(K,{size:40,className:"text-green-600 lg:w-14 lg:h-14"}),d&&(0,R.jsx)("button",{className:"absolute bottom-0 right-0 bg-green-500 text-white rounded-full p-1 hover:bg-green-600 transition-colors",children:(0,R.jsx)(ze,{size:12})})]}),d?(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"First Name"}),(0,R.jsx)("input",{type:"text",value:y.first_name,onChange:e=>_("first_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Last Name"}),(0,R.jsx)("input",{type:"text",value:y.last_name,onChange:e=>_("last_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email"}),(0,R.jsx)("input",{type:"email",value:y.email,onChange:e=>_("email",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone"}),(0,R.jsx)("input",{type:"tel",value:y.phone,onChange:e=>_("phone",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location"}),(0,R.jsx)("input",{type:"text",value:y.location,onChange:e=>_("location",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Business Name"}),(0,R.jsx)("input",{type:"text",value:y.business_name,onChange:e=>_("business_name",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-green-500 focus:border-transparent"})]}),(0,R.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,R.jsxs)("button",{onClick:async()=>{try{if(x(!0),!n||!a)return void i.error("You must be logged in to update your profile");if(!localStorage.getItem("kindbite_access_token"))return void i.error("Authentication token not found. Please login again.");console.log("Attempting to update profile for user:",n.email);try{const e=await b.updateProfile(y);s(e),u(!1),i.success("Profile updated successfully!")}catch(e){if(403!==e.status)throw e;console.log("Profile update failed with 403, attempting token refresh...");if(!await b.refreshToken())throw new Error("Authentication failed. Please login again.");{console.log("Token refreshed, retrying profile update...");const e=await b.updateProfile(y);s(e),u(!1),i.success("Profile updated successfully!")}}}catch(t){console.error("Error updating profile:",t),403===t.status?i.error("Authentication failed. Please login again."):i.error(t.message||"Failed to update profile. Please try again.")}finally{x(!1)}},disabled:g,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors disabled:opacity-50",children:[(0,R.jsx)(st,{size:16}),(0,R.jsx)("span",{children:g?"Saving...":"Save Changes"})]}),(0,R.jsxs)("button",{onClick:()=>{u(!1),v({first_name:(null===n||void 0===n?void 0:n.first_name)||"",last_name:(null===n||void 0===n?void 0:n.last_name)||"",email:(null===n||void 0===n?void 0:n.email)||"",phone:(null===n||void 0===n?void 0:n.phone)||"",location:(null===n||void 0===n?void 0:n.location)||"",business_name:(null===n||void 0===n?void 0:n.business_name)||"",profile_image:(null===n||void 0===n?void 0:n.profile_image)||""})},className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[(0,R.jsx)(F,{size:16}),(0,R.jsx)("span",{children:"Cancel"})]})]})]}):(0,R.jsxs)("div",{children:[(0,R.jsxs)("h2",{className:"font-semibold text-gray-800 text-xl lg:text-2xl",children:[null===n||void 0===n?void 0:n.first_name," ",null===n||void 0===n?void 0:n.last_name]}),(0,R.jsxs)("div",{className:"space-y-2 mt-3",children:[(0,R.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[(0,R.jsx)(he,{size:16}),(0,R.jsx)("span",{className:"text-sm lg:text-lg",children:null===n||void 0===n?void 0:n.email})]}),(null===n||void 0===n?void 0:n.phone)&&(0,R.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[(0,R.jsx)(we,{size:16}),(0,R.jsx)("span",{className:"text-sm lg:text-lg",children:n.phone})]}),(null===n||void 0===n?void 0:n.location)&&(0,R.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-gray-600",children:[(0,R.jsx)(je,{size:16}),(0,R.jsx)("span",{className:"text-sm lg:text-lg",children:n.location})]}),(null===n||void 0===n?void 0:n.business_name)&&(0,R.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-blue-600",children:[(0,R.jsx)(ie,{size:16}),(0,R.jsx)("span",{className:"text-sm lg:text-lg",children:n.business_name})]})]}),(0,R.jsxs)("div",{className:"flex items-center justify-center space-x-2 mt-4",children:[(0,R.jsx)("span",{className:"text-green-600 bg-green-100 px-3 py-1 rounded-full text-sm lg:text-base lg:px-4 lg:py-2",children:"Active Community Member"}),(0,R.jsx)("span",{className:"text-yellow-600 bg-yellow-100 px-3 py-1 rounded-full text-sm lg:text-base lg:px-4 lg:py-2",children:"\ud83c\udf31 Eco Warrior"})]})]})]})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4",children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800 mb-4 text-center lg:text-lg",children:"Your Environmental Impact"}),(0,R.jsx)("div",{className:"grid grid-cols-4 gap-2 mb-6 lg:gap-4",children:Object.entries(k).map(e=>{let[t,n]=e;return(0,R.jsx)("button",{onClick:()=>o(t),className:"py-2 px-3 rounded-lg text-xs font-medium transition-colors lg:text-sm lg:py-3 lg:px-4 ".concat(l===t?"bg-green-600 text-white":"bg-gray-100 text-gray-600 hover:bg-gray-200"),children:n},t)})}),(0,R.jsxs)("div",{className:"bg-gradient-to-r from-green-50 to-blue-50 rounded-lg p-4",children:[(0,R.jsxs)("h4",{className:"font-semibold text-gray-800 mb-3 text-center lg:text-lg",children:[k[l]," Impact"]}),(0,R.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center mb-4 lg:gap-6",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"font-bold text-green-600 text-xl lg:text-2xl",children:N.meals}),(0,R.jsx)("div",{className:"text-gray-600 text-xs lg:text-sm",children:"Meals Saved"})]}),(0,R.jsxs)("div",{children:[(0,R.jsxs)("div",{className:"font-bold text-blue-600 text-xl lg:text-2xl",children:[N.co2,"kg"]}),(0,R.jsx)("div",{className:"text-gray-600 text-xs lg:text-sm",children:"CO\u2082 Prevented"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"font-bold text-purple-600 text-xl lg:text-2xl",children:N.kindcoins}),(0,R.jsx)("div",{className:"text-gray-600 text-xs lg:text-sm",children:"KindCoins"})]})]})]})]}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,R.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Security Settings"}),!m&&!d&&(0,R.jsxs)("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors",children:[(0,R.jsx)(ye,{size:16}),(0,R.jsx)("span",{children:"Change Password"})]})]}),m?(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("input",{type:p?"text":"password",value:w.current_password,onChange:e=>S("current_password",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,R.jsx)("button",{type:"button",onClick:()=>h(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?(0,R.jsx)(xe,{size:16}):(0,R.jsx)(ye,{size:16})})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),(0,R.jsxs)("div",{className:"relative",children:[(0,R.jsx)("input",{type:p?"text":"password",value:w.new_password,onChange:e=>S("new_password",e.target.value),className:"w-full px-3 py-2 pr-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),(0,R.jsx)("button",{type:"button",onClick:()=>h(!p),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:p?(0,R.jsx)(xe,{size:16}):(0,R.jsx)(ye,{size:16})})]}),(0,R.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Password must be at least 8 characters long"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),(0,R.jsx)("input",{type:"password",value:w.confirm_password,onChange:e=>S("confirm_password",e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),(0,R.jsxs)("div",{className:"flex space-x-3 pt-4",children:[(0,R.jsxs)("button",{onClick:async()=>{if(w.new_password===w.confirm_password)if(w.new_password.length<8)i.error("Password must be at least 8 characters long");else try{x(!0);try{await b.changePassword({current_password:w.current_password,new_password:w.new_password}),f(!1),j({current_password:"",new_password:"",confirm_password:""}),i.success("Password changed successfully!")}catch(e){if(403!==e.status)throw e;console.log("Password change failed with 403, attempting token refresh...");if(!await b.refreshToken())throw new Error("Authentication failed. Please login again.");console.log("Token refreshed, retrying password change..."),await b.changePassword({current_password:w.current_password,new_password:w.new_password}),f(!1),j({current_password:"",new_password:"",confirm_password:""}),i.success("Password changed successfully!")}}catch(t){console.error("Error changing password:",t),i.error(t.message||"Failed to change password. Please try again.")}finally{x(!1)}else i.error("New passwords do not match")},disabled:g,className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors disabled:opacity-50",children:[(0,R.jsx)(st,{size:16}),(0,R.jsx)("span",{children:g?"Changing...":"Change Password"})]}),(0,R.jsxs)("button",{onClick:()=>{f(!1),j({current_password:"",new_password:"",confirm_password:""})},className:"flex-1 flex items-center justify-center space-x-2 px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors",children:[(0,R.jsx)(F,{size:16}),(0,R.jsx)("span",{children:"Cancel"})]})]})]}):(0,R.jsx)("div",{className:"text-center text-gray-600",children:(0,R.jsx)("p",{className:"text-sm",children:"Keep your account secure with a strong password"})})]})]})})},lt=()=>(0,R.jsx)("div",{children:(0,R.jsxs)("div",{className:"p-4 space-y-8 lg:p-6 lg:space-y-10",children:[(0,R.jsxs)("div",{className:"bg-gradient-to-br from-green-600 via-green-500 to-blue-600 rounded-2xl p-6 text-white text-center",children:[(0,R.jsx)("div",{className:"mb-4 text-6xl lg:text-8xl",children:"\ud83c\udf0d"}),(0,R.jsx)("h2",{className:"font-bold mb-2 text-2xl lg:text-3xl",children:"KindBite"}),(0,R.jsx)("p",{className:"mb-4 text-green-100 lg:text-lg",children:"Connecting Hearts, Reducing Waste, Fighting Hunger"}),(0,R.jsxs)("div",{className:"grid grid-cols-3 gap-4 mt-6 lg:gap-6",children:[(0,R.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:[(0,R.jsx)("div",{className:"font-bold text-2xl lg:text-3xl",children:"28K+"}),(0,R.jsx)("div",{className:"opacity-90 text-xs lg:text-sm",children:"Items Rescued"})]}),(0,R.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:[(0,R.jsx)("div",{className:"font-bold text-2xl lg:text-3xl",children:"3.2K"}),(0,R.jsx)("div",{className:"opacity-90 text-xs lg:text-sm",children:"Active Providers"})]}),(0,R.jsxs)("div",{className:"bg-white bg-opacity-20 rounded-lg p-3",children:[(0,R.jsx)("div",{className:"font-bold text-2xl lg:text-3xl",children:"19T"}),(0,R.jsx)("div",{className:"opacity-90 text-xs lg:text-sm",children:"CO\u2082 Saved"})]})]})]}),(0,R.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,R.jsx)("h3",{className:"font-bold text-gray-800 mb-4 text-center text-lg lg:text-xl",children:"Our Mission"}),(0,R.jsx)("p",{className:"text-gray-600 text-center leading-relaxed lg:text-lg",children:"To create a global ecosystem where food waste becomes food security, connecting restaurants, home kitchens, food factories, supermarkets, and retail shops with communities in need."})]}),(0,R.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6",children:[(0,R.jsx)("h3",{className:"font-bold text-gray-800 mb-6 text-center text-lg lg:text-xl",children:"Complete Food Ecosystem"}),(0,R.jsx)("div",{className:"grid grid-cols-3 gap-4 lg:gap-6",children:[{icon:"\ud83c\udf7d\ufe0f",title:"Restaurants",desc:"Traditional food establishments"},{icon:"\ud83c\udfe0",title:"Home Kitchens",desc:"Community food sharing"},{icon:"\ud83c\udfed",title:"Food Factories",desc:"Production facilities"},{icon:"\ud83d\uded2",title:"Supermarkets",desc:"Large retail stores"},{icon:"\ud83c\udfea",title:"Retail Shops",desc:"Small shops & caf\xe9s"},{icon:"\ud83e\ude7a",title:"Food Verifiers",desc:"Volunteer doctors ensuring safety"}].map((e,t)=>(0,R.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 text-center",children:[(0,R.jsx)("div",{className:"mb-3 text-2xl lg:text-3xl",children:e.icon}),(0,R.jsx)("h4",{className:"font-semibold text-gray-800 mb-2 text-sm lg:text-base",children:e.title}),(0,R.jsx)("p",{className:"text-gray-600 text-xs lg:text-sm",children:e.desc})]},t))})]})]})}),ot=()=>{const{user:e}=q(),t=M(),[n,a]=(0,r.useState)([]),[s,i]=(0,r.useState)(!0),[l,o]=(0,r.useState)("upcoming"),[c,d]=(0,r.useState)(null);(0,r.useEffect)(()=>{u();const e=()=>{u()};return window.addEventListener("reservationCreated",e),window.addEventListener("reservationUpdated",e),window.addEventListener("reservationStatusChanged",e),()=>{window.removeEventListener("reservationCreated",e),window.removeEventListener("reservationUpdated",e),window.removeEventListener("reservationStatusChanged",e)}},[]);const u=async()=>{try{if(i(!0),!e)return void t.error("You must be logged in to view reservations");if(!localStorage.getItem("kindbite_access_token"))return void t.error("Authentication token not found. Please login again.");try{const e=await De.getUserReservations();console.log("Reservations data received:",e),Array.isArray(e)?a(e):e&&Array.isArray(e.results)?(console.log("First reservation details:",e.results[0]),a(e.results)):e&&Array.isArray(e.reservations)?(console.log("First reservation details:",e.reservations[0]),a(e.reservations)):(console.log("No reservations data found, setting empty array"),a([])),d(new Date)}catch(n){if(403!==n.status)throw n;console.log("Reservations load failed with 403, attempting token refresh...");if(!await b.refreshToken())throw new Error("Authentication failed. Please login again.");{console.log("Token refreshed, retrying reservations load...");const e=await De.getUserReservations();console.log("Retry reservations data received:",e),Array.isArray(e)?a(e):e&&Array.isArray(e.results)?a(e.results):e&&Array.isArray(e.reservations)?a(e.reservations):(console.log("No retry reservations data found, setting empty array"),a([]))}}}catch(r){console.error("Error loading reservations:",r),403===r.status?t.error("Authentication failed. Please login again."):t.error("Failed to load reservations")}finally{i(!1)}},m=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=e=>{switch(e){case"confirmed":return(0,R.jsx)("span",{className:"w-2 h-2 bg-green-500 rounded-full"});case"pending":return(0,R.jsx)("span",{className:"w-2 h-2 bg-yellow-500 rounded-full animate-pulse"});case"cancelled":return(0,R.jsx)("span",{className:"w-2 h-2 bg-red-500 rounded-full"});case"completed":return(0,R.jsx)("span",{className:"w-2 h-2 bg-blue-500 rounded-full"});default:return(0,R.jsx)("span",{className:"w-2 h-2 bg-gray-500 rounded-full"})}},p=e=>{if(!e)return"Not specified";try{const t=new Date(e);return isNaN(t.getTime())?"Invalid Date":t.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}catch(t){return console.error("Error formatting date:",t),"Invalid Date"}},h=e=>{if(!e)return"Not specified";try{let t;return t=e.includes("T")?new Date(e):e.includes(":")?new Date("2000-01-01T".concat(e)):new Date(e),isNaN(t.getTime())?"Invalid Time":t.toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})}catch(t){return console.error("Error formatting time:",t),"Invalid Time"}},g=Array.isArray(n)?n.filter(e=>{switch(l){case"upcoming":return["confirmed","pending"].includes(e.status);case"completed":return"completed"===e.status;case"cancelled":return"cancelled"===e.status;default:return!0}}):[];return s?(0,R.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-24",children:(0,R.jsx)("div",{className:"p-4 lg:p-6",children:(0,R.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,R.jsx)("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})})})}):(0,R.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-24",children:(0,R.jsxs)("div",{className:"p-4 lg:p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)(de,{className:"w-8 h-8 text-green-600"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"My Reservations"}),(0,R.jsxs)("p",{className:"text-gray-600",children:["Manage your food reservations",c&&(0,R.jsxs)("span",{className:"text-xs text-gray-500 ml-2",children:["Last updated: ",c.toLocaleTimeString()]})]})]})]}),(0,R.jsxs)("button",{onClick:u,disabled:s,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[(0,R.jsx)(Ae,{className:"w-4 h-4 ".concat(s?"animate-spin":"")}),(0,R.jsx)("span",{children:"Refresh"})]})]}),(0,R.jsx)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[{id:"upcoming",label:"Upcoming",count:Array.isArray(n)?n.filter(e=>["confirmed","pending"].includes(e.status)).length:0},{id:"completed",label:"Completed",count:Array.isArray(n)?n.filter(e=>"completed"===e.status).length:0},{id:"cancelled",label:"Cancelled",count:Array.isArray(n)?n.filter(e=>"cancelled"===e.status).length:0}].map(e=>(0,R.jsxs)("button",{onClick:()=>o(e.id),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat(l===e.id?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[e.label," (",e.count,")"]},e.id))})]}),(0,R.jsx)("div",{className:"space-y-4",children:0===g.length?(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,R.jsx)(de,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No reservations found"}),(0,R.jsx)("p",{className:"text-gray-600",children:"upcoming"===l?"You don't have any upcoming reservations.":"You don't have any ".concat(l," reservations.")})]}):g.map(e=>{var t,n,r,a,s,i,l,o,c,d,u;return(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)("span",{className:"text-3xl",children:(null===(t=e.food_listing)||void 0===t?void 0:t.image)||"\ud83c\udf7d\ufe0f"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:(null===(n=e.food_listing)||void 0===n?void 0:n.name)||"Food Item"}),(0,R.jsx)("p",{className:"text-gray-600",children:(null===(r=e.food_listing)||void 0===r?void 0:r.restaurant_name)||(null===(a=e.food_listing)||void 0===a||null===(s=a.provider)||void 0===s?void 0:s.business_name)})]})]}),(0,R.jsxs)("div",{className:"flex flex-col items-end space-y-2",children:[(0,R.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ".concat(m(e.status)),children:[f(e.status),(0,R.jsx)("span",{children:(null===(i=e.status)||void 0===i?void 0:i.charAt(0).toUpperCase())+(null===(l=e.status)||void 0===l?void 0:l.slice(1))})]}),"pending"===e.status&&(0,R.jsx)("span",{className:"text-xs text-gray-500",children:"Waiting for confirmation"}),"confirmed"===e.status&&(0,R.jsx)("span",{className:"text-xs text-green-600",children:"\u2713 Confirmed by provider"}),"completed"===e.status&&(0,R.jsx)("span",{className:"text-xs text-blue-600",children:"\u2713 Food picked up"})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(de,{className:"w-5 h-5 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Pickup Date"}),(0,R.jsx)("p",{className:"font-medium text-gray-800",children:p((null===(o=e.food_listing)||void 0===o?void 0:o.pickup_date)||e.pickup_date)})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(Oe,{className:"w-5 h-5 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Pickup Time"}),(0,R.jsx)("p",{className:"font-medium text-gray-800",children:h((null===(c=e.food_listing)||void 0===c?void 0:c.pickup_window)||e.pickup_time)})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(je,{className:"w-5 h-5 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Location"}),(0,R.jsx)("p",{className:"font-medium text-gray-800",children:null===(d=e.food_listing)||void 0===d?void 0:d.location})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(K,{className:"w-5 h-5 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Quantity"}),(0,R.jsxs)("p",{className:"font-medium text-gray-800",children:[e.quantity_reserved||e.quantity||1," item",(e.quantity_reserved||e.quantity||1)>1?"s":""]})]})]})]}),(null===(u=e.food_listing)||void 0===u?void 0:u.provider)&&(0,R.jsx)("div",{className:"border-t border-gray-200 pt-4",children:(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(we,{className:"w-4 h-4 text-gray-400"}),(0,R.jsx)("span",{className:"text-sm text-gray-600",children:e.food_listing.provider.phone})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(ne,{className:"w-4 h-4 text-gray-400"}),(0,R.jsx)("span",{className:"text-sm text-gray-600",children:e.food_listing.provider.email})]})]}),(0,R.jsxs)("div",{className:"flex space-x-2",children:["confirmed"===e.status&&(0,R.jsx)("button",{className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm",children:"Cancel"}),(0,R.jsx)("button",{className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm",children:"Contact Provider"})]})]})})]},e.id)})})]})})},ct=()=>{var e;const{user:t}=q(),n=M(),[a,s]=(0,r.useState)([]),[i,l]=(0,r.useState)(!0),[o,c]=(0,r.useState)("pending"),[d,u]=(0,r.useState)(null),[m,f]=(0,r.useState)(!1);(0,r.useEffect)(()=>{p();const e=()=>{p()};return window.addEventListener("reservationCreated",e),window.addEventListener("reservationUpdated",e),()=>{window.removeEventListener("reservationCreated",e),window.removeEventListener("reservationUpdated",e)}},[]);const p=async()=>{try{if(l(!0),!t)return void n.error("You must be logged in to view reservations");if(!localStorage.getItem("kindbite_access_token"))return void n.error("Authentication token not found. Please login again.");try{const e=await De.getUserReservations();console.log("Provider reservations data received:",e),Array.isArray(e)?s(e):e&&Array.isArray(e.results)?s(e.results):e&&Array.isArray(e.reservations)?s(e.reservations):e&&e.id?s([e]):s([])}catch(e){if(403!==e.status)throw e;if(!await b.refreshToken())throw new Error("Authentication failed. Please login again.");{const e=await De.getUserReservations();Array.isArray(e)?s(e):e&&Array.isArray(e.results)?s(e.results):e&&Array.isArray(e.reservations)?s(e.reservations):e&&e.id?s([e]):s([])}}}catch(r){console.error("Error loading reservations:",r),403===r.status?n.error("Authentication failed. Please login again."):n.error("Failed to load reservations")}finally{l(!1)}},h=async(e,t)=>{try{const r=await De.updateReservationStatus(e,t);s(t=>t.map(t=>t.id===e?r:t)),window.dispatchEvent(new CustomEvent("reservationStatusChanged")),n.success("Reservation ".concat(t," successfully"))}catch(r){console.error("Error updating reservation:",r),n.error("Failed to update reservation")}},g=e=>{switch(e){case"confirmed":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"cancelled":return"bg-red-100 text-red-800";case"completed":return"bg-blue-100 text-blue-800";case"picked_up":return"bg-purple-100 text-purple-800";default:return"bg-gray-100 text-gray-800"}},x=e=>{switch(e){case"confirmed":case"completed":case"picked_up":return(0,R.jsx)(P,{className:"w-4 h-4"});case"pending":default:return(0,R.jsx)(T,{className:"w-4 h-4"});case"cancelled":return(0,R.jsx)(A,{className:"w-4 h-4"})}},y=Array.isArray(a)?a.filter(e=>{switch(o){case"pending":return"pending"===e.status;case"confirmed":return"confirmed"===e.status;case"completed":return["completed","picked_up"].includes(e.status);case"cancelled":return"cancelled"===e.status;default:return!0}}):[];return i?(0,R.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-24",children:(0,R.jsx)("div",{className:"p-4 lg:p-6",children:(0,R.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,R.jsx)("div",{className:"w-8 h-8 border-4 border-green-500 border-t-transparent rounded-full animate-spin"})})})}):(0,R.jsxs)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-24",children:[(0,R.jsxs)("div",{className:"p-4 lg:p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)(de,{className:"w-8 h-8 text-green-600"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:(()=>{switch(null===t||void 0===t?void 0:t.user_role){case"restaurant":return"Restaurant Reservations";case"home":return"Home Kitchen Reservations";case"factory":return"Factory Reservations";case"supermarket":return"Supermarket Reservations";case"retail":return"Retail Shop Reservations";default:return"Food Reservations"}})()}),(0,R.jsx)("p",{className:"text-gray-600",children:"Manage food reservations from customers"})]})]}),(0,R.jsxs)("button",{onClick:p,disabled:i,className:"flex items-center space-x-2 px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors disabled:opacity-50",children:[(0,R.jsx)(Ae,{className:"w-4 h-4 ".concat(i?"animate-spin":"")}),(0,R.jsx)("span",{children:"Refresh"})]})]}),(0,R.jsx)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1",children:[{id:"pending",label:"Pending",count:Array.isArray(a)?a.filter(e=>"pending"===e.status).length:0},{id:"confirmed",label:"Confirmed",count:Array.isArray(a)?a.filter(e=>"confirmed"===e.status).length:0},{id:"completed",label:"Completed",count:Array.isArray(a)?a.filter(e=>["completed","picked_up"].includes(e.status)).length:0},{id:"cancelled",label:"Cancelled",count:Array.isArray(a)?a.filter(e=>"cancelled"===e.status).length:0}].map(e=>(0,R.jsxs)("button",{onClick:()=>c(e.id),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat(o===e.id?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[e.label," (",e.count,")"]},e.id))})]}),(0,R.jsx)("div",{className:"space-y-4",children:0===y.length?(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-8 text-center",children:[(0,R.jsx)(de,{className:"w-16 h-16 text-gray-400 mx-auto mb-4"}),(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-2",children:"No reservations found"}),(0,R.jsx)("p",{className:"text-gray-600",children:"pending"===o?"You don't have any pending reservations.":"You don't have any ".concat(o," reservations.")})]}):y.map(e=>{var t,n,r,a,s,i,l,o,c;return(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex items-start justify-between mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)("span",{className:"text-3xl",children:(null===(t=e.food_listing)||void 0===t?void 0:t.image_emoji)||"\ud83c\udf7d\ufe0f"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:(null===(n=e.food_listing)||void 0===n?void 0:n.name)||"Food Item"}),(0,R.jsxs)("p",{className:"text-gray-600",children:["Reserved by: ",e.seeker_name||"Unknown Customer"]})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium flex items-center space-x-1 ".concat(g(e.status)),children:[x(e.status),(0,R.jsx)("span",{children:(null===(r=e.status)||void 0===r?void 0:r.charAt(0).toUpperCase())+(null===(a=e.status)||void 0===a?void 0:a.slice(1))})]}),(0,R.jsx)("button",{onClick:()=>{u(e),f(!0)},className:"p-2 text-gray-400 hover:text-gray-600 transition-colors",title:"View Details",children:(0,R.jsx)(ye,{className:"w-5 h-5"})})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4 mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(de,{className:"w-5 h-5 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Pickup Date"}),(0,R.jsx)("p",{className:"font-medium text-gray-800",children:(c=null===(s=e.food_listing)||void 0===s?void 0:s.pickup_date,new Date(c).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(Oe,{className:"w-5 h-5 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Pickup Time"}),(0,R.jsxs)("p",{className:"font-medium text-gray-800",children:[null===(i=e.food_listing)||void 0===i?void 0:i.pickup_window_start," - ",null===(l=e.food_listing)||void 0===l?void 0:l.pickup_window_end]})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(K,{className:"w-5 h-5 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Quantity"}),(0,R.jsxs)("p",{className:"font-medium text-gray-800",children:[e.quantity_reserved," item",e.quantity_reserved>1?"s":""]})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(je,{className:"w-5 h-5 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Location"}),(0,R.jsx)("p",{className:"font-medium text-gray-800",children:null===(o=e.food_listing)||void 0===o?void 0:o.location})]})]})]}),e.seeker&&(0,R.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,R.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Customer Contact Information"}),(0,R.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(K,{className:"w-4 h-4 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Name"}),(0,R.jsxs)("p",{className:"font-medium text-gray-800",children:[e.seeker.first_name," ",e.seeker.last_name]})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(we,{className:"w-4 h-4 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Phone"}),(0,R.jsx)("p",{className:"font-medium text-gray-800",children:e.seeker_phone||"Not provided"})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(he,{className:"w-4 h-4 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Email"}),(0,R.jsx)("p",{className:"font-medium text-gray-800",children:e.seeker_email||"Not provided"})]})]}),(0,R.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,R.jsx)(je,{className:"w-4 h-4 text-gray-400"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Location"}),(0,R.jsx)("p",{className:"font-medium text-gray-800",children:e.seeker.location})]})]})]})]}),e.special_instructions&&(0,R.jsxs)("div",{className:"border-t border-gray-200 pt-4",children:[(0,R.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-2",children:"Special Instructions"}),(0,R.jsx)("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:e.special_instructions})]}),(0,R.jsx)("div",{className:"border-t border-gray-200 pt-4 mt-4",children:(0,R.jsxs)("div",{className:"flex flex-wrap gap-2",children:["pending"===e.status&&(0,R.jsxs)(R.Fragment,{children:[(0,R.jsxs)("button",{onClick:()=>h(e.id,"confirmed"),className:"px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 transition-colors text-sm flex items-center space-x-2",children:[(0,R.jsx)(P,{className:"w-4 h-4"}),(0,R.jsx)("span",{children:"Confirm"})]}),(0,R.jsxs)("button",{onClick:()=>h(e.id,"cancelled"),className:"px-4 py-2 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors text-sm flex items-center space-x-2",children:[(0,R.jsx)(A,{className:"w-4 h-4"}),(0,R.jsx)("span",{children:"Cancel"})]})]}),"confirmed"===e.status&&(0,R.jsxs)("button",{onClick:()=>h(e.id,"completed"),className:"px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600 transition-colors text-sm flex items-center space-x-2",children:[(0,R.jsx)(P,{className:"w-4 h-4"}),(0,R.jsx)("span",{children:"Mark as Picked Up"})]}),(0,R.jsxs)("button",{onClick:()=>{var t;window.location.href="mailto:".concat(e.seeker_email,"?subject=KindBite Reservation - ").concat(null===(t=e.food_listing)||void 0===t?void 0:t.name)},className:"px-4 py-2 bg-gray-500 text-white rounded-lg hover:bg-gray-600 transition-colors text-sm flex items-center space-x-2",children:[(0,R.jsx)(ne,{className:"w-4 h-4"}),(0,R.jsx)("span",{children:"Contact Customer"})]})]})})]},e.id)})})]}),m&&d&&(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,R.jsx)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] overflow-y-auto",children:(0,R.jsxs)("div",{className:"p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Reservation Details"}),(0,R.jsx)("button",{onClick:()=>f(!1),className:"text-gray-400 hover:text-gray-600",children:(0,R.jsx)(A,{className:"w-6 h-6"})})]}),(0,R.jsxs)("div",{className:"space-y-4",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800",children:"Food Item"}),(0,R.jsx)("p",{className:"text-gray-600",children:null===(e=d.food_listing)||void 0===e?void 0:e.name})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800",children:"Customer"}),(0,R.jsx)("p",{className:"text-gray-600",children:d.seeker_name})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800",children:"Contact"}),(0,R.jsx)("p",{className:"text-gray-600",children:d.seeker_email}),(0,R.jsx)("p",{className:"text-gray-600",children:d.seeker_phone})]})]})]})})})]})},dt=e=>{let{onDeleteFood:t}=e;const{user:n}=q(),a=M(),[s,i]=(0,r.useState)([]),[l,o]=(0,r.useState)(!0),[c,d]=(0,r.useState)("all");(0,r.useEffect)(()=>{u();const e=()=>{u()};return window.addEventListener("refreshMyFoodListings",e),()=>{window.removeEventListener("refreshMyFoodListings",e)}},[]);const u=async()=>{try{if(o(!0),!n)return void a.error("You must be logged in to view your food listings");if(!localStorage.getItem("kindbite_access_token"))return void a.error("Authentication token not found. Please login again.");try{const e=await De.getMyFoodListings();console.log("My food listings data received:",e),Array.isArray(e)?i(e):e&&Array.isArray(e.results)?i(e.results):(console.log("No food listings data found, setting empty array"),i([]))}catch(e){if(403!==e.status)throw e;console.log("Food listings load failed with 403, attempting token refresh...");if(!await b.refreshToken())throw new Error("Authentication failed. Please login again.");{console.log("Token refreshed, retrying food listings load...");const e=await De.getMyFoodListings();console.log("Retry food listings data received:",e),Array.isArray(e)?i(e):e&&Array.isArray(e.results)?i(e.results):(console.log("No retry food listings data found, setting empty array"),i([]))}}}catch(t){console.error("Error loading food listings:",t),403===t.status?a.error("Authentication failed. Please login again."):a.error("Failed to load food listings")}finally{o(!1)}},m=e=>{switch(e){case"available":return"bg-green-100 text-green-800";case"reserved":return"bg-yellow-100 text-yellow-800";case"expired":return"bg-red-100 text-red-800";case"collected":return"bg-blue-100 text-blue-800";default:return"bg-gray-100 text-gray-800"}},f=Array.isArray(s)?s.filter(e=>{switch(c){case"active":return["available","reserved"].includes(e.status);case"expired":return["expired","collected"].includes(e.status);default:return!0}}):[];return l?(0,R.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-24",children:(0,R.jsx)("div",{className:"p-4 lg:p-6",children:(0,R.jsxs)("div",{className:"flex justify-center items-center h-64",children:[(0,R.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-green-500"}),(0,R.jsx)("p",{className:"ml-3 text-gray-600",children:"Loading your food listings..."})]})})}):(0,R.jsx)("div",{className:"min-h-screen bg-gray-50 pt-20 pb-24",children:(0,R.jsx)("div",{className:"p-4 lg:p-6",children:(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-6",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)(de,{className:"w-8 h-8 text-green-600"}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h1",{className:"text-2xl font-bold text-gray-800",children:"My Food Listings"}),(0,R.jsx)("p",{className:"text-gray-600",children:"Manage your food listings and track their status"})]})]}),(0,R.jsxs)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("openFoodManagement"))},className:"bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors flex items-center space-x-2",children:[(0,R.jsx)(Te,{size:20}),(0,R.jsx)("span",{children:"Add New Listing"})]})]}),(0,R.jsx)("div",{className:"flex space-x-1 bg-gray-100 rounded-lg p-1 mb-6",children:[{id:"all",label:"All Listings",count:Array.isArray(s)?s.length:0},{id:"active",label:"Active",count:Array.isArray(s)?s.filter(e=>["available","reserved"].includes(e.status)).length:0},{id:"expired",label:"Expired",count:Array.isArray(s)?s.filter(e=>["expired","collected"].includes(e.status)).length:0}].map(e=>(0,R.jsxs)("button",{onClick:()=>d(e.id),className:"flex-1 py-2 px-4 rounded-md text-sm font-medium transition-colors ".concat(c===e.id?"bg-white text-green-600 shadow-sm":"text-gray-600 hover:text-gray-800"),children:[e.label," (",e.count,")"]},e.id))}),0===f.length?(0,R.jsxs)("div",{className:"text-center py-12",children:[(0,R.jsx)(de,{size:64,className:"text-gray-300 mx-auto mb-4"}),(0,R.jsx)("p",{className:"text-xl font-semibold text-gray-700 mb-2",children:"No food listings found"}),(0,R.jsx)("p",{className:"text-gray-500 mb-6",children:"all"===c?"You haven't created any food listings yet.":"You don't have any ".concat(c," food listings.")}),(0,R.jsx)("button",{onClick:()=>{window.dispatchEvent(new CustomEvent("openFoodManagement"))},className:"bg-green-600 text-white px-6 py-3 rounded-lg hover:bg-green-700 transition-colors",children:"Create Your First Listing"})]}):(0,R.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(e=>{return(0,R.jsxs)("div",{className:"bg-white border border-gray-200 rounded-lg p-5 hover:shadow-md transition-shadow",children:[(0,R.jsxs)("div",{className:"flex justify-between items-start mb-3",children:[(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800",children:e.name}),(0,R.jsx)("span",{className:"px-3 py-1 rounded-full text-xs font-medium ".concat(m(e.status)),children:e.status.charAt(0).toUpperCase()+e.status.slice(1)})]}),(0,R.jsx)("p",{className:"text-gray-600 text-sm mb-3 line-clamp-2",children:e.description}),(0,R.jsxs)("div",{className:"space-y-2 text-sm text-gray-700 mb-4",children:[(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(je,{size:16,className:"mr-2 text-green-500"}),(0,R.jsx)("span",{children:e.location||"Location not specified"})]}),(0,R.jsxs)("div",{className:"flex items-center",children:[(0,R.jsx)(Oe,{size:16,className:"mr-2 text-green-500"}),(0,R.jsxs)("span",{children:["Expires: ",(n=e.expiry_date,new Date(n).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}))]})]}),(0,R.jsx)("div",{className:"flex items-center",children:(0,R.jsxs)("span",{children:["Quantity: ",e.quantity]})}),(0,R.jsx)("div",{className:"flex items-center",children:(0,R.jsxs)("span",{children:["Price: $",e.price||"Free"]})})]}),(0,R.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,R.jsx)("button",{className:"p-2 text-gray-600 hover:text-green-600 hover:bg-green-50 rounded-lg transition-colors",children:(0,R.jsx)(ye,{size:16})}),(0,R.jsx)("button",{className:"p-2 text-gray-600 hover:text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:(0,R.jsx)(Le,{size:16})}),(0,R.jsx)("button",{onClick:()=>(async e=>{if(window.confirm("Are you sure you want to delete this food listing?"))try{await t(e)}catch(n){console.error("Error deleting food listing:",n),a.error("Failed to delete food listing. Please try again.")}})(e.id),className:"p-2 text-gray-600 hover:text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:(0,R.jsx)(Fe,{size:16})})]})]},e.id);var n})})]})})})},ut=C("loader",[["path",{d:"M12 2v4",key:"3427ic"}],["path",{d:"m16.2 7.8 2.9-2.9",key:"r700ao"}],["path",{d:"M18 12h4",key:"wj9ykh"}],["path",{d:"m16.2 16.2 2.9 2.9",key:"1bxg5t"}],["path",{d:"M12 18v4",key:"jadmvz"}],["path",{d:"m4.9 19.1 2.9-2.9",key:"bwix9q"}],["path",{d:"M2 12h4",key:"j09sii"}],["path",{d:"m4.9 4.9 2.9 2.9",key:"giyufr"}]]);const mt=new class{async createPaymentIntent(e){try{const t={amount:e.food_listing.discounted_price*e.quantity_reserved,currency:"UGX",reservation_id:e.id,food_listing_id:e.food_listing.id,customer_email:e.seeker.email,customer_name:"".concat(e.seeker.first_name," ").concat(e.seeker.last_name),description:"Payment for ".concat(e.food_listing.name," from ").concat(e.food_listing.restaurant_name),metadata:{food_name:e.food_listing.name,restaurant_name:e.food_listing.restaurant_name,quantity:e.quantity_reserved,pickup_date:e.food_listing.pickup_date}};return await b.request(x.CREATE_INTENT,{method:"POST",body:JSON.stringify(t),requiresAuth:!0})}catch(t){throw console.error("Error creating payment intent:",t),t}}async confirmPaymentIntent(e,t){try{const n={payment_intent_id:e,payment_method_id:t};return await b.request(x.CONFIRM(e),{method:"POST",body:JSON.stringify(n),requiresAuth:!0})}catch(n){throw console.error("Error confirming payment:",n),n}}async processKindCoinsPayment(e,t){try{const n={type:"kindcoins_payment",reservation_id:e.id,amount:t,currency:"KINDCOINS",description:"KindCoins payment for ".concat(e.food_listing.name),metadata:{food_name:e.food_listing.name,restaurant_name:e.food_listing.restaurant_name,quantity:e.quantity_reserved}};return await b.request(x.KINDCOINS,{method:"POST",body:JSON.stringify(n),requiresAuth:!0})}catch(n){throw console.error("Error processing KindCoins payment:",n),n}}async getPaymentMethods(){try{return await b.request(x.METHODS,{requiresAuth:!0})}catch(e){throw console.error("Error fetching payment methods:",e),e}}async addPaymentMethod(e){try{return await b.request(x.METHODS,{method:"POST",body:JSON.stringify(e),requiresAuth:!0})}catch(t){throw console.error("Error adding payment method:",t),t}}async setDefaultPaymentMethod(e){try{return await b.request(x.SET_DEFAULT(e),{method:"POST",requiresAuth:!0})}catch(t){throw console.error("Error setting default payment method:",t),t}}async getPaymentHistory(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.keys(e).forEach(n=>{null!==e[n]&&void 0!==e[n]&&""!==e[n]&&t.append(n,e[n])});const n=t.toString(),r=n?"".concat(x.TRANSACTIONS,"?").concat(n):x.TRANSACTIONS;return await b.request(r,{requiresAuth:!0})}catch(t){throw console.error("Error fetching payment history:",t),t}}async getKindCoinsBalance(){try{return await b.request(x.KINDCOINS,{requiresAuth:!0})}catch(e){throw console.error("Error fetching KindCoins balance:",e),e}}async getKindCoinsTransactions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};try{const t=new URLSearchParams;Object.keys(e).forEach(n=>{null!==e[n]&&void 0!==e[n]&&""!==e[n]&&t.append(n,e[n])});const n=t.toString(),r=n?"".concat(x.KINDCOINS_TRANSACTIONS,"?").concat(n):x.KINDCOINS_TRANSACTIONS;return await b.request(r,{requiresAuth:!0})}catch(t){throw console.error("Error fetching KindCoins transactions:",t),t}}async createRefund(e,t){try{const n={transaction_id:e,amount:t.amount,reason:t.reason,description:t.description||"Refund request"};return await b.request(x.CREATE_REFUND,{method:"POST",body:JSON.stringify(n),requiresAuth:!0})}catch(n){throw console.error("Error creating refund:",n),n}}async getPaymentStats(){try{return await b.request(x.STATS,{requiresAuth:!0})}catch(e){throw console.error("Error fetching payment stats:",e),e}}calculatePaymentAmount(e){const t={UGX:.035,USD:.029,KINDCOINS:0}[arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UGX"]||.035,n=e*t;return{baseAmount:e,fee:n,total:e+n,feeRate:100*t}}async initiatePesapalPayment(e){let{amountUGX:t,description:n,metadata:r={}}=e;const a={amount:t,currency:"UGX",description:n||"KindBite Order",metadata:r};return await b.request(x.PESAPAL.INITIATE,{method:"POST",body:JSON.stringify(a),requiresAuth:!0})}formatCurrency(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"UGX";const n={UGX:new Intl.NumberFormat("en-UG",{style:"currency",currency:"UGX",minimumFractionDigits:0}),USD:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:2}),KINDCOINS:e=>"".concat(e," KindCoins")},r=n[t];return"function"===typeof r?r(e):r.format(e)}},ft=e=>{let{isOpen:t,onClose:n,reservation:a,onPaymentSuccess:s,userKindCoins:i=0}=e;const[l,o]=(0,r.useState)("kindcoins"),[c,d]=(0,r.useState)(!1),[u,m]=(0,r.useState)([]),[f,p]=(0,r.useState)(null),[h,g]=(0,r.useState)(!1),x=M();(0,r.useEffect)(()=>{t&&"card"===l&&y()},[t,l]);const y=async()=>{try{g(!0);const e=await mt.getPaymentMethods();m(e),e.length>0&&p(e.find(e=>e.is_default)||e[0])}catch(e){console.error("Error loading payment methods:",e),x.error("Failed to load payment methods")}finally{g(!1)}},v=()=>{if(!a)return{baseAmount:0,fee:0,total:0,feeRate:0};const e=a.food_listing.discounted_price*a.quantity_reserved;return mt.calculatePaymentAmount(e,"kindcoins"===l?"KINDCOINS":"UGX")};if(!t||!a)return null;const b=v(),w=i>=b.total;return(0,R.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",children:(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-md",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,R.jsx)("h2",{className:"text-xl font-bold text-gray-800",children:"Complete Payment"}),(0,R.jsx)("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:(0,R.jsx)(F,{className:"w-6 h-6"})})]}),(0,R.jsxs)("div",{className:"p-6 space-y-6",children:[(0,R.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,R.jsxs)("div",{className:"flex items-center space-x-3 mb-3",children:[(0,R.jsx)("span",{className:"text-2xl",children:a.food_listing.image_emoji}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800",children:a.food_listing.name}),(0,R.jsx)("p",{className:"text-sm text-gray-600",children:a.food_listing.restaurant_name})]})]}),(0,R.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Quantity:"}),(0,R.jsx)("span",{className:"ml-2 font-medium",children:a.quantity_reserved})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Price per item:"}),(0,R.jsx)("span",{className:"ml-2 font-medium",children:mt.formatCurrency(a.food_listing.discounted_price,"UGX")})]})]})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("h3",{className:"text-lg font-semibold text-gray-800 mb-3",children:"Payment Method"}),(0,R.jsxs)("div",{className:"space-y-3",children:[(0,R.jsx)("div",{className:"border-2 rounded-lg p-4 cursor-pointer transition-colors ".concat("kindcoins"===l?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),onClick:()=>o("kindcoins"),children:(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)(ce,{className:"w-6 h-6 text-yellow-500"}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsxs)("div",{className:"flex items-center justify-between",children:[(0,R.jsx)("span",{className:"font-medium text-gray-800",children:"KindCoins"}),(0,R.jsxs)("span",{className:"text-sm text-gray-600",children:["Balance: ",i," KindCoins"]})]}),!w&&(0,R.jsx)("p",{className:"text-sm text-red-600 mt-1",children:"Insufficient KindCoins balance"})]})]})}),(0,R.jsx)("div",{className:"border-2 rounded-lg p-4 cursor-pointer transition-colors ".concat("card"===l?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"),onClick:()=>o("card"),children:(0,R.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,R.jsx)(Ge,{className:"w-6 h-6 text-blue-500"}),(0,R.jsxs)("div",{className:"flex-1",children:[(0,R.jsx)("span",{className:"font-medium text-gray-800",children:"Pay via Pesapal"}),(0,R.jsx)("p",{className:"text-sm text-gray-600",children:"Secure card/mobile money checkout"})]})]})})]})]}),"card"===l&&(0,R.jsx)("div",{className:"text-sm text-gray-600 bg-blue-50 border border-blue-100 rounded p-3",children:"You will be redirected to Pesapal to complete your payment securely."}),(0,R.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4",children:[(0,R.jsx)("h4",{className:"font-semibold text-gray-800 mb-3",children:"Payment Summary"}),(0,R.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,R.jsxs)("div",{className:"flex justify-between",children:[(0,R.jsx)("span",{className:"text-gray-600",children:"Subtotal:"}),(0,R.jsx)("span",{className:"font-medium",children:mt.formatCurrency(b.baseAmount,"kindcoins"===l?"KINDCOINS":"UGX")})]}),"card"===l&&(0,R.jsxs)("div",{className:"flex justify-between",children:[(0,R.jsxs)("span",{className:"text-gray-600",children:["Processing fee (",b.feeRate,"%):"]}),(0,R.jsx)("span",{className:"font-medium",children:mt.formatCurrency(b.fee,"UGX")})]}),(0,R.jsx)("div",{className:"border-t border-gray-200 pt-2",children:(0,R.jsxs)("div",{className:"flex justify-between",children:[(0,R.jsx)("span",{className:"font-semibold text-gray-800",children:"Total:"}),(0,R.jsx)("span",{className:"font-bold text-lg",children:mt.formatCurrency(b.total,"kindcoins"===l?"KINDCOINS":"UGX")})]})})]})]}),(0,R.jsxs)("div",{className:"flex space-x-3",children:[(0,R.jsx)("button",{onClick:n,className:"flex-1 px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,R.jsx)("button",{onClick:async()=>{if(a){d(!0);try{if("kindcoins"===l){const e=v();if(i<e.total)return void x.error("Insufficient KindCoins balance");await mt.processKindCoinsPayment(a,e.total),x.success("Payment successful with KindCoins!")}else if("card"===l){const e=a.food_listing.discounted_price*a.quantity_reserved,{redirect_url:t}=await mt.initiatePesapalPayment({amountUGX:e,description:"Payment for ".concat(a.food_listing.name),metadata:{reservation_id:a.id}});return void(window.location.href=t)}null===s||void 0===s||s(a),n()}catch(e){console.error("Payment error:",e),x.error(e.message||"Payment failed. Please try again.")}finally{d(!1)}}},disabled:c||"kindcoins"===l&&!w,className:"flex-1 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex items-center justify-center space-x-2",children:c?(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(ut,{className:"w-4 h-4 animate-spin"}),(0,R.jsx)("span",{children:"Processing..."})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(P,{className:"w-4 h-4"}),(0,R.jsx)("span",{children:"Pay Now"})]})})]})]})]})})};const pt=new class{async sendReservationConfirmation(e){try{const t={type:"reservation_confirmation",recipient_email:e.seeker.email,recipient_name:"".concat(e.seeker.first_name," ").concat(e.seeker.last_name),data:{food_name:e.food_listing.name,restaurant_name:e.food_listing.restaurant_name,pickup_date:e.food_listing.pickup_date,pickup_time:"".concat(e.food_listing.pickup_window_start," - ").concat(e.food_listing.pickup_window_end),location:e.food_listing.location,quantity:e.quantity_reserved,special_instructions:e.special_instructions||"None",provider_contact:{name:e.food_listing.provider.business_name||"".concat(e.food_listing.provider.first_name," ").concat(e.food_listing.provider.last_name),phone:e.food_listing.provider.phone,email:e.food_listing.provider.email}}};return await b.request(g.SEND,{method:"POST",body:JSON.stringify(t),requiresAuth:!0})}catch(t){throw console.error("Error sending reservation confirmation email:",t),t}}async sendReservationStatusUpdate(e,t){try{const n={confirmed:"Your reservation has been confirmed!",cancelled:"Your reservation has been cancelled.",completed:"Your food has been picked up successfully!"},r={type:"reservation_status_update",recipient_email:e.seeker.email,recipient_name:"".concat(e.seeker.first_name," ").concat(e.seeker.last_name),data:{food_name:e.food_listing.name,restaurant_name:e.food_listing.restaurant_name,status:t,message:n[t]||"Your reservation status has been updated to ".concat(t),pickup_date:e.food_listing.pickup_date,pickup_time:"".concat(e.food_listing.pickup_window_start," - ").concat(e.food_listing.pickup_window_end),location:e.food_listing.location,provider_contact:{name:e.food_listing.provider.business_name||"".concat(e.food_listing.provider.first_name," ").concat(e.food_listing.provider.last_name),phone:e.food_listing.provider.phone,email:e.food_listing.provider.email}}};return await b.request(g.SEND,{method:"POST",body:JSON.stringify(r),requiresAuth:!0})}catch(n){throw console.error("Error sending status update email:",n),n}}async sendNewReservationNotification(e){try{const t={type:"new_reservation_notification",recipient_email:e.food_listing.provider.email,recipient_name:e.food_listing.provider.business_name||"".concat(e.food_listing.provider.first_name," ").concat(e.food_listing.provider.last_name),data:{food_name:e.food_listing.name,customer_name:"".concat(e.seeker.first_name," ").concat(e.seeker.last_name),customer_email:e.seeker.email,customer_phone:e.seeker.phone,pickup_date:e.food_listing.pickup_date,pickup_time:"".concat(e.food_listing.pickup_window_start," - ").concat(e.food_listing.pickup_window_end),quantity:e.quantity_reserved,special_instructions:e.special_instructions||"None",customer_location:e.seeker.location}};return await b.request(g.SEND,{method:"POST",body:JSON.stringify(t),requiresAuth:!0})}catch(t){throw console.error("Error sending new reservation notification:",t),t}}async sendWelcomeEmail(e){try{const t={type:"welcome_email",recipient_email:e.email,recipient_name:"".concat(e.first_name," ").concat(e.last_name),data:{user_name:"".concat(e.first_name," ").concat(e.last_name),user_role:e.user_role,kind_coins:e.kind_coins||0}};return await b.request(g.SEND,{method:"POST",body:JSON.stringify(t),requiresAuth:!0})}catch(t){throw console.error("Error sending welcome email:",t),t}}async sendPasswordResetEmail(e,t){try{const n={type:"password_reset",recipient_email:e,data:{reset_token:t,reset_url:"".concat(window.location.origin,"/reset-password?token=").concat(t)}};return await b.request(g.SEND,{method:"POST",body:JSON.stringify(n),requiresAuth:!1})}catch(n){throw console.error("Error sending password reset email:",n),n}}async sendFoodListingReminder(e){try{var t;const n={type:"food_listing_reminder",recipient_email:e.provider.email,recipient_name:e.provider.business_name||"".concat(e.provider.first_name," ").concat(e.provider.last_name),data:{food_name:e.name,pickup_date:e.pickup_date,pickup_time:"".concat(e.pickup_window_start," - ").concat(e.pickup_window_end),available_quantity:e.available_quantity,total_reservations:(null===(t=e.reservations)||void 0===t?void 0:t.length)||0}};return await b.request(g.SEND,{method:"POST",body:JSON.stringify(n),requiresAuth:!0})}catch(n){throw console.error("Error sending food listing reminder:",n),n}}async sendKindCoinsEarnedNotification(e,t,n){try{const r={type:"kindcoins_earned",recipient_email:e.email,recipient_name:"".concat(e.first_name," ").concat(e.last_name),data:{kind_coins_earned:t,total_kind_coins:e.kind_coins,reason:n,user_name:"".concat(e.first_name," ").concat(e.last_name)}};return await b.request(g.SEND,{method:"POST",body:JSON.stringify(r),requiresAuth:!0})}catch(r){throw console.error("Error sending KindCoins notification:",r),r}}},ht=()=>{const{user:e,isAuthenticated:t,login:n,register:a,logout:s,updateKindCoins:i}=q(),l=M(),[o,c]=(0,r.useState)("home"),[d,u]=(0,r.useState)(null),[m,f]=(0,r.useState)(3),[p,h]=(0,r.useState)(!1),[g,x]=(0,r.useState)(!1),[y,v]=(0,r.useState)("login"),[w,j]=(0,r.useState)(!1),[N,k]=(0,r.useState)(!1),[_,S]=(0,r.useState)(!1),[E,C]=(0,r.useState)("All"),[P,A]=(0,r.useState)([]),[T,L]=(0,r.useState)(""),[F,I]=(0,r.useState)(""),[O,z]=(0,r.useState)(!1),[D,U]=(0,r.useState)([]),[H,V]=(0,r.useState)([]),[K,B]=(0,r.useState)(!1),[W,G]=(0,r.useState)(null),[$,Q]=(0,r.useState)(!1),[Y,J]=(0,r.useState)(!1),[Z,ee]=(0,r.useState)(null);(0,r.useEffect)(()=>{const e=()=>{z(window.innerWidth>=1024)};return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[]),(0,r.useEffect)(()=>{"food-management"===o&&(j(!0),c("home"))},[o]),(0,r.useEffect)(()=>{const e=()=>{j(!0)};return window.addEventListener("openFoodManagement",e),()=>window.removeEventListener("openFoodManagement",e)},[]),(0,r.useEffect)(()=>{"search"===o&&e&&t&&ne()},[o,e,t]),(0,r.useEffect)(()=>{"home"===o&&e&&t&&(ae(),"end-user"===e.user_role?ne():se())},[o,e,t]);const te=async e=>{try{await De.deleteFoodListing(e),U(t=>t.filter(t=>t.id!==e)),window.dispatchEvent(new CustomEvent("refreshMyFoodListings")),l.success("Food item deleted successfully!")}catch(t){console.error("Error deleting food:",t),l.error(t.message||"Failed to delete food item. Please try again.")}},ne=async()=>{try{if(B(!0),!e)return void l.error("You must be logged in to search food");if(!localStorage.getItem("kindbite_access_token"))return void l.error("Authentication token not found. Please login again.");try{let t;t="end-user"===e.user_role?await De.getAvailableFoodListingsForSeekers():await De.getAllFoodListings(),console.log("All foods data received:",t),Array.isArray(t)?V(t):t&&Array.isArray(t.results)?V(t.results):(console.log("No foods data found, setting empty array"),V([]))}catch(t){if(403!==t.status)throw t;console.log("Foods load failed with 403, attempting token refresh...");if(!await b.refreshToken())throw new Error("Authentication failed. Please login again.");{let t;console.log("Token refreshed, retrying foods load..."),t="end-user"===e.user_role?await De.getAvailableFoodListingsForSeekers():await De.getAllFoodListings(),console.log("Retry foods data received:",t),Array.isArray(t)?V(t):t&&Array.isArray(t.results)?V(t.results):(console.log("No retry foods data found, setting empty array"),V([]))}}}catch(n){console.error("Error loading all foods:",n),403===n.status?l.error("Authentication failed. Please login again."):l.error("Failed to load food listings")}finally{B(!1)}},ae=async()=>{try{if(Q(!0),!e)return void console.log("No user found for stats");if(!localStorage.getItem("kindbite_access_token"))return void console.log("No access token available for stats");try{const e=await De.getFoodStats();console.log("User stats received:",e),G(e)}catch(t){if(403===t.status){console.log("Stats load failed with 403, attempting token refresh...");if(await b.refreshToken()){console.log("Token refreshed, retrying stats load...");const e=await De.getFoodStats();console.log("Retry stats received:",e),G(e)}else console.log("Token refresh failed for stats")}else console.error("Stats load error:",t)}}catch(n){console.error("Error loading user stats:",n)}finally{Q(!1)}},se=async()=>{try{if(B(!0),!e)return void console.log("No user found for food listings");if(!localStorage.getItem("kindbite_access_token"))return void console.log("No access token available for food listings");try{const e=await De.getMyFoodListings();console.log("User food listings received:",e),Array.isArray(e)?V(e):e&&Array.isArray(e.results)?V(e.results):(console.log("No user food listings data found, setting empty array"),V([]))}catch(t){if(403!==t.status)throw t;console.log("User food listings load failed with 403, attempting token refresh...");if(!await b.refreshToken())throw new Error("Authentication failed. Please login again.");{console.log("Token refreshed, retrying user food listings load...");const e=await De.getMyFoodListings();console.log("Retry user food listings data received:",e),Array.isArray(e)?V(e):e&&Array.isArray(e.results)?V(e.results):(console.log("No retry user food listings data found, setting empty array"),V([]))}}}catch(n){console.error("Error loading user food listings:",n),403===n.status?l.error("Authentication failed. Please login again."):l.error("Failed to load your food listings")}finally{B(!1)}};return t?(0,R.jsxs)("div",{className:"min-h-screen bg-gray-50",children:[(0,R.jsx)(X,{title:(()=>{if("home"===o&&e&&"end-user"!==e.user_role){return{restaurant:"Restaurant Dashboard",home:"Home Kitchen Dashboard",factory:"Food Factory Dashboard",supermarket:"Supermarket Dashboard",retail:"Retail Shop Dashboard",verifier:"Food Verifier Dashboard",ambassador:"Food Ambassador Dashboard",donor:"Donor Dashboard"}[e.user_role]||"Dashboard"}return{home:"Rescue food, earn KindCoins",search:"Find Available Food",community:"Community Hub",points:"KindCoins & Rewards",profile:"Your Profile & Impact",about:"About KindBite",partners:"Our Global Partners",environment:"Environmental Impact",news:"News & Celebrations",chat:"Messages & Friends",panels:"User Panels"}[o]||"KindBite"})(),onMenuToggle:()=>k(!N),onAIChatToggle:()=>h(!0),onAuthToggle:()=>x(!0),onLoginClick:()=>{v("login"),x(!0)},onSignupClick:()=>{v("register"),x(!0)},onNotificationsToggle:()=>{},onHomeClick:()=>c("home"),onProfileClick:()=>c("profile"),onLogout:s,notifications:m,isLargeScreen:O,userRole:null===e||void 0===e?void 0:e.user_role,isAuthenticated:t,user:e,profileImage:null===e||void 0===e?void 0:e.profile_image}),(0,R.jsx)(ue,{onViewChange:c,isOpen:N,onClose:()=>k(!1),userRole:null===e||void 0===e?void 0:e.user_role,onLogout:s,isLargeScreen:O}),(0,R.jsx)("main",{className:"pb-20 ".concat(O?"lg:pl-64 lg:pt-20":""),children:(()=>{if("home"===o&&e&&"end-user"!==e.user_role)return(0,R.jsxs)("div",{className:"text-center py-8",children:[(0,R.jsx)("div",{className:"text-6xl mb-4",children:"restaurant"===e.user_role?"\ud83c\udf7d\ufe0f":"home"===e.user_role?"\ud83c\udfe0":"factory"===e.user_role?"\ud83c\udfed":"supermarket"===e.user_role?"\ud83d\uded2":"retail"===e.user_role?"\ud83c\udfea":"verifier"===e.user_role?"\ud83e\ude7a":"ambassador"===e.user_role?"\u2705":"\ud83d\udcb0"}),(0,R.jsxs)("h2",{className:"text-xl font-bold text-gray-800 mb-2",children:["Welcome to ",e.user_role," Dashboard"]}),(0,R.jsx)("p",{className:"text-gray-600 mb-6",children:"This is your specialized dashboard for managing your role in the KindBite ecosystem."}),(0,R.jsx)("div",{className:"mb-6",children:(0,R.jsxs)("button",{onClick:()=>j(!0),className:"bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 transition-colors flex items-center space-x-2 mx-auto",children:[(0,R.jsx)("span",{children:"\ud83c\udf7d\ufe0f"}),(0,R.jsx)("span",{children:"Manage Food Items"})]})}),(0,R.jsxs)("div",{className:"bg-white rounded-lg shadow-md p-4 max-w-sm mx-auto",children:[(0,R.jsx)("h3",{className:"font-semibold text-gray-800 mb-3",children:"Today's Performance"}),$?(0,R.jsxs)("div",{className:"flex justify-center items-center py-8",children:[(0,R.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-green-500"}),(0,R.jsx)("span",{className:"ml-2 text-gray-600",children:"Loading stats..."})]}):W?(0,R.jsxs)("div",{className:"grid grid-cols-3 gap-4 text-center",children:[(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-xl font-bold text-orange-600",children:W.total_listings||0}),(0,R.jsx)("div",{className:"text-xs text-gray-600",children:"Items Listed"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-xl font-bold text-green-600",children:W.completed_reservations||0}),(0,R.jsx)("div",{className:"text-xs text-gray-600",children:"Completed"})]}),(0,R.jsxs)("div",{children:[(0,R.jsx)("div",{className:"text-xl font-bold text-purple-600",children:W.total_kindcoins_earned||0}),(0,R.jsx)("div",{className:"text-xs text-gray-600",children:"KindCoins"})]})]}):(0,R.jsx)("div",{className:"text-center py-4 text-gray-500",children:(0,R.jsx)("p",{children:"No data available"})})]})]});switch(o){case"search":return(0,R.jsx)(tt,{foodListings:H,onFoodSelect:u,onViewChange:c,loading:K,onRefresh:ne,title:"end-user"===(null===e||void 0===e?void 0:e.user_role)?"Find Food Near You":"Manage Food Listings"});case"community":return(0,R.jsx)(nt,{onViewChange:c});case"points":return(0,R.jsx)(rt,{userPoints:(null===e||void 0===e?void 0:e.kindCoins)||0});case"profile":return(0,R.jsx)(it,{userPoints:(null===e||void 0===e?void 0:e.kindCoins)||0});case"about":return(0,R.jsx)(lt,{});case"reservations":return"end-user"===(null===e||void 0===e?void 0:e.user_role)?(0,R.jsx)(ot,{}):(0,R.jsx)(ct,{});case"my-food-listings":return(0,R.jsx)(dt,{onDeleteFood:te});default:return(0,R.jsx)(Ye,{userPoints:(null===e||void 0===e?void 0:e.kind_coins)||0,foodListings:H,onFoodSelect:u,onViewChange:c,userStats:W,isLoadingStats:$,isLoadingFoods:K,user:e})}})()}),(0,R.jsx)(re,{currentView:o,onViewChange:c}),(0,R.jsx)(pe,{selectedFood:d,onClose:()=>u(null),onReserve:async e=>{if(t){try{const t={food_listing:e.id,quantity_reserved:1,special_instructions:""},n=await De.createReservation(t);await pt.sendReservationConfirmation(n),await pt.sendNewReservationNotification(n),window.dispatchEvent(new CustomEvent("reservationCreated")),ee(n),J(!0),l.success("Reservation created successfully! Please complete payment.")}catch(n){console.error("Error creating reservation:",n),l.error("Failed to create reservation. Please try again.")}u(null)}else x(!0)}}),(0,R.jsx)(fe,{showAIChat:p,onClose:()=>h(!1),aiMessages:P,aiInput:T,onAiInputChange:e=>L(e.target.value),onSendMessage:()=>{if(!T.trim())return;const e={sender:"user",text:T,timestamp:new Date};A(t=>[...t,e]),setTimeout(()=>{const e={sender:"ai",text:'I can help you with KindBite! For "'.concat(T,'", I recommend checking nearby restaurants or connecting with a food ambassador in your area.'),timestamp:new Date};A(t=>[...t,e])},1e3),L("")}}),(0,R.jsx)(_e,{isOpen:g,onClose:()=>x(!1),onLogin:n,onRegister:a,initialMode:y}),(0,R.jsx)(Ke,{isOpen:w,onClose:()=>j(!1),user:e,userFoodListings:D,onAddFood:async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];try{const r=await De.createFoodListing(e);if(t&&t.length>0)try{for(const e of t){const n=new FormData;n.append("image",e),n.append("alt_text",e.name),n.append("is_primary",0===t.indexOf(e)),await fetch("http://localhost:8000/api/foods/images/".concat(r.id,"/upload/"),{method:"POST",headers:{Authorization:"Bearer ".concat(localStorage.getItem("kindbite_access_token"))},body:n})}l.success("Food item and images uploaded successfully!")}catch(n){console.error("Error uploading images:",n),l.success("Food item added successfully, but there was an error uploading images.")}else l.success("Food item added successfully!");U(e=>[...e,r]),window.dispatchEvent(new CustomEvent("refreshMyFoodListings"))}catch(r){console.error("Error adding food:",r),l.error(r.message||"Failed to add food item. Please try again.")}},onUpdateFood:async e=>{try{const t=await De.updateFoodListing(e.id,e);U(n=>n.map(n=>n.id===e.id?t:n)),window.dispatchEvent(new CustomEvent("refreshMyFoodListings")),l.success("Food item updated successfully!")}catch(t){console.error("Error updating food:",t),l.error(t.message||"Failed to update food item. Please try again.")}},onDeleteFood:te}),(0,R.jsx)(ft,{isOpen:Y,onClose:()=>{J(!1),ee(null)},reservation:Z,onPaymentSuccess:async e=>{try{await pt.sendReservationStatusUpdate(e,"confirmed"),i(10),window.dispatchEvent(new CustomEvent("reservationUpdated")),l.success("Payment completed! Reservation confirmed.")}catch(t){console.error("Error processing payment success:",t),l.error("Payment completed but there was an error updating the reservation.")}},userKindCoins:(null===e||void 0===e?void 0:e.kind_coins)||0})]}):(0,R.jsxs)(R.Fragment,{children:[(0,R.jsx)(Pe,{onGetStarted:()=>{v("login"),x(!0)},onLogin:()=>{v("login"),x(!0)},onSignup:()=>{v("register"),x(!0)}}),(0,R.jsx)(_e,{isOpen:g,onClose:()=>x(!1),onLogin:n,onRegister:a,initialMode:y})]})},gt=()=>(0,R.jsx)(U,{children:(0,R.jsx)(ht,{})}),xt=document.getElementById("root");(0,a.H)(xt).render((0,R.jsx)(r.StrictMode,{children:(0,R.jsx)(z,{children:(0,R.jsx)(U,{children:(0,R.jsx)(Y,{children:(0,R.jsx)(gt,{})})})})}))})();
//# sourceMappingURL=main.0a31954e.js.map